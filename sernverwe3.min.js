const a0_0x30f7ed=a0_0x59d4;(function(_0x1d536f,_0x45788e){const _0x8f5103=a0_0x59d4,_0x2893d6=_0x1d536f();while(!![]){try{const _0x1f43c8=parseInt(_0x8f5103(0x20e))/0x1*(parseInt(_0x8f5103(0x219))/0x2)+-parseInt(_0x8f5103(0x226))/0x3*(-parseInt(_0x8f5103(0x214))/0x4)+parseInt(_0x8f5103(0x217))/0x5*(-parseInt(_0x8f5103(0x203))/0x6)+-parseInt(_0x8f5103(0x20a))/0x7*(parseInt(_0x8f5103(0x23a))/0x8)+parseInt(_0x8f5103(0x28a))/0x9+-parseInt(_0x8f5103(0x20b))/0xa+-parseInt(_0x8f5103(0x1e0))/0xb*(-parseInt(_0x8f5103(0x277))/0xc);if(_0x1f43c8===_0x45788e)break;else _0x2893d6['push'](_0x2893d6['shift']());}catch(_0x1e338a){_0x2893d6['push'](_0x2893d6['shift']());}}}(a0_0xceb5,0x86009));const a0_0x21bf2b=(function(){let _0x9e9ff3=!![];return function(_0x2e1a23,_0xf81701){const _0x19e2a2=_0x9e9ff3?function(){const _0x3b73f9=a0_0x59d4;if(_0xf81701){const _0xa9e197=_0xf81701[_0x3b73f9(0x269)](_0x2e1a23,arguments);return _0xf81701=null,_0xa9e197;}}:function(){};return _0x9e9ff3=![],_0x19e2a2;};}()),a0_0xb8fed2=a0_0x21bf2b(this,function(){const _0x309408=a0_0x59d4;return a0_0xb8fed2[_0x309408(0x263)]()[_0x309408(0x237)](_0x309408(0x1db))[_0x309408(0x263)]()[_0x309408(0x1c9)](a0_0xb8fed2)[_0x309408(0x237)](_0x309408(0x1db));});a0_0xb8fed2();const a0_0x4cdb99=(function(){let _0x52cece=!![];return function(_0x1343e7,_0x2fff63){const _0x2780a3=_0x52cece?function(){const _0x3da062=a0_0x59d4;if(_0x2fff63){const _0x15d8cb=_0x2fff63[_0x3da062(0x269)](_0x1343e7,arguments);return _0x2fff63=null,_0x15d8cb;}}:function(){};return _0x52cece=![],_0x2780a3;};}()),a0_0x7ba057=a0_0x4cdb99(this,function(){const _0x42b49c=a0_0x59d4;let _0x117953;try{const _0x3ee1db=Function(_0x42b49c(0x229)+_0x42b49c(0x267)+');');_0x117953=_0x3ee1db();}catch(_0xafffae){_0x117953=window;}const _0x1d363a=_0x117953[_0x42b49c(0x285)]=_0x117953[_0x42b49c(0x285)]||{},_0x4c75e4=[_0x42b49c(0x225),'warn',_0x42b49c(0x264),_0x42b49c(0x1e4),'exception',_0x42b49c(0x218),_0x42b49c(0x213)];for(let _0x24a0e4=0x0;_0x24a0e4<_0x4c75e4[_0x42b49c(0x1f6)];_0x24a0e4++){const _0x1f40c4=a0_0x4cdb99[_0x42b49c(0x1c9)][_0x42b49c(0x262)][_0x42b49c(0x283)](a0_0x4cdb99),_0x34d3f4=_0x4c75e4[_0x24a0e4],_0x129d04=_0x1d363a[_0x34d3f4]||_0x1f40c4;_0x1f40c4[_0x42b49c(0x27a)]=a0_0x4cdb99['bind'](a0_0x4cdb99),_0x1f40c4['toString']=_0x129d04[_0x42b49c(0x263)][_0x42b49c(0x283)](_0x129d04),_0x1d363a[_0x34d3f4]=_0x1f40c4;}});a0_0x7ba057(),require('dotenv')[a0_0x30f7ed(0x276)]();const express=require(a0_0x30f7ed(0x20d)),apps=express(),{createClient}=require('@supabase/supabase-js'),crypto=require(a0_0x30f7ed(0x27b)),cors=require(a0_0x30f7ed(0x1fb)),path=require(a0_0x30f7ed(0x208)),bodyParser=require('body-parser'),multer=require(a0_0x30f7ed(0x24f)),fs=require('fs'),cookieParser=require('cookie-parser'),bcrypt=require('bcrypt'),uploadsDir=path[a0_0x30f7ed(0x25d)](__dirname,'uploads');!fs[a0_0x30f7ed(0x227)](uploadsDir)&&fs[a0_0x30f7ed(0x22a)](uploadsDir,{'recursive':!![]});const upload=multer({'dest':uploadsDir}),allowedOrigins=[a0_0x30f7ed(0x216),a0_0x30f7ed(0x21d),a0_0x30f7ed(0x23f),'http://localhost:2121'];apps['use'](cors({'origin':function(_0xaf3a02,_0x4e3be5){const _0x246048=a0_0x30f7ed;if(!_0xaf3a02)return _0x4e3be5(null,!![]);if(allowedOrigins[_0x246048(0x21a)](_0xaf3a02))return _0x4e3be5(null,!![]);return _0x4e3be5(new Error(_0x246048(0x1e8)));},'credentials':!![]})),apps['use']((_0x26ec00,_0xd53c2,_0x243160)=>{const _0x35a4c7=a0_0x30f7ed;_0xd53c2[_0x35a4c7(0x26d)](_0x35a4c7(0x251),_0x35a4c7(0x1ff)),_0x243160();}),apps[a0_0x30f7ed(0x238)](bodyParser[a0_0x30f7ed(0x256)]({'limit':a0_0x30f7ed(0x1cf)})),apps[a0_0x30f7ed(0x238)](bodyParser[a0_0x30f7ed(0x233)]({'extended':!![],'limit':a0_0x30f7ed(0x1cf)})),apps['use'](cookieParser());(!process[a0_0x30f7ed(0x1d2)]['SUPABASE_URL']||!process['env']['SUPABASE_KEY'])&&console[a0_0x30f7ed(0x1ea)](a0_0x30f7ed(0x21e));const supabase=createClient(process[a0_0x30f7ed(0x1d2)][a0_0x30f7ed(0x279)]||'',process['env'][a0_0x30f7ed(0x289)]||'');apps[a0_0x30f7ed(0x238)](express['static'](path[a0_0x30f7ed(0x25d)](__dirname,a0_0x30f7ed(0x212))));function a0_0x59d4(_0x2ce646,_0x14c581){const _0x538cfb=a0_0xceb5();return a0_0x59d4=function(_0x7ba057,_0x4cdb99){_0x7ba057=_0x7ba057-0x1c9;let _0x2c5d30=_0x538cfb[_0x7ba057];if(a0_0x59d4['leHSOB']===undefined){var _0x2be8b2=function(_0x59d407){const _0x2433dd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5c9f3d='',_0x16ec21='',_0x4e68d4=_0x5c9f3d+_0x2be8b2;for(let _0x26da07=0x0,_0xbd4537,_0x9e9ff3,_0x2e1a23=0x0;_0x9e9ff3=_0x59d407['charAt'](_0x2e1a23++);~_0x9e9ff3&&(_0xbd4537=_0x26da07%0x4?_0xbd4537*0x40+_0x9e9ff3:_0x9e9ff3,_0x26da07++%0x4)?_0x5c9f3d+=_0x4e68d4['charCodeAt'](_0x2e1a23+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0xbd4537>>(-0x2*_0x26da07&0x6)):_0x26da07:0x0){_0x9e9ff3=_0x2433dd['indexOf'](_0x9e9ff3);}for(let _0xf81701=0x0,_0x19e2a2=_0x5c9f3d['length'];_0xf81701<_0x19e2a2;_0xf81701++){_0x16ec21+='%'+('00'+_0x5c9f3d['charCodeAt'](_0xf81701)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x16ec21);};a0_0x59d4['QyXnAx']=_0x2be8b2,_0x2ce646=arguments,a0_0x59d4['leHSOB']=!![];}const _0xb8fed2=_0x538cfb[0x0],_0x21bf2b=_0x7ba057+_0xb8fed2,_0xceb57b=_0x2ce646[_0x21bf2b];if(!_0xceb57b){const _0xa9e197=function(_0x52cece){this['GfszTr']=_0x52cece,this['YjXhEh']=[0x1,0x0,0x0],this['yQKsSV']=function(){return'newState';},this['jNTsEz']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['PdfUjc']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xa9e197['prototype']['eSxjvV']=function(){const _0x1343e7=new RegExp(this['jNTsEz']+this['PdfUjc']),_0x2fff63=_0x1343e7['test'](this['yQKsSV']['toString']())?--this['YjXhEh'][0x1]:--this['YjXhEh'][0x0];return this['gktRXU'](_0x2fff63);},_0xa9e197['prototype']['gktRXU']=function(_0x2780a3){if(!Boolean(~_0x2780a3))return _0x2780a3;return this['cpECwU'](this['GfszTr']);},_0xa9e197['prototype']['cpECwU']=function(_0x15d8cb){for(let _0x117953=0x0,_0x1d363a=this['YjXhEh']['length'];_0x117953<_0x1d363a;_0x117953++){this['YjXhEh']['push'](Math['round'](Math['random']())),_0x1d363a=this['YjXhEh']['length'];}return _0x15d8cb(this['YjXhEh'][0x0]);},new _0xa9e197(a0_0x59d4)['eSxjvV'](),_0x2c5d30=a0_0x59d4['QyXnAx'](_0x2c5d30),_0x2ce646[_0x21bf2b]=_0x2c5d30;}else _0x2c5d30=_0xceb57b;return _0x2c5d30;},a0_0x59d4(_0x2ce646,_0x14c581);}const sessions=new Map();function genToken(){const _0x2ba400=a0_0x30f7ed;return crypto[_0x2ba400(0x1cc)](0x20)[_0x2ba400(0x263)](_0x2ba400(0x26c));}setInterval(()=>{const _0x2029e6=a0_0x30f7ed;try{const _0x5a3bf8=Date[_0x2029e6(0x223)]();for(const [_0x77d3bd,_0x4d33e3]of sessions[_0x2029e6(0x286)]()){if(!_0x4d33e3||_0x4d33e3['expiresAt']<=_0x5a3bf8)sessions[_0x2029e6(0x211)](_0x77d3bd);}}catch(_0x1a52e9){console[_0x2029e6(0x1ea)]('Session\x20cleanup\x20error',_0x1a52e9);}},0x1e*0x3c*0x3e8);function a0_0xceb5(){const _0x43acf2=['rvjsic9HA3vUig1LDgeGAw5Qzwn0','q29UDgvUDc1uExbL','y29VA2LLCW','BM9Uzq','DxbKyxrL','kcGOlISPkYKRksSK','Aw5KzxHpzG','l2fWAs9SB2DVDxq','l2fWAs91CgXVywrFAw1Hz2vZlZPPza','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6DxjSiIbJB250zw50psi','mty0nZqYmZHbrwjLEgW','Aw5KzxGUAhrTBa','Ag9ZDa','Bwf5yMvtAw5NBgu','zxjYB3i','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMrLC2nYAxb0Aw9UiIbJB250zw50psi','ywrTAw5FC2vZC2LVBG','AwXPA2u','tM90igfSBg93zwqGyNKGq09suW','4PYfiefKBwLUihvZzxiGy3jLyxrLzcbPBIbYyw56AxjVC3rVCMvFBg9NAw5Hzg1PBIaOCgfZC3DVCMqGAgfZAcbZDg9YzwqPlG','D2fYBG','ywT1BL9TBc5ODg1S','yxjYyxK','DhjPBq','jMX0oW','rgv0ywLSigfRDw4Gtw9IAwXLieXLz2vUzhmGzgKGuMfUEMLYBYbtDg9Yzq','ue9tvcaVyxbPl3bVC3rFywT1BL9KzxrHAwWGlt4','BgLTAxq','BMfTyq','DxnLCG','B3jKzxiGAgfYDxmGyxjYyxKGvvjm','l2HLywX0Aa','BgvUz3rO','C3rVCMfNzq','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6DhLWzsiGy29UDgvUDd0ID2vIC2L0zsiGlZ4kicaGicaGpg1LDgeGChjVCgvYDhK9iM9NoNrPDgXLiIbJB250zw50psi','C2vUza','Dw5SAw5Ru3LUyW','y29YCW','l2fWAs9KzwXFAw1Hz2u','CMfUEMLYB3n0B3jLx2fRDw5TBa','CMvHzezPBgvtEw5J','BM8TC3rVCMu','sw50zxjUywWGzxjYB3i','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6Aw1Hz2uIignVBNrLBNq9iG','u2vYDMvYig1PC2nVBMzPz3vYzwq','nNzNEuXXvW','zMfSC2u','4Os577IpiefKBwLUihvZzxiGywXYzwfKEsbLEgLZDhmGAw4GCMfUEMLYB3n0B3jLx2XVz2LUywrTAw4U','l2fWAs9WB3n0x2fRDw5Fzgv0ywLS','pc9OzwfKpG','Cgf0Aa','oI8V','mtq5mdKYm3jKu1HbEa','mtaYmdGYndbHBgPxqve','AxnbCNjHEq','zxHWCMvZCW','mZq2mZfYzwzNDhe','sw52ywXPzcbJCMvKzw50AwfSCW','C2XPy2u','zgvSzxrL','ChvIBgLJ','DhjHy2u','mtjbtKH2EuK','vgLKywSGywrHigzPBgu','Ahr0Chm6lY9Yyw56AxjVlxnLCNzLCI1WCM9KDwn0Aw9UlNvWlNjHAwX3yxKUyxbW','mJGWntiWnu5MqNbWsW','DgfIBgu','nMjLuevstq','Aw5JBhvKzxm','ue9sva','zM9YrwfJAa','Ahr0Chm6lY9Yyw56AxjVlNn0B3jL','4PQG77Ipifnvuefcqvnfx1vstcbHDgf1ifnvuefcqvnfx0Tfwsb0AwrHAYbKAxrLBxvRyw4GzgKGlMvUDI4GugfZDgLRyw4GDMfYAwfIzwWGzw52igrPC2v0igPPA2eGBwvUz2D1BMfRyw4Gu3vWywjHC2uU','BwfW','C29Sza','C3rHCNrZv2L0Aa','C3bSAxq','BM93','yM9KEq','Bg9N','nJmZmdGXwffluw9q','zxHPC3rZu3LUyW','C2LUz2XL','CMv0DxjUicHMDw5JDgLVBIGPia','BwTKAxjtEw5J','z2fTyMfYCW','uMfUEMLYBYbtDg9YzsaTierLDgfPBcbbA3vU','Dg9mB3DLCKnHC2u','ywrTAw4','jMD0oW','tM8GCgfZC3DVCMrFAgfZAcbMB3vUzcbMB3iGywrTAw4GCM93lG','cJWVAgvHzd4','vMfYEq','DxjSzw5JB2rLza','l2fWAs9Yzw9YzgvYx2LTywDLCY86Awq','zw5ZDxjLqwrTAw5fEgLZDhmGzMfPBgvKoG','ywT1BL8','C2vHCMnO','DxnL','ywnJB3vUDf9Pza','mZjnreLoEMC','tM90igzVDw5K','z2fTyMfY','DxnLCM5HBwuGjIbWyxnZD29YzcbYzxf1AxjLza','ywrTAw4UAhrTBa','Ahr0Chm6lY93D3CUCMfUEMLYBY5ZDg9Yzq','Chv0','jNf1B3q7','CMfUEMLYB3n0B3jLx2XVz2LUywrTAw4','C3rYAw5N','Ahr0Ca','zxHWAxjLC0f0','l2fWAs91CgrFCMfUEMLYB3n0B3jLx2fRDw5TBc86Awq','l2fWAs9KzwXFAw1Hz2vZlZPPza','rMfPBgvKihrVignYzwf0zsbHzg1PBIbPBIbYyw56AxjVC3rVCMvFBg9NAw5Hzg1PBJO','CMfUzg9T','iIaVpGOGicaG','jImZotS','zgvZA3jPChnP','y3jLyxrLuMvHzfn0CMvHBq','AgfSzG','BxvSDgvY','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMLTywDLiIbJB250zw50psi','q2fJAguTq29UDhjVBa','ChvIBgLJvxjS','y29VA2LL','zNjVBq','t3jPz2LU','ANnVBG','C3rHDhvZ','y2f0y2G','rvjsic9HCgKVBg9NAw4','BMfTzq','B3jPz2LUywXUyw1L','zMLSDgvY','AM9PBG','BwvZC2fNzq','y29TCgfYzq','DxnLCM5HBwu','Cg9W','ChjVDg90ExbL','Dg9tDhjPBMC','Aw5MBW','CMvWBgfJzq','CMvTB3zL','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','zw5ZDxjLqwrTAw5fEgLZDhmGzxjYB3i6','yxbWBhK','z2v0','zgf0yq','Agv4','C2v0','CMvTB3zLrxjY','AwrFywT1BG','8j+AGcbtzxj2zxiGCNvUBMLUzYbVBIbODhrWoI8VBg9JywXOB3n0oG','CgfYyw1Z','B3jKzxi','zxH0BMfTzq','A2v5CW','l2fRDw4','y29UzMLN','mtjrugnVre0','ChjVDg9JB2W','u1vqqujbu0vFvvjm','x19WCM90B19F','y3j5ChrV','CxvLCNK','C3rHy2S','l2fWAs9SB2DPBG','Ahr0Chm6lY9SENLJCML3CxjJCwjPAwP0AwLWys5ZDxbHyMfZzs5JBY9ZDg9YywDLl3yXl29IAMvJDc9WDwjSAwmVz2fTyMfYl2XVz28VBwv0yv9Yyw56AxjVlNDLyNa','Aw5Zzxj0','DxbSB2fK','iIaVpGOGicaGica8BgLUAYbYzwW9iMLTywDLx3nYyYiGAhjLzJ0I','yMLUza','jMfTCdS','y29UC29Szq','zw50CMLLCW','C2vSzwn0','tM90igf1DgHVCML6zwq','u1vqqujbu0vFs0vz','nJCZmJu1ogTcrNLVCq','Dhj1C3qGChjVEhK','y29UC3rYDwn0B3i','DxrMoa','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6zgvZy3jPChrPB24IignVBNrLBNq9iG','CMfUzg9TqNL0zxm','ihWGuMfUEMLYBYbtDg9YztWVDgL0Bgu+cIaGicaGidXTzxrHig5HBwu9iMrLC2nYAxb0Aw9UiIbJB250zw50psi','AgfZAa','mtbTyG','BwLTzxr5Cgu','Cg9ZDa','zw52','ChvZAa','y2XLyxjdB29RAwu','l2fWAs9JAgvJAY1ZzxnZAw9U'];a0_0xceb5=function(){return _0x43acf2;};return a0_0xceb5();}function requireAdmin(_0x1dac85,_0x3f0d14,_0x3adb6b){const _0x35d8ec=a0_0x30f7ed;try{const _0x45816c=_0x1dac85['cookies']&&_0x1dac85[_0x35d8ec(0x1d8)][_0x35d8ec(0x1e6)];if(!_0x45816c)return _0x3f0d14['status'](0x191)[_0x35d8ec(0x256)]({'success':![],'message':'Not\x20authorized'});const _0x3a73f5=sessions[_0x35d8ec(0x26a)](_0x45816c);if(!_0x3a73f5)return _0x3f0d14['clearCookie']('admin_session'),_0x3f0d14['status'](0x191)[_0x35d8ec(0x256)]({'success':![],'message':_0x35d8ec(0x288)});if(Date[_0x35d8ec(0x223)]()>_0x3a73f5[_0x35d8ec(0x245)])return sessions[_0x35d8ec(0x211)](_0x45816c),_0x3f0d14['clearCookie'](_0x35d8ec(0x1e6)),_0x3f0d14[_0x35d8ec(0x257)](0x191)[_0x35d8ec(0x256)]({'success':![],'message':'Session\x20expired'});_0x1dac85[_0x35d8ec(0x1f3)]=_0x3a73f5[_0x35d8ec(0x1f3)],_0x3adb6b();}catch(_0x19624b){return _0x3f0d14[_0x35d8ec(0x257)](0x191)[_0x35d8ec(0x256)]({'success':![],'message':_0x35d8ec(0x288)});}}async function ensureAdminExists(){const _0x587683=a0_0x30f7ed;try{let _0x263f73;try{const _0x45f1a4=await supabase[_0x587683(0x254)](_0x587683(0x242))[_0x587683(0x287)]('*')['eq'](_0x587683(0x260),_0x587683(0x22e))['limit'](0x1)['maybeSingle']();_0x263f73=_0x45f1a4&&_0x45f1a4[_0x587683(0x26b)]!==undefined?_0x45f1a4[_0x587683(0x26b)]:_0x45f1a4;}catch(_0x58a313){const _0x2fd6f8=await supabase[_0x587683(0x254)](_0x587683(0x242))['select']('*')['eq'](_0x587683(0x260),'admin')[_0x587683(0x1f1)](0x1);_0x263f73=_0x2fd6f8&&_0x2fd6f8[_0x587683(0x26b)]&&_0x2fd6f8[_0x587683(0x26b)][_0x587683(0x1f6)]?_0x2fd6f8['data'][0x0]:null;}if(_0x263f73){console[_0x587683(0x225)](_0x587683(0x205));return;}const _0x4a733f=process[_0x587683(0x1d2)]['ADMIN_PW'];if(!_0x4a733f){console[_0x587683(0x1ea)]('⚠️\x20ADMIN_PW\x20not\x20set\x20in\x20env.\x20Skipping\x20creating\x20admin\x20user.\x20Set\x20ADMIN_PW\x20to\x20auto-create\x20admin\x20at\x20startup.');return;}const _0x15b479=0xc,_0x489462=await bcrypt[_0x587683(0x1ce)](String(_0x4a733f),_0x15b479),{data:_0x3c3784,error:_0xad0e1e}=await supabase['from'](_0x587683(0x242))[_0x587683(0x280)]([{'username':_0x587683(0x22e),'password_hash':_0x489462,'role':_0x587683(0x22e),'created_at':new Date()}])[_0x587683(0x287)]();_0xad0e1e?console[_0x587683(0x1e4)](_0x587683(0x248),_0xad0e1e):console[_0x587683(0x225)](_0x587683(0x1e9));}catch(_0x344e3c){console[_0x587683(0x1e4)](_0x587683(0x268),_0x344e3c&&_0x344e3c['stack']?_0x344e3c['stack']:_0x344e3c);}}ensureAdminExists()[a0_0x30f7ed(0x258)](_0x2b000e=>console[a0_0x30f7ed(0x1e4)](a0_0x30f7ed(0x235),_0x2b000e)),apps[a0_0x30f7ed(0x1d1)](a0_0x30f7ed(0x27e),async(_0xcba9a6,_0x479934)=>{const _0x30d004=a0_0x30f7ed;try{const {username:_0x16535e,password:_0x1091c2}=_0xcba9a6[_0x30d004(0x224)]||{};if(!_0x16535e||!_0x1091c2)return _0x479934['status'](0x190)[_0x30d004(0x256)]({'success':![],'message':_0x30d004(0x23d)});if(String(_0x16535e)['toLowerCase']()!==_0x30d004(0x22e))return _0x479934[_0x30d004(0x257)](0x191)[_0x30d004(0x256)]({'success':![],'message':'Invalid\x20credentials'});const {data:_0x2dcb85,error:_0x190c72}=await supabase[_0x30d004(0x254)]('ranzirostore_loginadmin')[_0x30d004(0x287)]('*')['eq']('username',_0x30d004(0x22e))[_0x30d004(0x1f1)](0x1)[_0x30d004(0x1e3)]();if(_0x190c72)return console[_0x30d004(0x1ea)]('Supabase\x20error\x20on\x20login\x20fetch:',_0x190c72),_0x479934[_0x30d004(0x257)](0x1f4)[_0x30d004(0x256)]({'success':![],'message':_0x30d004(0x200)});if(!_0x2dcb85)return _0x479934[_0x30d004(0x257)](0x191)[_0x30d004(0x256)]({'success':![],'message':'Invalid\x20credentials'});const _0x3c9b2c=String(_0x2dcb85['password_hash']||_0x2dcb85['password']||'')[_0x30d004(0x1ed)]();if(!_0x3c9b2c)return console[_0x30d004(0x1e4)](_0x30d004(0x230)),_0x479934['status'](0x1f4)['json']({'success':![],'message':_0x30d004(0x202)});const _0x1c96b6=await bcrypt[_0x30d004(0x25f)](String(_0x1091c2),_0x3c9b2c);if(!_0x1c96b6)return _0x479934[_0x30d004(0x257)](0x191)['json']({'success':![],'message':_0x30d004(0x20f)});const _0x2f2d7b=genToken(),_0x18e78b=Date['now']()+0x18*0x3c*0x3c*0x3e8;sessions[_0x30d004(0x26d)](_0x2f2d7b,{'user':_0x30d004(0x22e),'expiresAt':_0x18e78b});const _0x5bea36={'httpOnly':!![],'maxAge':0x18*0x3c*0x3c*0x3e8,'sameSite':_0x30d004(0x1d9),'secure':!![],'path':'/'};_0x479934[_0x30d004(0x253)](_0x30d004(0x1e6),_0x2f2d7b,_0x5bea36);try{await supabase['from'](_0x30d004(0x242))['update']({'last_login':new Date()})['eq'](_0x30d004(0x260),_0x30d004(0x22e));}catch(_0x4e13be){console['warn']('Could\x20not\x20write\x20last_login:',_0x4e13be);}return _0x479934[_0x30d004(0x256)]({'success':!![]});}catch(_0x1edb02){return console[_0x30d004(0x1e4)](_0x30d004(0x259),_0x1edb02&&_0x1edb02[_0x30d004(0x27d)]?_0x1edb02[_0x30d004(0x27d)]:_0x1edb02),_0x479934[_0x30d004(0x257)](0x1f4)[_0x30d004(0x256)]({'success':![],'message':_0x30d004(0x200)});}}),apps[a0_0x30f7ed(0x1d1)](a0_0x30f7ed(0x1dd),(_0xbfa306,_0x1eb0a6)=>{const _0xa6aea9=a0_0x30f7ed;try{const _0x164f5e=_0xbfa306[_0xa6aea9(0x1d8)]&&_0xbfa306[_0xa6aea9(0x1d8)][_0xa6aea9(0x1e6)];if(_0x164f5e)sessions[_0xa6aea9(0x211)](_0x164f5e);return _0x1eb0a6[_0xa6aea9(0x1d4)](_0xa6aea9(0x1e6),{'path':'/'}),_0x1eb0a6[_0xa6aea9(0x256)]({'success':!![]});}catch(_0x5d599a){return console[_0xa6aea9(0x1e4)]('ERR\x20/api/logout',_0x5d599a),_0x1eb0a6[_0xa6aea9(0x257)](0x1f4)[_0xa6aea9(0x256)]({'success':![],'message':_0xa6aea9(0x200)});}}),apps['get'](a0_0x30f7ed(0x1d5),requireAdmin,(_0x7b52b1,_0x3dfbfb)=>{const _0x4f147d=a0_0x30f7ed;_0x3dfbfb[_0x4f147d(0x256)]({'success':!![],'user':_0x7b52b1[_0x4f147d(0x1f3)]});});const escapeHtml=(_0x51f59b='')=>String(_0x51f59b)[a0_0x30f7ed(0x265)](/[&<>"']/g,_0x24c641=>({'&':a0_0x30f7ed(0x284),'<':a0_0x30f7ed(0x1ee),'>':'&gt;','\x22':a0_0x30f7ed(0x241),'\x27':a0_0x30f7ed(0x24b)}[_0x24c641]));apps[a0_0x30f7ed(0x26a)](a0_0x30f7ed(0x275),async(_0x4dbcbe,_0x3aad4c)=>{const _0xbafa17=a0_0x30f7ed;try{const _0x64cebf=path[_0xbafa17(0x25d)](__dirname,_0xbafa17(0x212),_0xbafa17(0x1eb));if(!fs[_0xbafa17(0x227)](_0x64cebf))return _0x3aad4c[_0xbafa17(0x257)](0x194)[_0xbafa17(0x1f9)](_0xbafa17(0x23b));let _0x44a1d3=fs[_0xbafa17(0x1fe)](_0x64cebf,_0xbafa17(0x1ca));const _0x26bdbb=_0x4dbcbe[_0xbafa17(0x278)]+_0xbafa17(0x209)+_0x4dbcbe[_0xbafa17(0x26a)](_0xbafa17(0x1e2));let _0x130211=_0xbafa17(0x27f),_0x4c32d2=_0xbafa17(0x22c),_0x369c9b=_0xbafa17(0x1ef);const _0xfd4cda=_0x4dbcbe[_0xbafa17(0x27c)]['id']||_0x4dbcbe['query'][_0xbafa17(0x26f)]||_0x4dbcbe[_0xbafa17(0x27c)][_0xbafa17(0x239)],_0xd32465=_0x4dbcbe[_0xbafa17(0x27c)][_0xbafa17(0x1f2)]||_0x4dbcbe[_0xbafa17(0x27c)][_0xbafa17(0x25a)];if(_0xfd4cda){const {data:_0x39acce,error:_0x171379}=await supabase['from'](_0xbafa17(0x1fd))[_0xbafa17(0x287)]('*')['eq']('id',_0xfd4cda)['single']();if(!_0x171379&&_0x39acce){const _0x52672b=Array[_0xbafa17(0x20c)](_0x39acce[_0xbafa17(0x22b)])?_0x39acce[_0xbafa17(0x22b)]:typeof _0x39acce['gambars']===_0xbafa17(0x243)?((()=>{const _0x84dadf=_0xbafa17;try{return JSON['parse'](_0x39acce[_0x84dadf(0x22b)]);}catch(_0x4e5db3){return[];}})()):[],_0x465ef6=_0x52672b&&_0x52672b[0x0]||_0x39acce[_0xbafa17(0x23c)];if(_0x465ef6)_0x130211=_0x465ef6['startsWith'](_0xbafa17(0x244))?_0x465ef6:_0x26bdbb+'/'+String(_0x465ef6)[_0xbafa17(0x265)](/^\//,'');_0x4c32d2=_0x39acce['nama']||_0x4c32d2,_0x369c9b=_0x39acce['deskripsi']||_0x369c9b;}}else{if(_0xd32465){const {data:_0x1ecb59,error:_0x253040}=await supabase['from'](_0xbafa17(0x1fd))[_0xbafa17(0x287)]('*')[_0xbafa17(0x1e7)](_0xbafa17(0x1f2),'%'+_0xd32465+'%')[_0xbafa17(0x1f1)](0x1);if(!_0x253040&&Array['isArray'](_0x1ecb59)&&_0x1ecb59[0x0]){const _0x20e3e0=_0x1ecb59[0x0],_0x1a3bfe=Array[_0xbafa17(0x20c)](_0x20e3e0[_0xbafa17(0x22b)])?_0x20e3e0['gambars']:[],_0x12972b=_0x1a3bfe&&_0x1a3bfe[0x0]||_0x20e3e0[_0xbafa17(0x23c)];if(_0x12972b)_0x130211=_0x12972b[_0xbafa17(0x221)]('http')?_0x12972b:_0x26bdbb+'/'+String(_0x12972b)['replace'](/^\//,'');_0x4c32d2=_0x20e3e0[_0xbafa17(0x1f2)]||_0x4c32d2,_0x369c9b=_0x20e3e0[_0xbafa17(0x24c)]||_0x369c9b;}}}const _0x30571b=(_0xf44d7a='')=>String(_0xf44d7a)['replace'](/[&<>"']/g,_0x2c5507=>({'&':_0xbafa17(0x284),'<':_0xbafa17(0x1ee),'>':_0xbafa17(0x22f),'\x22':_0xbafa17(0x241),'\x27':_0xbafa17(0x24b)}[_0x2c5507]));_0x44a1d3=_0x44a1d3['replace'](/<meta[^>]+(property=(?:'|")og:|name=(?:'|")twitter:)[^>]*>/gi,''),_0x44a1d3=_0x44a1d3[_0xbafa17(0x265)](/<link[^>]+rel=(?:'|")image_src(?:'|")[^>]*>/gi,''),_0x44a1d3=_0x44a1d3['replace'](/<meta[^>]+name=(?:'|")description(?:'|")[^>]*>/gi,''),_0x44a1d3=_0x44a1d3['replace'](/<title>[\s\S]*?<\/title>/i,'');const _0x47738b=_0x26bdbb+_0x4dbcbe['originalUrl'],_0x44d207='\x0a\x20\x20\x20\x20\x20\x20<title>'+_0x30571b(_0x4c32d2)+_0xbafa17(0x1cd)+_0x30571b(_0x369c9b)+_0xbafa17(0x1f8)+_0x30571b(_0x4c32d2)+_0xbafa17(0x1cb)+_0x30571b(_0x369c9b)+_0xbafa17(0x201)+_0x130211+_0xbafa17(0x1df)+_0x47738b+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<meta\x20name=\x22twitter:card\x22\x20content=\x22summary_large_image\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<meta\x20name=\x22twitter:title\x22\x20content=\x22'+_0x30571b(_0x4c32d2)+_0xbafa17(0x1e5)+_0x30571b(_0x369c9b)+_0xbafa17(0x250)+_0x130211+_0xbafa17(0x282)+_0x130211+_0xbafa17(0x24a);_0x44a1d3[_0xbafa17(0x1dc)](_0xbafa17(0x207))!==-0x1?_0x44a1d3=_0x44a1d3[_0xbafa17(0x265)](_0xbafa17(0x207),_0x44d207+_0xbafa17(0x231)):_0x44a1d3=_0x44d207+'\x0a'+_0x44a1d3,_0x3aad4c[_0xbafa17(0x26d)](_0xbafa17(0x1d7),'text/html;\x20charset=utf-8'),_0x3aad4c[_0xbafa17(0x1f9)](_0x44a1d3);}catch(_0x1c6851){console[_0xbafa17(0x1e4)](_0xbafa17(0x1d6),_0x1c6851),_0x3aad4c['sendFile'](path['join'](__dirname,_0xbafa17(0x212),_0xbafa17(0x1eb)));}}),apps[a0_0x30f7ed(0x26a)](a0_0x30f7ed(0x1f5),(_0x45ddba,_0x19b362)=>{const _0x47d076=a0_0x30f7ed;_0x19b362[_0x47d076(0x256)]({'ok':!![],'time':new Date()['toISOString']()});}),apps[a0_0x30f7ed(0x26a)]('/api/ranzirostore_akunml',async(_0x21d24f,_0x4aedb2)=>{const _0x17383d=a0_0x30f7ed;try{const {data:_0x57ab9c,error:_0x2b53d9}=await supabase[_0x17383d(0x254)](_0x17383d(0x1fd))[_0x17383d(0x287)]('*')[_0x17383d(0x272)]('id',{'ascending':![]});if(_0x2b53d9)throw _0x2b53d9;_0x4aedb2[_0x17383d(0x256)]({'success':!![],'data':_0x57ab9c});}catch(_0x3563e0){console[_0x17383d(0x1e4)](_0x3563e0),_0x4aedb2['status'](0x1f4)['json']({'success':![],'error':_0x3563e0['message']||_0x3563e0});}}),apps[a0_0x30f7ed(0x1d1)](a0_0x30f7ed(0x206),upload['array'](a0_0x30f7ed(0x23c),0xa),async(_0x487b4d,_0x4a2206)=>{const _0x4601c7=a0_0x30f7ed;try{const {nama:_0x32501a,harga:_0xa0e119,id_akun:_0xcd946d,deskripsi:_0x5a7b70,rank:_0x50889e,skin:_0x5bf3fd,hero:_0x566100,winrate:_0x440853,pertandingan:_0x500a09,magic_core:_0x2d295d,emblem:_0xfda26,pribadi_beli:_0x2a96ce,log:_0x37a831,bind:_0x3e963e}=_0x487b4d[_0x4601c7(0x224)],_0x189dcd=_0x487b4d['files']||[];if(!_0x32501a||!_0xa0e119||!_0xcd946d)return _0x4a2206[_0x4601c7(0x257)](0x190)[_0x4601c7(0x256)]({'success':![],'message':'nama,\x20harga,\x20id_akun\x20wajib\x20diisi'});const _0x2db36a=[];for(const _0x16d7d6 of _0x189dcd){const _0x3c9952=path['extname'](_0x16d7d6[_0x4601c7(0x25b)])||'',_0x29985b=_0x4601c7(0x236)+Date[_0x4601c7(0x223)]()+'_'+Math[_0x4601c7(0x249)]()['toString'](0x24)[_0x4601c7(0x210)](0x2)+_0x3c9952,_0x585f2f=await supabase[_0x4601c7(0x1f7)][_0x4601c7(0x254)](_0x4601c7(0x23c))[_0x4601c7(0x281)](_0x29985b,fs[_0x4601c7(0x24d)](_0x16d7d6[_0x4601c7(0x208)]),{'contentType':_0x16d7d6[_0x4601c7(0x1d0)],'duplex':_0x4601c7(0x24e)});try{fs['unlinkSync'](_0x16d7d6[_0x4601c7(0x208)]);}catch(_0x4ae1b2){}if(_0x585f2f[_0x4601c7(0x1e4)])throw _0x585f2f[_0x4601c7(0x1e4)];const {data:_0xad6f50}=supabase['storage'][_0x4601c7(0x254)](_0x4601c7(0x23c))['getPublicUrl'](_0x29985b);_0x2db36a[_0x4601c7(0x1d3)](_0xad6f50[_0x4601c7(0x252)]);}const _0x14c3b8=_0x2db36a[_0x4601c7(0x1f6)]?_0x2db36a[0x0]:null,_0x3420d7=_0x487b4d['body'][_0x4601c7(0x257)],_0x51aa1d=typeof _0x3420d7===_0x4601c7(0x243)?![_0x4601c7(0x220),_0x4601c7(0x204),'0']['includes'](_0x3420d7[_0x4601c7(0x22d)]()):Boolean(_0x3420d7),{data:_0x4404a5,error:_0x3715b0}=await supabase[_0x4601c7(0x254)](_0x4601c7(0x1fd))[_0x4601c7(0x280)]([{'nama':_0x32501a,'harga':_0xa0e119,'id_akun':_0xcd946d,'deskripsi':_0x5a7b70,'rank':_0x50889e,'skin':_0x5bf3fd?parseInt(_0x5bf3fd):null,'hero':_0x566100?parseInt(_0x566100):null,'winrate':_0x440853,'pertandingan':_0x500a09?parseInt(_0x500a09):null,'magic_core':_0x2d295d,'emblem':_0xfda26,'pribadi_beli':_0x2a96ce,'log':_0x37a831,'bind':_0x3e963e,'gambar':_0x14c3b8,'gambars':_0x2db36a,'status':_0x51aa1d}])[_0x4601c7(0x287)]();if(_0x3715b0)throw _0x3715b0;_0x4a2206[_0x4601c7(0x257)](0xc9)['json']({'success':!![],'data':_0x4404a5});}catch(_0x2b920c){console[_0x4601c7(0x1e4)](_0x4601c7(0x1f0),_0x2b920c),_0x4a2206[_0x4601c7(0x257)](0x1f4)[_0x4601c7(0x256)]({'success':![],'message':_0x2b920c['message']||_0x2b920c});}}),apps[a0_0x30f7ed(0x26a)]('/api/akun_detail/:id',async(_0x5933d1,_0x40700f)=>{const _0x2eb406=a0_0x30f7ed;try{const {id:_0x45353c}=_0x5933d1[_0x2eb406(0x271)],{data:_0x274c00,error:_0x518a4c}=await supabase[_0x2eb406(0x254)](_0x2eb406(0x1fd))[_0x2eb406(0x287)]('*')['eq']('id',_0x45353c)[_0x2eb406(0x228)]();if(_0x518a4c)throw _0x518a4c;_0x40700f[_0x2eb406(0x256)]({'success':!![],'data':_0x274c00});}catch(_0xedb04e){console[_0x2eb406(0x1e4)](_0xedb04e),_0x40700f[_0x2eb406(0x257)](0x1f4)[_0x2eb406(0x256)]({'success':![],'message':_0xedb04e[_0x2eb406(0x25e)]||_0xedb04e});}}),apps['post'](a0_0x30f7ed(0x1de),upload[a0_0x30f7ed(0x1ec)]('gambar',0xa),async(_0x3d8b09,_0x5f213b)=>{const _0x220f3b=a0_0x30f7ed;try{const {id:_0xaacd41}=_0x3d8b09[_0x220f3b(0x271)],_0x35c08f=_0x3d8b09['files']||[];if(!_0x35c08f[_0x220f3b(0x1f6)])return _0x5f213b[_0x220f3b(0x257)](0x190)[_0x220f3b(0x256)]({'success':![],'message':_0x220f3b(0x215)});const {data:_0xbc2256,error:_0x1bc747}=await supabase[_0x220f3b(0x254)]('ranzirostore_akunml')[_0x220f3b(0x287)](_0x220f3b(0x22b))['eq']('id',_0xaacd41)['single']();if(_0x1bc747)throw _0x1bc747;const _0x4a5481=Array[_0x220f3b(0x20c)](_0xbc2256['gambars'])?_0xbc2256[_0x220f3b(0x22b)]:[],_0x3dbdaa=[];for(const _0x43c86a of _0x35c08f){const _0x13b96e=path[_0x220f3b(0x273)](_0x43c86a[_0x220f3b(0x25b)])||'',_0x2c6683=_0x220f3b(0x236)+Date[_0x220f3b(0x223)]()+'_'+Math[_0x220f3b(0x249)]()['toString'](0x24)['slice'](0x2)+_0x13b96e,_0x1aa839=await supabase['storage'][_0x220f3b(0x254)](_0x220f3b(0x23c))['upload'](_0x2c6683,fs[_0x220f3b(0x24d)](_0x43c86a[_0x220f3b(0x208)]),{'contentType':_0x43c86a[_0x220f3b(0x1d0)],'duplex':'half'});try{fs[_0x220f3b(0x1fa)](_0x43c86a[_0x220f3b(0x208)]);}catch(_0x1513dc){}if(_0x1aa839['error'])throw _0x1aa839['error'];const {data:_0x456c6b}=supabase[_0x220f3b(0x1f7)][_0x220f3b(0x254)]('gambar')['getPublicUrl'](_0x2c6683);_0x3dbdaa['push'](_0x456c6b['publicUrl']);}const _0xc774f5=_0x4a5481['concat'](_0x3dbdaa),_0x53ad41=_0xc774f5[_0x220f3b(0x1f6)]?_0xc774f5[0x0]:null,{data:_0x4799fc,error:_0x24f616}=await supabase[_0x220f3b(0x254)]('ranzirostore_akunml')[_0x220f3b(0x1da)]({'gambars':_0xc774f5,'gambar':_0x53ad41,'updated_at':new Date()})['eq']('id',_0xaacd41)[_0x220f3b(0x287)]();if(_0x24f616)throw _0x24f616;_0x5f213b[_0x220f3b(0x256)]({'success':!![],'data':_0x4799fc});}catch(_0x143467){console[_0x220f3b(0x1e4)](_0x143467),_0x5f213b[_0x220f3b(0x257)](0x1f4)[_0x220f3b(0x256)]({'success':![],'message':_0x143467[_0x220f3b(0x25e)]||_0x143467});}}),apps[a0_0x30f7ed(0x211)](a0_0x30f7ed(0x1fc),async(_0x17e5a4,_0x34d45c)=>{const _0x3e2459=a0_0x30f7ed;try{const {id:_0x7eda3c,url:_0x31dbc5}=_0x17e5a4[_0x3e2459(0x224)];if(!_0x7eda3c||!_0x31dbc5)return _0x34d45c[_0x3e2459(0x257)](0x190)['json']({'success':![],'message':'id\x20dan\x20url\x20diperlukan'});const {data:_0x31a7d0,error:_0x4cc352}=await supabase[_0x3e2459(0x254)](_0x3e2459(0x1fd))[_0x3e2459(0x287)](_0x3e2459(0x22b))['eq']('id',_0x7eda3c)[_0x3e2459(0x228)]();if(_0x4cc352)throw _0x4cc352;const _0x55d890=Array[_0x3e2459(0x20c)](_0x31a7d0['gambars'])?_0x31a7d0['gambars']:[],_0x1b1f6f=_0x31dbc5[_0x3e2459(0x222)]('/')[_0x3e2459(0x261)](),{error:_0x91fc4f}=await supabase[_0x3e2459(0x1f7)]['from'](_0x3e2459(0x23c))[_0x3e2459(0x266)]([_0x1b1f6f]);_0x91fc4f&&console[_0x3e2459(0x1ea)](_0x3e2459(0x26e),_0x91fc4f[_0x3e2459(0x25e)]||_0x91fc4f);const _0x52ede4=_0x55d890['filter'](_0x310e70=>_0x310e70!==_0x31dbc5),_0x499231=_0x52ede4[_0x3e2459(0x1f6)]?_0x52ede4[0x0]:null,{data:_0x417de9,error:_0x127cf1}=await supabase['from']('ranzirostore_akunml')[_0x3e2459(0x1da)]({'gambars':_0x52ede4,'gambar':_0x499231,'updated_at':new Date()})['eq']('id',_0x7eda3c)['select']();if(_0x127cf1)throw _0x127cf1;_0x34d45c[_0x3e2459(0x256)]({'success':!![],'data':_0x417de9});}catch(_0x40927f){console[_0x3e2459(0x1e4)](_0x40927f),_0x34d45c[_0x3e2459(0x257)](0x1f4)['json']({'success':![],'message':_0x40927f[_0x3e2459(0x25e)]||_0x40927f});}}),apps[a0_0x30f7ed(0x211)](a0_0x30f7ed(0x247),async(_0x345665,_0x3f0d0d)=>{const _0x4be144=a0_0x30f7ed;try{const {id:_0x19e13b}=_0x345665['params'],{data:_0x51135b,error:_0x3d676b}=await supabase['from'](_0x4be144(0x1fd))[_0x4be144(0x287)]('gambars')['eq']('id',_0x19e13b)[_0x4be144(0x228)]();if(_0x3d676b)throw _0x3d676b;const _0x5e226a=Array[_0x4be144(0x20c)](_0x51135b['gambars'])?_0x51135b[_0x4be144(0x22b)]:[],_0x324c57=_0x5e226a[_0x4be144(0x21f)](_0x285b91=>_0x285b91[_0x4be144(0x222)]('/')['pop']())[_0x4be144(0x25c)](Boolean);if(_0x324c57[_0x4be144(0x1f6)]){const {error:_0x5c68ab}=await supabase[_0x4be144(0x1f7)][_0x4be144(0x254)](_0x4be144(0x23c))[_0x4be144(0x266)](_0x324c57);if(_0x5c68ab)throw _0x5c68ab;}const {data:_0x5bf280,error:_0x5d5b9c}=await supabase[_0x4be144(0x254)](_0x4be144(0x1fd))['update']({'gambars':[],'gambar':null,'updated_at':new Date()})['eq']('id',_0x19e13b)[_0x4be144(0x287)]();if(_0x5d5b9c)throw _0x5d5b9c;_0x3f0d0d[_0x4be144(0x256)]({'success':!![],'data':_0x5bf280});}catch(_0xab417b){console[_0x4be144(0x1e4)](_0xab417b),_0x3f0d0d[_0x4be144(0x257)](0x1f4)[_0x4be144(0x256)]({'success':![],'message':_0xab417b[_0x4be144(0x25e)]||_0xab417b});}}),apps[a0_0x30f7ed(0x240)](a0_0x30f7ed(0x234),async(_0x4c0e12,_0x150fab)=>{const _0x5df41d=a0_0x30f7ed;try{const {id:_0x3c6102}=_0x4c0e12[_0x5df41d(0x271)],{order:_0x5f4676}=_0x4c0e12[_0x5df41d(0x224)];if(!Array[_0x5df41d(0x20c)](_0x5f4676))return _0x150fab[_0x5df41d(0x257)](0x190)[_0x5df41d(0x256)]({'success':![],'message':_0x5df41d(0x1f4)});const _0x2dffa3=_0x5f4676[_0x5df41d(0x1f6)]?_0x5f4676[0x0]:null,{data:_0x3543d9,error:_0x5b7a39}=await supabase['from']('ranzirostore_akunml')[_0x5df41d(0x1da)]({'gambars':_0x5f4676,'gambar':_0x2dffa3,'updated_at':new Date()})['eq']('id',_0x3c6102)[_0x5df41d(0x287)]();if(_0x5b7a39)throw _0x5b7a39;_0x150fab[_0x5df41d(0x256)]({'success':!![],'data':_0x3543d9});}catch(_0x43f619){console[_0x5df41d(0x1e4)](_0x43f619),_0x150fab[_0x5df41d(0x257)](0x1f4)[_0x5df41d(0x256)]({'success':![],'message':_0x43f619[_0x5df41d(0x25e)]||_0x43f619});}}),apps['put'](a0_0x30f7ed(0x246),async(_0x349d4c,_0x4af22c)=>{const _0xd36433=a0_0x30f7ed;try{const {id:_0x1f5a65}=_0x349d4c[_0xd36433(0x271)],_0x1f371b=_0x349d4c['body']||{};_0x1f371b[_0xd36433(0x257)]!==undefined&&(typeof _0x1f371b['status']===_0xd36433(0x243)?_0x1f371b[_0xd36433(0x257)]=![_0xd36433(0x220),'false','0']['includes'](_0x1f371b[_0xd36433(0x257)][_0xd36433(0x22d)]()):_0x1f371b[_0xd36433(0x257)]=Boolean(_0x1f371b['status']));delete _0x1f371b['id'];const {data:_0x47f993,error:_0x4d2e0f}=await supabase['from'](_0xd36433(0x1fd))['update']({..._0x1f371b,'updated_at':new Date()})['eq']('id',_0x1f5a65)['select']();if(_0x4d2e0f)throw _0x4d2e0f;_0x4af22c[_0xd36433(0x256)]({'success':!![],'data':_0x47f993});}catch(_0x36153c){console[_0xd36433(0x1e4)](_0x36153c),_0x4af22c[_0xd36433(0x257)](0x1f4)['json']({'success':![],'message':_0x36153c[_0xd36433(0x25e)]||_0x36153c});}}),apps[a0_0x30f7ed(0x211)]('/api/del_ranzirostore_akunml/:id',async(_0x3daf1b,_0x4f2d9a)=>{const _0x1f6fee=a0_0x30f7ed;try{const {id:_0x237d28}=_0x3daf1b[_0x1f6fee(0x271)],{data:_0x3a5b1a,error:_0x5451a3}=await supabase[_0x1f6fee(0x254)](_0x1f6fee(0x1fd))['select'](_0x1f6fee(0x22b))['eq']('id',_0x237d28)['single']();if(_0x5451a3)throw _0x5451a3;const _0x503898=(_0x3a5b1a[_0x1f6fee(0x22b)]||[])[_0x1f6fee(0x21f)](_0x196a0e=>_0x196a0e[_0x1f6fee(0x222)]('/')[_0x1f6fee(0x261)]())[_0x1f6fee(0x25c)](Boolean);if(_0x503898[_0x1f6fee(0x1f6)]){const {error:_0x5a6dbf}=await supabase['storage'][_0x1f6fee(0x254)](_0x1f6fee(0x23c))['remove'](_0x503898);if(_0x5a6dbf)throw _0x5a6dbf;}const {data:_0x1b6df1,error:_0x205046}=await supabase[_0x1f6fee(0x254)](_0x1f6fee(0x1fd))['delete']()['eq']('id',_0x237d28);if(_0x205046)throw _0x205046;_0x4f2d9a[_0x1f6fee(0x256)]({'success':!![],'data':_0x1b6df1});}catch(_0x3867ae){console[_0x1f6fee(0x1e4)](_0x3867ae),_0x4f2d9a[_0x1f6fee(0x257)](0x1f4)[_0x1f6fee(0x256)]({'success':![],'message':_0x3867ae[_0x1f6fee(0x25e)]||_0x3867ae});}}),apps[a0_0x30f7ed(0x26d)](a0_0x30f7ed(0x28b),0x1);const spaRoutes={'/id-id':'index.html','/id-id/*':a0_0x30f7ed(0x1e1),'/login':'login.html','/admin':a0_0x30f7ed(0x23e),'/akun':a0_0x30f7ed(0x1eb),'/akun/*':a0_0x30f7ed(0x1eb)};function sendPublicFile(_0x4656cb,_0x468a6f){const _0x6d9aeb=a0_0x30f7ed,_0x20507f=path[_0x6d9aeb(0x25d)](__dirname,_0x6d9aeb(0x212),_0x468a6f);return fs[_0x6d9aeb(0x227)](_0x20507f)?_0x4656cb['sendFile'](_0x20507f):_0x4656cb[_0x6d9aeb(0x257)](0x194)[_0x6d9aeb(0x1f9)]('Not\x20found');}Object[a0_0x30f7ed(0x274)](spaRoutes)[a0_0x30f7ed(0x21c)](_0x49dee5=>{const _0x21b097=a0_0x30f7ed;apps[_0x21b097(0x26a)](_0x49dee5,(_0x2c8d63,_0x5ba89f)=>{const _0x1ede1f=_0x21b097;return _0x5ba89f['set'](_0x1ede1f(0x232),_0x1ede1f(0x255)),sendPublicFile(_0x5ba89f,spaRoutes[_0x49dee5]);});});const port=process[a0_0x30f7ed(0x1d2)][a0_0x30f7ed(0x21b)]||0x849;apps['listen'](port,()=>{const _0x2feb32=a0_0x30f7ed;console['log'](_0x2feb32(0x270)+port);});