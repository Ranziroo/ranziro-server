const a0_0x38d0f1=a0_0x1a23;(function(_0x5ee727,_0x103d3a){const _0x45ace6=a0_0x1a23,_0x296905=_0x5ee727();while(!![]){try{const _0x12c86a=parseInt(_0x45ace6(0x138))/0x1*(parseInt(_0x45ace6(0x132))/0x2)+parseInt(_0x45ace6(0xd0))/0x3*(parseInt(_0x45ace6(0x14b))/0x4)+parseInt(_0x45ace6(0x124))/0x5*(parseInt(_0x45ace6(0x179))/0x6)+-parseInt(_0x45ace6(0x133))/0x7*(parseInt(_0x45ace6(0x112))/0x8)+-parseInt(_0x45ace6(0x11f))/0x9*(-parseInt(_0x45ace6(0xf9))/0xa)+parseInt(_0x45ace6(0xeb))/0xb*(-parseInt(_0x45ace6(0x12d))/0xc)+parseInt(_0x45ace6(0xff))/0xd*(-parseInt(_0x45ace6(0xd6))/0xe);if(_0x12c86a===_0x103d3a)break;else _0x296905['push'](_0x296905['shift']());}catch(_0x29d66c){_0x296905['push'](_0x296905['shift']());}}}(a0_0x4d7c,0x6fd16));const a0_0x5b40aa=(function(){let _0x5bcd48=!![];return function(_0x2c7f37,_0x2a5138){const _0x3f1c89=_0x5bcd48?function(){const _0x15bb50=a0_0x1a23;if(_0x2a5138){const _0x13843e=_0x2a5138[_0x15bb50(0x17e)](_0x2c7f37,arguments);return _0x2a5138=null,_0x13843e;}}:function(){};return _0x5bcd48=![],_0x3f1c89;};}()),a0_0x15977d=a0_0x5b40aa(this,function(){const _0x3c865d=a0_0x1a23;return a0_0x15977d[_0x3c865d(0x13b)]()[_0x3c865d(0xda)](_0x3c865d(0x130))[_0x3c865d(0x13b)]()[_0x3c865d(0x11e)](a0_0x15977d)['search'](_0x3c865d(0x130));});function a0_0x1a23(_0x5ee62f,_0x15e45a){const _0x40aaab=a0_0x4d7c();return a0_0x1a23=function(_0x2baec3,_0x45330f){_0x2baec3=_0x2baec3-0xc5;let _0x3b7e23=_0x40aaab[_0x2baec3];if(a0_0x1a23['jSAjxI']===undefined){var _0xde995e=function(_0x1a23e1){const _0xbf4e6a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x19b229='',_0x4db51a='',_0xce0f75=_0x19b229+_0xde995e;for(let _0xf5c4be=0x0,_0x46bb0d,_0x5bcd48,_0x2c7f37=0x0;_0x5bcd48=_0x1a23e1['charAt'](_0x2c7f37++);~_0x5bcd48&&(_0x46bb0d=_0xf5c4be%0x4?_0x46bb0d*0x40+_0x5bcd48:_0x5bcd48,_0xf5c4be++%0x4)?_0x19b229+=_0xce0f75['charCodeAt'](_0x2c7f37+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x46bb0d>>(-0x2*_0xf5c4be&0x6)):_0xf5c4be:0x0){_0x5bcd48=_0xbf4e6a['indexOf'](_0x5bcd48);}for(let _0x2a5138=0x0,_0x3f1c89=_0x19b229['length'];_0x2a5138<_0x3f1c89;_0x2a5138++){_0x4db51a+='%'+('00'+_0x19b229['charCodeAt'](_0x2a5138)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4db51a);};a0_0x1a23['FIRXhF']=_0xde995e,_0x5ee62f=arguments,a0_0x1a23['jSAjxI']=!![];}const _0x15977d=_0x40aaab[0x0],_0x5b40aa=_0x2baec3+_0x15977d,_0x4d7c25=_0x5ee62f[_0x5b40aa];if(!_0x4d7c25){const _0x13843e=function(_0x3f6cd4){this['Gcggof']=_0x3f6cd4,this['MQdHml']=[0x1,0x0,0x0],this['SRGILs']=function(){return'newState';},this['uSOEMb']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['NxZNKH']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x13843e['prototype']['kDjdXY']=function(){const _0x4ddc90=new RegExp(this['uSOEMb']+this['NxZNKH']),_0x1485f1=_0x4ddc90['test'](this['SRGILs']['toString']())?--this['MQdHml'][0x1]:--this['MQdHml'][0x0];return this['LBqQoj'](_0x1485f1);},_0x13843e['prototype']['LBqQoj']=function(_0x3f434d){if(!Boolean(~_0x3f434d))return _0x3f434d;return this['ZegRqE'](this['Gcggof']);},_0x13843e['prototype']['ZegRqE']=function(_0x4d2da9){for(let _0x310b86=0x0,_0x10b5fb=this['MQdHml']['length'];_0x310b86<_0x10b5fb;_0x310b86++){this['MQdHml']['push'](Math['round'](Math['random']())),_0x10b5fb=this['MQdHml']['length'];}return _0x4d2da9(this['MQdHml'][0x0]);},new _0x13843e(a0_0x1a23)['kDjdXY'](),_0x3b7e23=a0_0x1a23['FIRXhF'](_0x3b7e23),_0x5ee62f[_0x5b40aa]=_0x3b7e23;}else _0x3b7e23=_0x4d7c25;return _0x3b7e23;},a0_0x1a23(_0x5ee62f,_0x15e45a);}a0_0x15977d();const a0_0x45330f=(function(){let _0x3f6cd4=!![];return function(_0x4ddc90,_0x1485f1){const _0x3f434d=_0x3f6cd4?function(){const _0x312a54=a0_0x1a23;if(_0x1485f1){const _0x4d2da9=_0x1485f1[_0x312a54(0x17e)](_0x4ddc90,arguments);return _0x1485f1=null,_0x4d2da9;}}:function(){};return _0x3f6cd4=![],_0x3f434d;};}()),a0_0x2baec3=a0_0x45330f(this,function(){const _0x9019a3=a0_0x1a23;let _0x310b86;try{const _0x5d1235=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x310b86=_0x5d1235();}catch(_0x3bc7cd){_0x310b86=window;}const _0x10b5fb=_0x310b86[_0x9019a3(0xe9)]=_0x310b86[_0x9019a3(0xe9)]||{},_0x9506f4=[_0x9019a3(0x18d),_0x9019a3(0xf1),'info',_0x9019a3(0x106),_0x9019a3(0x13a),'table',_0x9019a3(0x17a)];for(let _0x2a2db2=0x0;_0x2a2db2<_0x9506f4[_0x9019a3(0xfc)];_0x2a2db2++){const _0x5bd411=a0_0x45330f[_0x9019a3(0x11e)][_0x9019a3(0x184)][_0x9019a3(0x18e)](a0_0x45330f),_0x34a23a=_0x9506f4[_0x2a2db2],_0x4af836=_0x10b5fb[_0x34a23a]||_0x5bd411;_0x5bd411['__proto__']=a0_0x45330f[_0x9019a3(0x18e)](a0_0x45330f),_0x5bd411[_0x9019a3(0x13b)]=_0x4af836['toString'][_0x9019a3(0x18e)](_0x4af836),_0x10b5fb[_0x34a23a]=_0x5bd411;}});a0_0x2baec3(),require(a0_0x38d0f1(0x17f))[a0_0x38d0f1(0x111)]();const express=require('express'),apps=express(),{createClient}=require(a0_0x38d0f1(0xf4)),crypto=require('crypto'),cors=require(a0_0x38d0f1(0xd7)),path=require(a0_0x38d0f1(0x173)),bodyParser=require(a0_0x38d0f1(0xe5)),multer=require('multer'),fs=require('fs'),cookieParser=require('cookie-parser'),bcrypt=require('bcrypt');apps[a0_0x38d0f1(0x18c)](a0_0x38d0f1(0x185),0x1);const uploadsDir=path[a0_0x38d0f1(0x16a)](__dirname,a0_0x38d0f1(0x140));!fs[a0_0x38d0f1(0xdc)](uploadsDir)&&fs[a0_0x38d0f1(0x178)](uploadsDir,{'recursive':!![]});const upload=multer({'dest':uploadsDir}),envOrigins=(process['env'][a0_0x38d0f1(0x154)]||'')['split'](',')[a0_0x38d0f1(0x15f)](_0x1a02fd=>_0x1a02fd[a0_0x38d0f1(0x183)]())[a0_0x38d0f1(0x189)](Boolean),allowedOrigins=[...envOrigins,a0_0x38d0f1(0x11d),'https://ranzirostore.vercel.app',a0_0x38d0f1(0x119),'http://localhost:3000'][a0_0x38d0f1(0x189)]((_0x1da6e8,_0x32b7d9,_0x33b2d0)=>_0x33b2d0[a0_0x38d0f1(0x14d)](_0x1da6e8)===_0x32b7d9);apps[a0_0x38d0f1(0xd3)](cors({'origin':function(_0x2b5abe,_0x377146){const _0x22047b=a0_0x38d0f1;if(!_0x2b5abe)return _0x377146(null,!![]);if(allowedOrigins[_0x22047b(0x114)](_0x2b5abe))return _0x377146(null,!![]);return _0x377146(new Error('Not\x20allowed\x20by\x20CORS:\x20'+_0x2b5abe));},'credentials':!![]})),apps[a0_0x38d0f1(0xd3)]((_0x5d9cfd,_0x14a3e5,_0x5b2ed1)=>{const _0x4cea7a=a0_0x38d0f1;_0x14a3e5[_0x4cea7a(0x18c)](_0x4cea7a(0x187),_0x4cea7a(0x11a)),_0x5b2ed1();}),apps['use'](bodyParser['json']({'limit':'10mb'})),apps[a0_0x38d0f1(0xd3)](bodyParser[a0_0x38d0f1(0x169)]({'extended':!![],'limit':a0_0x38d0f1(0x107)})),apps['use'](cookieParser());(!process[a0_0x38d0f1(0x10c)]['SUPABASE_URL']||!process[a0_0x38d0f1(0x10c)][a0_0x38d0f1(0x17b)])&&console[a0_0x38d0f1(0xf1)](a0_0x38d0f1(0x147));const supabase=createClient(process[a0_0x38d0f1(0x10c)][a0_0x38d0f1(0xed)]||'',process[a0_0x38d0f1(0x10c)][a0_0x38d0f1(0x17b)]||''),pages=[{'path':a0_0x38d0f1(0x156),'file':a0_0x38d0f1(0x16d)},{'path':a0_0x38d0f1(0x18a),'file':a0_0x38d0f1(0x158)},{'path':a0_0x38d0f1(0x165),'file':a0_0x38d0f1(0xf2)},{'path':a0_0x38d0f1(0xe2),'file':a0_0x38d0f1(0x135)}];pages[a0_0x38d0f1(0x148)](_0x3eeff1=>{const _0x45ceb5=a0_0x38d0f1;if(_0x3eeff1[_0x45ceb5(0x173)]===_0x45ceb5(0x18a))return;apps['get'](_0x3eeff1[_0x45ceb5(0x173)],(_0x1f9dfa,_0xcbe269)=>{const _0xa0fec6=_0x45ceb5;try{const _0xc0e97c=path[_0xa0fec6(0x16a)](__dirname,_0xa0fec6(0x168),_0x3eeff1[_0xa0fec6(0xc8)]);if(fs[_0xa0fec6(0xdc)](_0xc0e97c))return _0xcbe269[_0xa0fec6(0x117)](_0xc0e97c);return _0xcbe269[_0xa0fec6(0x166)](0x194)['send'](_0xa0fec6(0x105));}catch(_0x7fe826){return console[_0xa0fec6(0x106)](_0xa0fec6(0x109)+_0x3eeff1[_0xa0fec6(0x173)]+_0xa0fec6(0x122)+_0x3eeff1[_0xa0fec6(0xc8)]+':',_0x7fe826&&_0x7fe826[_0xa0fec6(0xd9)]?_0x7fe826['stack']:_0x7fe826),_0xcbe269[_0xa0fec6(0x166)](0x1f4)[_0xa0fec6(0xe8)](_0xa0fec6(0x10d));}});}),apps['use'](express[a0_0x38d0f1(0x131)](path[a0_0x38d0f1(0x16a)](__dirname,'public')));function a0_0x4d7c(){const _0xef53e3=['Bg9N','yMLUza','Dw5SAw5Ru3LUyW','CMfUEMLYB3n0B3jLx2fRDw5TBa','vgLKywSGywrHigzPBgu','C2vJDxjL','zMLSzq','yxjYyxK','Chv0','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMrLC2nYAxb0Aw9UiIbJB250zw50psi','u2vYDMvYig1PC2nVBMzPz3vYzwq','zw5ZDxjLqwrTAw5fEgLZDhmGzxjYB3i6','C2XPy2u','ue9tvcaVyxbPl3bVC3rFywT1BL9KzxrHAwWGlt4','mtmXmZiYA2nMuwT5','4PYfiefKBwLUihvZzxiGy3jLyxrLzcbPBIbYyw56AxjVC3rVCMvFBg9NAw5Hzg1PBIaOCgfZC3DVCMqGAgfZAcbZDg9YzwqPlG','C2LUz2XL','DxnL','Dg9mB3DLCKnHC2u','C3rVCMfNzq','mtyZmZK0v3nJwuDZ','y29YCW','zw50CMLLCW','C3rHy2S','C2vHCMnO','yM9KEq','zxHPC3rZu3LUyW','C3bSAxq','ANnVBG','zxH0BMfTzq','tM90igzVDw5K','BMfTysWGAgfYz2eSigLKx2fRDw4GD2fQAwiGzgLPC2K','l2XVz2LU','l2fWAs9KzwXFAw1Hz2u','ChvZAa','yM9KEs1WyxjZzxi','C2vSzwn0','u2vZC2LVBIbJBgvHBNvWigvYCM9Y','C2vUza','y29UC29Szq','CMvWBgfJzq','nJu5nJmZn1vRv2fQyW','zMfSC2u','u1vqqujbu0vFvvjm','l2fWAs9KzwXFAw1Hz2vZlZPPza','ywrTAw5FC2vZC2LVBG','CgfZC3DVCMrFAgfZAa','D2fYBG','ywrTAw4UAhrTBa','l2fWAs91CgrFCMfUEMLYB3n0B3jLx2fRDw5TBc86Awq','qhn1CgfIyxnLl3n1CgfIyxnLlwPZ','l2fWAs9Yyw56AxjVC3rVCMvFywT1BM1S','tM90igf1DgHVCML6zwq','zgvSzxrL','zgf0yq','ntuWmZbrwNLgtKW','l2fWAs9SB2DVDxq','BgLTAxq','BgvUz3rO','DxbKyxrL','BM9Uzq','nJyZqKPrELn5','CMvTB3zL','ChjVzhvJDgLVBG','BwvZC2fNzq','pc9OzwfKpG','z2fTyMfY','rMLSzsbUB3qGzM91BMq','zxjYB3i','mtbTyG','B3jKzxi','rxjYB3iGC2vYDMLUzYa','CxvLCNK','l2fWAs9HA3vUx2rLDgfPBc86Awq','zw52','sw50zxjUywWGu2vYDMvYievYCM9Y','CMfUzg9T','DxrMoa','DxnLCG','y29UzMLN','mJC3mJG4A29oC0jT','qurnsu5FufC','Aw5JBhvKzxm','BwLTzxr5Cgu','sw50zxjUywWGzxjYB3i','C2vUzezPBgu','B3jKzxiGAgfYDxmGyxjYyxKGvvjm','Ahr0CdOVl2XVy2fSAg9ZDdOYmtiX','BM8TC3rVCMu','AwqGzgfUihvYBcbKAxbLCMX1A2fU','l2fWAs9JAgvJAY1ZzxnZAw9U','Ahr0Chm6lY9Yyw56AxjVlxnLCNzLCI1WCM9KDwn0Aw9UlNvWlNjHAwX3yxKUyxbW','y29UC3rYDwn0B3i','ntu4B2HWtNfm','zxHWAxjLC0f0','l2fWAs9Yzw9YzgvYx2LTywDLCY86Awq','ic0+ia','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6DxjSiIbJB250zw50psi','oda1Du9JBNbT','4PQG77IpiefetuLox1bxig5VDcbZzxqGAw4Gzw52lIbtA2LWCgLUzYbJCMvHDgLUzYbHzg1PBIb1C2vYlIbtzxqGqurnsu5FufCGDg8Gyxv0BY1JCMvHDguGywrTAw4GyxqGC3rHCNr1Cc4','z2fTyMfYCW','DxnLCM5HBwu','AgfZAa','l2HLywX0Aa','CgfYyw1Z','CMfUEMLYB3n0B3jLx2XVz2LUywrTAw4','zNjVBq','mtjVAvP6ywW','rMfPBgvKihrVignYzwf0zsbHzg1PBIbPBIbYyw56AxjVC3rVCMvFBg9NAw5Hzg1PBJO','l2fWAs9KzwXFCMfUEMLYB3n0B3jLx2fRDw5TBc86Awq','kcGOlISPkYKRksSK','C3rHDgLJ','mtG4ndu0uLH3zKPX','ndLTBvvcAMm','AgfSzG','Bg9NAw4UAhrTBa','y29Uy2f0','l2fWAs91CgXVywrFAw1Hz2vZlZPPza','nhHpzLDguG','jImZotS','zxHJzxb0Aw9U','Dg9tDhjPBMC','y29VA2LL','BMfTzq','q29UDgvUDc1uExbL','C3rHCNrZv2L0Aa','DxbSB2fKCW','z2v0','Ahr0Chm6lY9SENLJCML3CxjJCwjPAwP0AwLWys5ZDxbHyMfZzs5JBY9ZDg9YywDLl3yXl29IAMvJDc9WDwjSAwmVz2fTyMfYl2XVz28VBwv0yv9Yyw56AxjVlNDLyNa','tK9erv9ftLy','sw52ywXPzcbJCMvKzw50AwfSCW','Dgv4Dc9ODg1SoYbJAgfYC2v0pxv0zI04','4Os577IpiefKBwLUihvZzxiGywXYzwfKEsbLEgLZDhmGAw4GCMfUEMLYB3n0B3jLx2XVz2LUywrTAw4U','4PQG77Ipifnvuefcqvnfx1vstcbHDgf1ifnvuefcqvnfx0Tfwsb0AwrHAYbKAxrLBxvRyw4GzgKGlMvUDI4GugfZDgLRyw4GDMfYAwfIzwWGzw52igrPC2v0igPPA2eGBwvUz2D1BMfRyw4Gu3vWywjHC2uU','zM9YrwfJAa','l2fWAs9SB2DPBG','B3jPz2LUywXvCMW','nJrxBfL2vxa','zMLSzxm','Aw5KzxHpzG','ywrTAw4','jMD0oW','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6zgvZy3jPChrPB24IignVBNrLBNq9iG','zgvZA3jPChnP','ChvIBgLJvxjS','Agv4','rLjptLrftKrFt1jjr0LouW','C3rYAw5N','l21S','CgfYC2u','ywT1BL9TBc5ODg1S','q291BgqGBM90ihDYAxrLigXHC3rFBg9NAw46','Dg9ju09tDhjPBMC','Aw5Zzxj0','DxnLCM5HBwuGjIbWyxnZD29YzcbYzxf1AxjLza','C29Sza','jMX0oW','BwfW','z2v0uhvIBgLJvxjS','uMfUEMLYBYbtDg9YzsaTierLDgfPBcbbA3vU','rgv0ywLSigfRDw4Gtw9IAwXLieXLz2vUzhmGzgKGuMfUEMLYBYbtDg9Yzq','rvjsic9HCgKVBg9NB3v0','iIaVpGOGicaG','l2fKBwLU','C3rHDhvZ','y2f0y2G','ChvIBgLJ','DxjSzw5JB2rLza','AM9PBG','Cg9ZDa','u2vZC2LVBIbLEhbPCMvK','Aw5KzxGUAhrTBa','jMfTCdS','Cg9W','B3jPz2LUywXUyw1L','Ag9ZDa','rvjsic9HA3vUig1LDgeGAw5Qzwn0','Cgf0Aa','cIaGicaGidXTzxrHihbYB3bLCNr5psjVzZP0ExbLiIbJB250zw50psj3zwjZAxrLiIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6DgL0BguIignVBNrLBNq9iG','jNf1B3q7','AxnbCNjHEq','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMnHCMqIignVBNrLBNq9iNn1Bw1HCNLFBgfYz2vFAw1Hz2uIic8+cIaGicaGidXTzxrHig5HBwu9iNr3Axr0zxi6DgL0BguIignVBNrLBNq9iG','BwTKAxjtEw5J','mtC3nZHRA1jYCgO','DhjHy2u','u1vqqujbu0vFs0vz','u3vWywjHC2uGzxjYB3iGB24GBg9NAw4GzMv0y2G6','y3jLyxrLuMvHzfn0CMvHBq','yxbWBhK','zg90zw52','BMfTyq','y29VA2LLCW','y2XLyxjdB29RAwu','DhjPBq','ChjVDg90ExbL','Dhj1C3qGChjVEhK','AwrFywT1BG','q2fJAguTq29UDhjVBa','BM93','zMLSDgvY','l2fRDw4','ywT1BL8','C2v0'];a0_0x4d7c=function(){return _0xef53e3;};return a0_0x4d7c();}const sessions=new Map();function genToken(){const _0x1eab9e=a0_0x38d0f1;return crypto['randomBytes'](0x20)['toString'](_0x1eab9e(0x153));}setInterval(()=>{const _0x4f8a87=a0_0x38d0f1;try{const _0x2920b9=Date[_0x4f8a87(0x188)]();for(const [_0x140891,_0x22fa8a]of sessions[_0x4f8a87(0xd8)]()){if(!_0x22fa8a||_0x22fa8a[_0x4f8a87(0x120)]<=_0x2920b9)sessions[_0x4f8a87(0xf7)](_0x140891);}}catch(_0x3f96ed){console[_0x4f8a87(0xf1)](_0x4f8a87(0xe7),_0x3f96ed);}},0x1e*0x3c*0x3e8);function requireAdmin(_0xbe9222,_0x205237,_0x26efec){const _0x330b13=a0_0x38d0f1;try{const _0x11ea81=_0xbe9222[_0x330b13(0x181)]&&_0xbe9222[_0x330b13(0x181)]['admin_session'];if(!_0x11ea81)return _0x205237[_0x330b13(0x166)](0x191)['json']({'success':![],'message':_0x330b13(0xf6)});const _0x3edb6f=sessions[_0x330b13(0x141)](_0x11ea81);if(!_0x3edb6f)return _0x205237[_0x330b13(0x182)]('admin_session',{'path':'/','sameSite':_0x330b13(0xfe),'secure':process[_0x330b13(0x10c)]['NODE_ENV']===_0x330b13(0x101)}),_0x205237[_0x330b13(0x166)](0x191)[_0x330b13(0xde)]({'success':![],'message':'Not\x20authorized'});if(Date[_0x330b13(0x188)]()>_0x3edb6f['expiresAt'])return sessions['delete'](_0x11ea81),_0x205237[_0x330b13(0x182)](_0x330b13(0xef),{'path':'/','sameSite':_0x330b13(0xfe),'secure':process[_0x330b13(0x10c)][_0x330b13(0x143)]===_0x330b13(0x101)}),_0x205237[_0x330b13(0x166)](0x191)[_0x330b13(0xde)]({'success':![],'message':_0x330b13(0x16c)});_0xbe9222[_0x330b13(0x110)]=_0x3edb6f[_0x330b13(0x110)],_0x26efec();}catch(_0x2dc6d3){return _0x205237['status'](0x191)[_0x330b13(0xde)]({'success':![],'message':'Not\x20authorized'});}}async function ensureAdminExists(){const _0x2e1a0d=a0_0x38d0f1;try{let _0x4d8c46;try{const _0x154f48=await supabase[_0x2e1a0d(0x12c)](_0x2e1a0d(0x12b))[_0x2e1a0d(0xe6)]('*')['eq'](_0x2e1a0d(0x127),_0x2e1a0d(0x14e))['limit'](0x1)['maybeSingle']();_0x4d8c46=_0x154f48&&_0x154f48[_0x2e1a0d(0xf8)]!==undefined?_0x154f48[_0x2e1a0d(0xf8)]:_0x154f48;}catch(_0x3d8100){const _0x5a3a5b=await supabase[_0x2e1a0d(0x12c)](_0x2e1a0d(0x12b))['select']('*')['eq'](_0x2e1a0d(0x127),_0x2e1a0d(0x14e))[_0x2e1a0d(0xfb)](0x1);_0x4d8c46=_0x5a3a5b&&_0x5a3a5b[_0x2e1a0d(0xf8)]&&_0x5a3a5b[_0x2e1a0d(0xf8)][_0x2e1a0d(0xfc)]?_0x5a3a5b['data'][0x0]:null;}if(_0x4d8c46){console[_0x2e1a0d(0x18d)](_0x2e1a0d(0x146));return;}const _0x21e4a9=process[_0x2e1a0d(0x10c)][_0x2e1a0d(0x113)];if(!_0x21e4a9){console[_0x2e1a0d(0xf1)](_0x2e1a0d(0x125));return;}const _0x3b5d9d=0xc,_0x37cd3a=await bcrypt[_0x2e1a0d(0x128)](String(_0x21e4a9),_0x3b5d9d),{data:_0x59e9d9,error:_0x2004ea}=await supabase['from'](_0x2e1a0d(0x12b))['insert']([{'username':_0x2e1a0d(0x14e),'password_hash':_0x37cd3a,'role':'admin','created_at':new Date()}])[_0x2e1a0d(0xe6)]();_0x2004ea?console[_0x2e1a0d(0x106)](_0x2e1a0d(0x12e),_0x2004ea):console[_0x2e1a0d(0x18d)](_0x2e1a0d(0xd1));}catch(_0xfde031){console[_0x2e1a0d(0x106)](_0x2e1a0d(0xcd),_0xfde031&&_0xfde031[_0x2e1a0d(0xd9)]?_0xfde031[_0x2e1a0d(0xd9)]:_0xfde031);}}ensureAdminExists()[a0_0x38d0f1(0x167)](_0x3db74d=>console['error']('ensureAdminExists\x20failed:',_0x3db74d)),apps[a0_0x38d0f1(0x16b)](a0_0x38d0f1(0x149),async(_0x2a1212,_0x48644f)=>{const _0x497a43=a0_0x38d0f1;try{const {username:_0x4ccdb3,password:_0x1846a7}=_0x2a1212[_0x497a43(0xdb)]||{};if(!_0x4ccdb3||!_0x1846a7)return _0x48644f[_0x497a43(0x166)](0x190)[_0x497a43(0xde)]({'success':![],'message':_0x497a43(0x15c)});if(String(_0x4ccdb3)[_0x497a43(0xd4)]()!==_0x497a43(0x14e))return _0x48644f[_0x497a43(0x166)](0x191)[_0x497a43(0xde)]({'success':![],'message':'Invalid\x20credentials'});const {data:_0xf2c5b8,error:_0x57ff4d}=await supabase[_0x497a43(0x12c)](_0x497a43(0x12b))[_0x497a43(0xe6)]('*')['eq'](_0x497a43(0x127),_0x497a43(0x14e))['limit'](0x1)['maybeSingle']();if(_0x57ff4d)return console[_0x497a43(0xf1)](_0x497a43(0x17c),_0x57ff4d),_0x48644f[_0x497a43(0x166)](0x1f4)['json']({'success':![],'message':'Internal\x20error'});if(!_0xf2c5b8)return _0x48644f['status'](0x191)[_0x497a43(0xde)]({'success':![],'message':_0x497a43(0x144)});const _0x3356d0=String(_0xf2c5b8[_0x497a43(0xf0)]||_0xf2c5b8['password']||'')['trim']();if(!_0x3356d0)return console[_0x497a43(0x106)]('No\x20password_hash\x20found\x20for\x20admin\x20row.'),_0x48644f[_0x497a43(0x166)](0x1f4)['json']({'success':![],'message':_0x497a43(0xcc)});const _0x5031d6=await bcrypt['compare'](String(_0x1846a7),_0x3356d0);if(!_0x5031d6)return _0x48644f[_0x497a43(0x166)](0x191)[_0x497a43(0xde)]({'success':![],'message':_0x497a43(0x144)});const _0x2189cf=genToken(),_0x32ddd3=Date[_0x497a43(0x188)]()+0x18*0x3c*0x3c*0x3e8;sessions['set'](_0x2189cf,{'user':_0x497a43(0x14e),'expiresAt':_0x32ddd3});const _0xfb503c={'httpOnly':!![],'maxAge':0x18*0x3c*0x3c*0x3e8,'sameSite':'none','path':'/'};if(process['env'][_0x497a43(0x143)]===_0x497a43(0x101))_0xfb503c[_0x497a43(0xc7)]=!![];_0x48644f[_0x497a43(0x13c)](_0x497a43(0xef),_0x2189cf,_0xfb503c);try{await supabase[_0x497a43(0x12c)](_0x497a43(0x12b))[_0x497a43(0xfd)]({'last_login':new Date()})['eq'](_0x497a43(0x127),_0x497a43(0x14e));}catch(_0x44bd33){console['warn'](_0x497a43(0x159),_0x44bd33);}return _0x48644f[_0x497a43(0xde)]({'success':!![]});}catch(_0x2d662e){return console[_0x497a43(0x106)]('ERR\x20/api/login',_0x2d662e&&_0x2d662e[_0x497a43(0xd9)]?_0x2d662e['stack']:_0x2d662e),_0x48644f[_0x497a43(0x166)](0x1f4)[_0x497a43(0xde)]({'success':![],'message':'Internal\x20error'});}}),apps[a0_0x38d0f1(0x16b)](a0_0x38d0f1(0xfa),(_0x502df3,_0x13f2d7)=>{const _0x2b62cb=a0_0x38d0f1;try{const _0x597e70=_0x502df3[_0x2b62cb(0x181)]&&_0x502df3[_0x2b62cb(0x181)][_0x2b62cb(0xef)];if(_0x597e70)sessions[_0x2b62cb(0xf7)](_0x597e70);return _0x13f2d7['clearCookie']('admin_session',{'path':'/','sameSite':'none','secure':process[_0x2b62cb(0x10c)][_0x2b62cb(0x143)]===_0x2b62cb(0x101)}),_0x13f2d7['json']({'success':!![]});}catch(_0x4f3941){return console[_0x2b62cb(0x106)](_0x2b62cb(0x163),_0x4f3941),_0x13f2d7[_0x2b62cb(0x166)](0x1f4)['json']({'success':![],'message':_0x2b62cb(0x116)});}}),apps[a0_0x38d0f1(0x141)](a0_0x38d0f1(0x11c),requireAdmin,(_0xb167c5,_0x1b5a0e)=>{const _0x3dd865=a0_0x38d0f1;_0x1b5a0e[_0x3dd865(0xde)]({'success':!![],'user':_0xb167c5['user']});});const escapeHtml=(_0x735aed='')=>String(_0x735aed)['replace'](/[&<>"']/g,_0x2075df=>({'&':a0_0x38d0f1(0x16e),'<':a0_0x38d0f1(0x15e),'>':a0_0x38d0f1(0x14f),'\x22':a0_0x38d0f1(0x175),'\x27':a0_0x38d0f1(0x139)}[_0x2075df]));apps[a0_0x38d0f1(0x141)](a0_0x38d0f1(0x18a),async(_0x550bf9,_0xaa781c)=>{const _0x4f9025=a0_0x38d0f1;try{const _0x4d62e5=path[_0x4f9025(0x16a)](__dirname,_0x4f9025(0x168),_0x4f9025(0x158));if(!fs[_0x4f9025(0xdc)](_0x4d62e5))return _0xaa781c['status'](0x194)[_0x4f9025(0xe8)](_0x4f9025(0xe0));let _0x59a21a=fs['readFileSync'](_0x4d62e5,_0x4f9025(0x10f));const _0x35a5e0=_0x550bf9['protocol']+'://'+_0x550bf9['get'](_0x4f9025(0x171));let _0x2df618=_0x4f9025(0x142),_0x2dc239=_0x4f9025(0x161),_0x24668b=_0x4f9025(0x162);const _0x3f194f=_0x550bf9['query']['id']||_0x550bf9[_0x4f9025(0x10a)][_0x4f9025(0x186)]||_0x550bf9['query']['account_id'],_0x26df3b=_0x550bf9[_0x4f9025(0x10a)][_0x4f9025(0x180)]||_0x550bf9[_0x4f9025(0x10a)][_0x4f9025(0x13d)];if(_0x3f194f){const {data:_0x493ff8,error:_0x2f0278}=await supabase[_0x4f9025(0x12c)](_0x4f9025(0xc5))[_0x4f9025(0xe6)]('*')['eq']('id',_0x3f194f)[_0x4f9025(0xd2)]();if(!_0x2f0278&&_0x493ff8){const _0x2f8318=Array[_0x4f9025(0x176)](_0x493ff8[_0x4f9025(0x126)])?_0x493ff8['gambars']:typeof _0x493ff8[_0x4f9025(0x126)]===_0x4f9025(0x155)?((()=>{const _0x33a3b5=_0x4f9025;try{return JSON[_0x33a3b5(0x157)](_0x493ff8[_0x33a3b5(0x126)]);}catch(_0x32ec71){return[];}})()):[],_0x42970e=_0x2f8318&&_0x2f8318[0x0]||_0x493ff8['gambar'];_0x42970e&&(_0x2df618=_0x42970e[_0x4f9025(0x13f)]('http')?_0x42970e:_0x35a5e0+'/'+_0x42970e['replace'](/^\//,'')),_0x2dc239=_0x493ff8[_0x4f9025(0x180)]||_0x2dc239,_0x24668b=_0x493ff8[_0x4f9025(0x151)]||_0x24668b;}}else{if(_0x26df3b){const {data:_0x18225c,error:_0x205345}=await supabase[_0x4f9025(0x12c)](_0x4f9025(0xc5))[_0x4f9025(0xe6)]('*')['ilike']('nama','%'+_0x26df3b+'%')['limit'](0x1);if(!_0x205345&&Array[_0x4f9025(0x176)](_0x18225c)&&_0x18225c[0x0]){const _0x49e66d=_0x18225c[0x0],_0x28b82b=Array[_0x4f9025(0x176)](_0x49e66d[_0x4f9025(0x126)])?_0x49e66d['gambars']:[],_0x5d634d=_0x28b82b&&_0x28b82b[0x0]||_0x49e66d[_0x4f9025(0x104)];if(_0x5d634d)_0x2df618=_0x5d634d[_0x4f9025(0x13f)]('http')?_0x5d634d:_0x35a5e0+'/'+_0x5d634d['replace'](/^\//,'');_0x2dc239=_0x49e66d[_0x4f9025(0x180)]||_0x2dc239,_0x24668b=_0x49e66d[_0x4f9025(0x151)]||_0x24668b;}}}const _0x1a536a=_0x4f9025(0x174)+escapeHtml(_0x2dc239)+_0x4f9025(0x150)+escapeHtml(_0x24668b)+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<meta\x20property=\x22og:image\x22\x20content=\x22'+_0x2df618+_0x4f9025(0x123)+(_0x35a5e0+_0x550bf9[_0x4f9025(0x14a)])+_0x4f9025(0x177)+escapeHtml(_0x2dc239)+_0x4f9025(0xcb)+escapeHtml(_0x24668b)+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<meta\x20name=\x22twitter:image\x22\x20content=\x22'+_0x2df618+_0x4f9025(0x164);_0x59a21a[_0x4f9025(0x14d)](_0x4f9025(0x103))!==-0x1?_0x59a21a=_0x59a21a[_0x4f9025(0xea)]('</head>',_0x1a536a+'\x0a</head>'):_0x59a21a=_0x1a536a+'\x0a'+_0x59a21a,_0xaa781c[_0x4f9025(0x18c)](_0x4f9025(0x13e),_0x4f9025(0x145)),_0xaa781c[_0x4f9025(0xe8)](_0x59a21a);}catch(_0x4b6f0f){console[_0x4f9025(0x106)](_0x4f9025(0x172),_0x4b6f0f),_0xaa781c[_0x4f9025(0x117)](path[_0x4f9025(0x16a)](__dirname,'public',_0x4f9025(0x158)));}}),apps['get'](a0_0x38d0f1(0x129),(_0x2e3191,_0x2574bf)=>{const _0x26589b=a0_0x38d0f1;_0x2574bf['json']({'ok':!![],'time':new Date()[_0x26589b(0x15a)]()});}),apps['get'](a0_0x38d0f1(0xf5),async(_0x1d6829,_0x3d716a)=>{const _0xa8f00b=a0_0x38d0f1;try{const {data:_0x5054b4,error:_0x28e6a9}=await supabase[_0xa8f00b(0x12c)](_0xa8f00b(0xc5))[_0xa8f00b(0xe6)]('*')[_0xa8f00b(0x108)]('id',{'ascending':![]});if(_0x28e6a9)throw _0x28e6a9;_0x3d716a[_0xa8f00b(0xde)]({'success':!![],'data':_0x5054b4});}catch(_0x43a700){console[_0xa8f00b(0x106)](_0x43a700),_0x3d716a[_0xa8f00b(0x166)](0x1f4)[_0xa8f00b(0xde)]({'success':![],'error':_0x43a700['message']||_0x43a700});}}),apps['post']('/api/post_akun_detail',upload[a0_0x38d0f1(0xc9)](a0_0x38d0f1(0x104),0xa),async(_0x5e07d3,_0x1d82e4)=>{const _0x22a100=a0_0x38d0f1;try{const {nama:_0x438371,harga:_0x134788,id_akun:_0x503603,deskripsi:_0x29cc8b,rank:_0x5b826b,skin:_0x5d3d37,hero:_0xc69378,winrate:_0x46863e,pertandingan:_0x3a9e57,magic_core:_0x32406a,emblem:_0x2db134,pribadi_beli:_0x35eefe,log:_0x3e4136,bind:_0x2e83b7}=_0x5e07d3[_0x22a100(0xdb)],_0xd102a3=_0x5e07d3[_0x22a100(0x14c)]||[];if(!_0x438371||!_0x134788||!_0x503603)return _0x1d82e4['status'](0x190)['json']({'success':![],'message':_0x22a100(0xe1)});const _0xc95ce2=[];for(const _0x45eef4 of _0xd102a3){const _0x3b70e9=path['extname'](_0x45eef4[_0x22a100(0x170)])||'',_0x5023ab=_0x22a100(0x18b)+Date[_0x22a100(0x188)]()+'_'+Math['random']()[_0x22a100(0x13b)](0x24)['slice'](0x2)+_0x3b70e9,_0x3de95d=await supabase[_0x22a100(0xd5)][_0x22a100(0x12c)]('gambar')['upload'](_0x5023ab,fs[_0x22a100(0x17d)](_0x45eef4[_0x22a100(0x173)]),{'contentType':_0x45eef4[_0x22a100(0x115)],'duplex':_0x22a100(0x134)});try{fs[_0x22a100(0x18f)](_0x45eef4[_0x22a100(0x173)]);}catch(_0x2d2c11){}if(_0x3de95d['error'])throw _0x3de95d[_0x22a100(0x106)];const {data:_0x25d7d8}=supabase[_0x22a100(0xd5)][_0x22a100(0x12c)](_0x22a100(0x104))['getPublicUrl'](_0x5023ab);_0xc95ce2[_0x22a100(0xe4)](_0x25d7d8[_0x22a100(0x152)]);}const _0x1de9ff=_0xc95ce2['length']?_0xc95ce2[0x0]:null,_0x169c0b=_0x5e07d3['body'][_0x22a100(0x166)],_0x2580cf=typeof _0x169c0b===_0x22a100(0x155)?![_0x22a100(0x15d),_0x22a100(0xec),'0'][_0x22a100(0x114)](_0x169c0b[_0x22a100(0xd4)]()):Boolean(_0x169c0b),{data:_0x2d4cd9,error:_0x3ac6e5}=await supabase[_0x22a100(0x12c)]('ranzirostore_akunml')[_0x22a100(0x15b)]([{'nama':_0x438371,'harga':_0x134788,'id_akun':_0x503603,'deskripsi':_0x29cc8b,'rank':_0x5b826b,'skin':_0x5d3d37?parseInt(_0x5d3d37):null,'hero':_0xc69378?parseInt(_0xc69378):null,'winrate':_0x46863e,'pertandingan':_0x3a9e57?parseInt(_0x3a9e57):null,'magic_core':_0x32406a,'emblem':_0x2db134,'pribadi_beli':_0x35eefe,'log':_0x3e4136,'bind':_0x2e83b7,'gambar':_0x1de9ff,'gambars':_0xc95ce2,'status':_0x2580cf}])['select']();if(_0x3ac6e5)throw _0x3ac6e5;_0x1d82e4[_0x22a100(0x166)](0xc9)[_0x22a100(0xde)]({'success':!![],'data':_0x2d4cd9});}catch(_0x55fcf8){console[_0x22a100(0x106)](_0x22a100(0xcf),_0x55fcf8),_0x1d82e4[_0x22a100(0x166)](0x1f4)[_0x22a100(0xde)]({'success':![],'message':_0x55fcf8[_0x22a100(0x102)]||_0x55fcf8});}}),apps[a0_0x38d0f1(0x141)](a0_0x38d0f1(0x10b),async(_0x3588bb,_0x58c741)=>{const _0x408267=a0_0x38d0f1;try{const {id:_0x4ffdd4}=_0x3588bb[_0x408267(0x12a)],{data:_0x16cfd8,error:_0x23221f}=await supabase[_0x408267(0x12c)]('ranzirostore_akunml')[_0x408267(0xe6)]('*')['eq']('id',_0x4ffdd4)['single']();if(_0x23221f)throw _0x23221f;_0x58c741[_0x408267(0xde)]({'success':!![],'data':_0x16cfd8});}catch(_0x38ec6a){console[_0x408267(0x106)](_0x38ec6a),_0x58c741[_0x408267(0x166)](0x1f4)[_0x408267(0xde)]({'success':![],'message':_0x38ec6a[_0x408267(0x102)]||_0x38ec6a});}}),apps[a0_0x38d0f1(0x16b)](a0_0x38d0f1(0x137),upload['array'](a0_0x38d0f1(0x104),0xa),async(_0x27cb61,_0xe33fa0)=>{const _0xe4dc5b=a0_0x38d0f1;try{const {id:_0x4accb2}=_0x27cb61['params'],_0xf71bd5=_0x27cb61[_0xe4dc5b(0x14c)]||[];if(!_0xf71bd5['length'])return _0xe33fa0[_0xe4dc5b(0x166)](0x190)[_0xe4dc5b(0xde)]({'success':![],'message':_0xe4dc5b(0xc6)});const {data:_0x44af57,error:_0x165cf6}=await supabase[_0xe4dc5b(0x12c)](_0xe4dc5b(0xc5))[_0xe4dc5b(0xe6)](_0xe4dc5b(0x126))['eq']('id',_0x4accb2)[_0xe4dc5b(0xd2)]();if(_0x165cf6)throw _0x165cf6;const _0x1d6600=Array['isArray'](_0x44af57[_0xe4dc5b(0x126)])?_0x44af57[_0xe4dc5b(0x126)]:[],_0x481a69=[];for(const _0x12af8d of _0xf71bd5){const _0xf172fe=path[_0xe4dc5b(0xdf)](_0x12af8d[_0xe4dc5b(0x170)])||'',_0x183644=_0xe4dc5b(0x18b)+Date[_0xe4dc5b(0x188)]()+'_'+Math[_0xe4dc5b(0x10e)]()[_0xe4dc5b(0x13b)](0x24)[_0xe4dc5b(0xce)](0x2)+_0xf172fe,_0x382c62=await supabase[_0xe4dc5b(0xd5)][_0xe4dc5b(0x12c)](_0xe4dc5b(0x104))['upload'](_0x183644,fs[_0xe4dc5b(0x17d)](_0x12af8d[_0xe4dc5b(0x173)]),{'contentType':_0x12af8d['mimetype'],'duplex':'half'});try{fs[_0xe4dc5b(0x18f)](_0x12af8d[_0xe4dc5b(0x173)]);}catch(_0x2a86c4){}if(_0x382c62[_0xe4dc5b(0x106)])throw _0x382c62[_0xe4dc5b(0x106)];const {data:_0x5bc2d8}=supabase[_0xe4dc5b(0xd5)][_0xe4dc5b(0x12c)](_0xe4dc5b(0x104))[_0xe4dc5b(0x160)](_0x183644);_0x481a69[_0xe4dc5b(0xe4)](_0x5bc2d8['publicUrl']);}const _0x27dbb1=_0x1d6600[_0xe4dc5b(0x136)](_0x481a69),_0x28c65b=_0x27dbb1[_0xe4dc5b(0xfc)]?_0x27dbb1[0x0]:null,{data:_0x4d93a5,error:_0xbbf793}=await supabase[_0xe4dc5b(0x12c)](_0xe4dc5b(0xc5))[_0xe4dc5b(0xfd)]({'gambars':_0x27dbb1,'gambar':_0x28c65b,'updated_at':new Date()})['eq']('id',_0x4accb2)[_0xe4dc5b(0xe6)]();if(_0xbbf793)throw _0xbbf793;_0xe33fa0[_0xe4dc5b(0xde)]({'success':!![],'data':_0x4d93a5});}catch(_0x32bf9d){console[_0xe4dc5b(0x106)](_0x32bf9d),_0xe33fa0[_0xe4dc5b(0x166)](0x1f4)[_0xe4dc5b(0xde)]({'success':![],'message':_0x32bf9d[_0xe4dc5b(0x102)]||_0x32bf9d});}}),apps[a0_0x38d0f1(0xf7)](a0_0x38d0f1(0xe3),async(_0x224637,_0x49267c)=>{const _0x4bb2e9=a0_0x38d0f1;try{const {id:_0x661ed,url:_0x48b5f3}=_0x224637[_0x4bb2e9(0xdb)];if(!_0x661ed||!_0x48b5f3)return _0x49267c['status'](0x190)[_0x4bb2e9(0xde)]({'success':![],'message':_0x4bb2e9(0x11b)});const {data:_0x64c01,error:_0x13e652}=await supabase[_0x4bb2e9(0x12c)]('ranzirostore_akunml')['select'](_0x4bb2e9(0x126))['eq']('id',_0x661ed)[_0x4bb2e9(0xd2)]();if(_0x13e652)throw _0x13e652;const _0x373707=Array[_0x4bb2e9(0x176)](_0x64c01['gambars'])?_0x64c01[_0x4bb2e9(0x126)]:[],_0x178aa7=_0x48b5f3[_0x4bb2e9(0xdd)]('/')[_0x4bb2e9(0x16f)](),{error:_0x49ac04}=await supabase['storage'][_0x4bb2e9(0x12c)](_0x4bb2e9(0x104))[_0x4bb2e9(0x100)]([_0x178aa7]);_0x49ac04&&console['warn']('removeErr',_0x49ac04[_0x4bb2e9(0x102)]||_0x49ac04);const _0x36455a=_0x373707[_0x4bb2e9(0x189)](_0x34b95b=>_0x34b95b!==_0x48b5f3),_0x34c1a7=_0x36455a['length']?_0x36455a[0x0]:null,{data:_0x34b7ad,error:_0xb01c61}=await supabase[_0x4bb2e9(0x12c)](_0x4bb2e9(0xc5))[_0x4bb2e9(0xfd)]({'gambars':_0x36455a,'gambar':_0x34c1a7,'updated_at':new Date()})['eq']('id',_0x661ed)[_0x4bb2e9(0xe6)]();if(_0xb01c61)throw _0xb01c61;_0x49267c[_0x4bb2e9(0xde)]({'success':!![],'data':_0x34b7ad});}catch(_0x3feb3f){console[_0x4bb2e9(0x106)](_0x3feb3f),_0x49267c[_0x4bb2e9(0x166)](0x1f4)['json']({'success':![],'message':_0x3feb3f['message']||_0x3feb3f});}}),apps[a0_0x38d0f1(0xf7)](a0_0x38d0f1(0xee),async(_0x513ad1,_0x496817)=>{const _0x285776=a0_0x38d0f1;try{const {id:_0x54243e}=_0x513ad1[_0x285776(0x12a)],{data:_0x43dbf3,error:_0x34c5e6}=await supabase[_0x285776(0x12c)](_0x285776(0xc5))[_0x285776(0xe6)](_0x285776(0x126))['eq']('id',_0x54243e)[_0x285776(0xd2)]();if(_0x34c5e6)throw _0x34c5e6;const _0x597d81=Array['isArray'](_0x43dbf3[_0x285776(0x126)])?_0x43dbf3['gambars']:[],_0x3a178d=_0x597d81[_0x285776(0x15f)](_0x506de4=>_0x506de4['split']('/')[_0x285776(0x16f)]())[_0x285776(0x189)](Boolean);if(_0x3a178d['length']){const {error:_0x3101eb}=await supabase['storage'][_0x285776(0x12c)](_0x285776(0x104))['remove'](_0x3a178d);if(_0x3101eb)throw _0x3101eb;}const {data:_0x596f90,error:_0x38b81a}=await supabase[_0x285776(0x12c)](_0x285776(0xc5))[_0x285776(0xfd)]({'gambars':[],'gambar':null,'updated_at':new Date()})['eq']('id',_0x54243e)[_0x285776(0xe6)]();if(_0x38b81a)throw _0x38b81a;_0x496817[_0x285776(0xde)]({'success':!![],'data':_0x596f90});}catch(_0x2b8135){console[_0x285776(0x106)](_0x2b8135),_0x496817[_0x285776(0x166)](0x1f4)[_0x285776(0xde)]({'success':![],'message':_0x2b8135[_0x285776(0x102)]||_0x2b8135});}}),apps[a0_0x38d0f1(0xca)](a0_0x38d0f1(0x121),async(_0x5a3f8e,_0xa9ac3)=>{const _0x3acd03=a0_0x38d0f1;try{const {id:_0x2a11a7}=_0x5a3f8e[_0x3acd03(0x12a)],{order:_0x44333e}=_0x5a3f8e[_0x3acd03(0xdb)];if(!Array[_0x3acd03(0x176)](_0x44333e))return _0xa9ac3[_0x3acd03(0x166)](0x190)[_0x3acd03(0xde)]({'success':![],'message':_0x3acd03(0x118)});const _0x133c6b=_0x44333e[_0x3acd03(0xfc)]?_0x44333e[0x0]:null,{data:_0x35fbf9,error:_0x519ad7}=await supabase[_0x3acd03(0x12c)](_0x3acd03(0xc5))[_0x3acd03(0xfd)]({'gambars':_0x44333e,'gambar':_0x133c6b,'updated_at':new Date()})['eq']('id',_0x2a11a7)[_0x3acd03(0xe6)]();if(_0x519ad7)throw _0x519ad7;_0xa9ac3[_0x3acd03(0xde)]({'success':!![],'data':_0x35fbf9});}catch(_0x5a4986){console[_0x3acd03(0x106)](_0x5a4986),_0xa9ac3[_0x3acd03(0x166)](0x1f4)[_0x3acd03(0xde)]({'success':![],'message':_0x5a4986[_0x3acd03(0x102)]||_0x5a4986});}}),apps[a0_0x38d0f1(0xca)](a0_0x38d0f1(0xf3),async(_0x33b4ed,_0xfbe5e5)=>{const _0xc388b3=a0_0x38d0f1;try{const {id:_0x345a66}=_0x33b4ed[_0xc388b3(0x12a)],_0x5a055c=_0x33b4ed['body']||{};_0x5a055c[_0xc388b3(0x166)]!==undefined&&(typeof _0x5a055c[_0xc388b3(0x166)]===_0xc388b3(0x155)?_0x5a055c[_0xc388b3(0x166)]=![_0xc388b3(0x15d),_0xc388b3(0xec),'0']['includes'](_0x5a055c['status'][_0xc388b3(0xd4)]()):_0x5a055c[_0xc388b3(0x166)]=Boolean(_0x5a055c[_0xc388b3(0x166)]));delete _0x5a055c['id'];const {data:_0x3979b1,error:_0xf4f856}=await supabase[_0xc388b3(0x12c)](_0xc388b3(0xc5))['update']({..._0x5a055c,'updated_at':new Date()})['eq']('id',_0x345a66)[_0xc388b3(0xe6)]();if(_0xf4f856)throw _0xf4f856;_0xfbe5e5['json']({'success':!![],'data':_0x3979b1});}catch(_0x5bc7e4){console[_0xc388b3(0x106)](_0x5bc7e4),_0xfbe5e5[_0xc388b3(0x166)](0x1f4)[_0xc388b3(0xde)]({'success':![],'message':_0x5bc7e4[_0xc388b3(0x102)]||_0x5bc7e4});}}),apps['delete'](a0_0x38d0f1(0x12f),async(_0x17545c,_0x29c25e)=>{const _0x2e13b8=a0_0x38d0f1;try{const {id:_0x494e70}=_0x17545c[_0x2e13b8(0x12a)],{data:_0x14e5da,error:_0x230780}=await supabase[_0x2e13b8(0x12c)](_0x2e13b8(0xc5))[_0x2e13b8(0xe6)](_0x2e13b8(0x126))['eq']('id',_0x494e70)[_0x2e13b8(0xd2)]();if(_0x230780)throw _0x230780;const _0x515d72=(_0x14e5da[_0x2e13b8(0x126)]||[])[_0x2e13b8(0x15f)](_0x5968aa=>_0x5968aa[_0x2e13b8(0xdd)]('/')[_0x2e13b8(0x16f)]())[_0x2e13b8(0x189)](Boolean);if(_0x515d72[_0x2e13b8(0xfc)]){const {error:_0x28d69d}=await supabase[_0x2e13b8(0xd5)][_0x2e13b8(0x12c)](_0x2e13b8(0x104))[_0x2e13b8(0x100)](_0x515d72);if(_0x28d69d)throw _0x28d69d;}const {data:_0x35b96a,error:_0xa516e9}=await supabase[_0x2e13b8(0x12c)](_0x2e13b8(0xc5))[_0x2e13b8(0xf7)]()['eq']('id',_0x494e70);if(_0xa516e9)throw _0xa516e9;_0x29c25e[_0x2e13b8(0xde)]({'success':!![],'data':_0x35b96a});}catch(_0xfab846){console[_0x2e13b8(0x106)](_0xfab846),_0x29c25e[_0x2e13b8(0x166)](0x1f4)['json']({'success':![],'message':_0xfab846[_0x2e13b8(0x102)]||_0xfab846});}});const port=process[a0_0x38d0f1(0x10c)]['PORT']||0x849;apps['listen'](port,()=>{const _0x431fd2=a0_0x38d0f1;console[_0x431fd2(0x18d)]('ðŸš€\x20Server\x20running\x20on\x20http://localhost:'+port);});