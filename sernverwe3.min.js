const a0_0x2766bc=a0_0x5f04;(function(_0x14916e,_0x4105c9){const _0x2f9bdf=a0_0x5f04,_0x3f64eb=_0x14916e();while(!![]){try{const _0x1d3a30=-parseInt(_0x2f9bdf(0x204))/0x1+parseInt(_0x2f9bdf(0x224))/0x2*(parseInt(_0x2f9bdf(0x1ba))/0x3)+parseInt(_0x2f9bdf(0x18f))/0x4+parseInt(_0x2f9bdf(0x1b0))/0x5*(parseInt(_0x2f9bdf(0x1ed))/0x6)+parseInt(_0x2f9bdf(0x1e7))/0x7+-parseInt(_0x2f9bdf(0x1d4))/0x8*(-parseInt(_0x2f9bdf(0x176))/0x9)+-parseInt(_0x2f9bdf(0x1f0))/0xa;if(_0x1d3a30===_0x4105c9)break;else _0x3f64eb['push'](_0x3f64eb['shift']());}catch(_0x1db848){_0x3f64eb['push'](_0x3f64eb['shift']());}}}(a0_0x3447,0xf3e18));const a0_0x442910=(function(){let _0x38151f=!![];return function(_0x532dec,_0x193358){const _0x3a9273=_0x38151f?function(){const _0x443baf=a0_0x5f04;if(_0x193358){const _0x4c7aa3=_0x193358[_0x443baf(0x195)](_0x532dec,arguments);return _0x193358=null,_0x4c7aa3;}}:function(){};return _0x38151f=![],_0x3a9273;};}()),a0_0x2f0cd5=a0_0x442910(this,function(){const _0x29944c=a0_0x5f04;return a0_0x2f0cd5[_0x29944c(0x1da)]()[_0x29944c(0x198)]('(((.+)+)+)+$')[_0x29944c(0x1da)]()[_0x29944c(0x1a4)](a0_0x2f0cd5)[_0x29944c(0x198)](_0x29944c(0x1f5));});a0_0x2f0cd5();const a0_0x5d21=(function(){let _0x1c9a1f=!![];return function(_0x5212c6,_0x179961){const _0x2d8b7b=_0x1c9a1f?function(){const _0x35b988=a0_0x5f04;if(_0x179961){const _0x1ffd15=_0x179961[_0x35b988(0x195)](_0x5212c6,arguments);return _0x179961=null,_0x1ffd15;}}:function(){};return _0x1c9a1f=![],_0x2d8b7b;};}()),a0_0x1be496=a0_0x5d21(this,function(){const _0x38c340=a0_0x5f04,_0x1bd731=function(){const _0x15778a=a0_0x5f04;let _0x328ecf;try{_0x328ecf=Function(_0x15778a(0x21a)+_0x15778a(0x165)+');')();}catch(_0x2c94da){_0x328ecf=window;}return _0x328ecf;},_0x4c657d=_0x1bd731(),_0x65e074=_0x4c657d['console']=_0x4c657d[_0x38c340(0x1c6)]||{},_0x1f9945=['log','warn','info',_0x38c340(0x167),'exception',_0x38c340(0x1dd),_0x38c340(0x17d)];for(let _0x44420f=0x0;_0x44420f<_0x1f9945['length'];_0x44420f++){const _0x54e3aa=a0_0x5d21[_0x38c340(0x1a4)]['prototype']['bind'](a0_0x5d21),_0x15d4c8=_0x1f9945[_0x44420f],_0x25fa0e=_0x65e074[_0x15d4c8]||_0x54e3aa;_0x54e3aa[_0x38c340(0x1eb)]=a0_0x5d21[_0x38c340(0x227)](a0_0x5d21),_0x54e3aa[_0x38c340(0x1da)]=_0x25fa0e[_0x38c340(0x1da)]['bind'](_0x25fa0e),_0x65e074[_0x15d4c8]=_0x54e3aa;}});a0_0x1be496(),require(a0_0x2766bc(0x1d2))[a0_0x2766bc(0x1c9)]();const express=require('express'),apps=express(),{createClient}=require('@supabase/supabase-js'),crypto=require(a0_0x2766bc(0x1a3)),cors=require(a0_0x2766bc(0x18b)),path=require('path'),bodyParser=require(a0_0x2766bc(0x178)),multer=require(a0_0x2766bc(0x1e6)),fs=require('fs'),cookieParser=require(a0_0x2766bc(0x19e)),bcrypt=require(a0_0x2766bc(0x1dc)),uploadsDir=path[a0_0x2766bc(0x1f7)](__dirname,a0_0x2766bc(0x1ee));!fs[a0_0x2766bc(0x1cf)](uploadsDir)&&fs['mkdirSync'](uploadsDir,{'recursive':!![]});const upload=multer({'dest':uploadsDir}),allowedOrigins=['https://ranziro-server-production.up.railway.app',a0_0x2766bc(0x209),a0_0x2766bc(0x166)];apps[a0_0x2766bc(0x17a)](cors({'origin':function(_0x2aea54,_0x2ef078){const _0x595392=a0_0x2766bc;if(!_0x2aea54)return _0x2ef078(null,!![]);if(allowedOrigins['includes'](_0x2aea54))return _0x2ef078(null,!![]);return _0x2ef078(new Error(_0x595392(0x19c)));},'credentials':!![]})),apps['use']((_0xc3020b,_0x3c5d52,_0x1c58f6)=>{const _0xae56c9=a0_0x2766bc;_0x3c5d52['set'](_0xae56c9(0x20c),_0xae56c9(0x1ab)),_0x1c58f6();}),apps[a0_0x2766bc(0x17a)](bodyParser[a0_0x2766bc(0x1e0)]({'limit':a0_0x2766bc(0x1d1)})),apps[a0_0x2766bc(0x17a)](bodyParser[a0_0x2766bc(0x192)]({'extended':!![],'limit':a0_0x2766bc(0x1d1)})),apps[a0_0x2766bc(0x17a)](cookieParser());(!process['env'][a0_0x2766bc(0x1b3)]||!process[a0_0x2766bc(0x20f)][a0_0x2766bc(0x214)])&&console[a0_0x2766bc(0x16d)](a0_0x2766bc(0x1fc));const supabase=createClient(process[a0_0x2766bc(0x20f)]['SUPABASE_URL']||'',process[a0_0x2766bc(0x20f)][a0_0x2766bc(0x214)]||'');apps[a0_0x2766bc(0x17a)](express[a0_0x2766bc(0x210)](path[a0_0x2766bc(0x1f7)](__dirname,a0_0x2766bc(0x16c))));const sessions=new Map();function genToken(){const _0x5f3af6=a0_0x2766bc;return crypto[_0x5f3af6(0x1de)](0x20)[_0x5f3af6(0x1da)](_0x5f3af6(0x1bd));}setInterval(()=>{const _0x2698f6=a0_0x2766bc;try{const _0x32072c=Date[_0x2698f6(0x1fd)]();for(const [_0x4e5e94,_0x171a67]of sessions[_0x2698f6(0x1bc)]()){if(!_0x171a67||_0x171a67[_0x2698f6(0x17f)]<=_0x32072c)sessions[_0x2698f6(0x1aa)](_0x4e5e94);}}catch(_0x33aaf4){console['warn'](_0x2698f6(0x1f2),_0x33aaf4);}},0x1e*0x3c*0x3e8);function a0_0x3447(){const _0x2fb4cc=['y29VA2LLCW','u2vZC2LVBIbJBgvHBNvWigvYCM9Y','Bg9N','rvjsic9HA3vUig1LDgeGAw5Qzwn0','kcGOlISPkYKRksSK','z2v0','AM9PBG','ywrTAw5FC2vZC2LVBG','C2v0','l2fWAs9KzwXFAw1Hz2vZlZPPza','t3jPz2LU','4PQG77Ipifnvuefcqvnfx1vstcbHDgf1ifnvuefcqvnfx0Tfwsb0AwrHAYbKAxrLBxvRyw4GzgKGlMvUDI4GugfZDgLRyw4GDMfYAwfIzwWGzw52igrPC2v0igPPA2eGBwvUz2D1BMfRyw4Gu3vWywjHC2uU','BM93','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6DhLWzsiGy29UDgvUDd0ID2vIC2L0zsiGlZ4kicaGicaGpg1LDgeGChjVCgvYDhK9iM9NoNrPDgXLiIbJB250zw50psi','oI8V','C3rHCNrZv2L0Aa','qurnsu5FufC','y2XLyxjdB29RAwu','AgfSzG','nJu0oteWu094re1p','pc9OzwfKpG','z2v0uhvIBgLJvxjS','yxjYyxK','Bwf5yMvtAw5NBgu','Ahr0Chm6lY9Yyw56AxjVC3rVCMuUDMvYy2vSlMfWCa','tM8GCgfZC3DVCMrFAgfZAcbMB3vUzcbMB3iGywrTAw4GCM93lG','zM9YrwfJAa','q2fJAguTq29UDhjVBa','jMD0oW','BwLTzxr5Cgu','zw52','C3rHDgLJ','BgvUz3rO','BMfTyq','DhjPBq','u1vqqujbu0vFs0vz','zMLSDgvY','Aw5KzxHpzG','ywT1BL8','q291BgqGBM90ihDYAxrLigXHC3rFBg9NAw46','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMnHCMqIignVBNrLBNq9iNn1Bw1HCNLFBgfYz2vFAw1Hz2uIic8+cIaGicaGidXTzxrHig5HBwu9iNr3Axr0zxi6DgL0BguIignVBNrLBNq9iG','CMv0DxjUicHMDw5JDgLVBIGPia','uMfUEMLYBYbtDg9YzsaTierLDgfPBcbbA3vU','ChjVDg9JB2W','DxnLCG','Aw5Zzxj0','zgvZA3jPChnP','C29Sza','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6zgvZy3jPChrPB24IignVBNrLBNq9iG','AxnbCNjHEq','u3vWywjHC2uGzxjYB3iGB24GBg9NAw4GzMv0y2G6','mtuXmdaWDMDRsfzq','C3rHy2S','Cg9W','yMLUza','tM90igf1DgHVCML6zwq','C2vUzezPBgu','BMfTzq','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','Ahr0CdOVl2XVy2fSAg9ZDdOYmtiX','zxjYB3i','q29UDgvUDc1uExbL','Dw5SAw5Ru3LUyW','Ahr0Ca','Cgf0Aa','ChvIBgLJ','D2fYBG','y29TCgfYzq','jNf1B3q7','ywrTAw4UAhrTBa','Bg9NAw4UAhrTBa','AwXPA2u','l2fWAs9HA3vUx2rLDgfPBc86Awq','u2vZC2LVBIbLEhbPCMvK','y29VA2LL','ody0z2TiAxnx','l2fWAs91CgXVywrFAw1Hz2vZlZPPza','yM9KEs1WyxjZzxi','zNjVBq','DxnL','Cg9ZDa','iIaVpGOGicaG','DhjHy2u','ChvIBgLJvxjS','zxHWAxjLC0f0','B3jPz2LUywXvCMW','C3bSAxq','zxH0BMfTzq','Ahr0Chm6lY9SENLJCML3CxjJCwjPAwP0AwLWys5ZDxbHyMfZzs5JBY9ZDg9YywDLl3yXl29IAMvJDc9WDwjSAwmVz2fTyMfYl2XVz28VBwv0yv9Yyw56AxjVlNDLyNa','rgv0ywLSigfRDw4Gtw9IAwXLieXLz2vUzhmGzgKGuMfUEMLYBYbtDg9Yzq','CMvHzezPBgvtEw5J','CgfYyw1Z','C3rVCMfNzq','CMvTB3zL','DxnLCM5HBwuGjIbWyxnZD29YzcbYzxf1AxjLza','l2fWAs9Yyw56AxjVC3rVCMvFywT1BM1S','y29YCW','AwrFywT1BG','BM9Uzq','ChvZAa','mZK3mJCZnKfXEvDrEG','jMX0oW','AgfZAa','DxjSzw5JB2rLza','Dg9mB3DLCKnHC2u','zw5ZDxjLqwrTAw5fEgLZDhmGzMfPBgvKoG','yxbWBhK','sw52ywXPzcbJCMvKzw50AwfSCW','4PQG77IpiefetuLox1bxig5VDcbZzxqGAw4Gzw52lIbtA2LWCgLUzYbJCMvHDgLUzYbHzg1PBIb1C2vYlIbtzxqGqurnsu5FufCGDg8Gyxv0BY1JCMvHDguGywrTAw4GyxqGC3rHCNr1Cc4','C2vHCMnO','z2fTyMfYCW','DxbKyxrL','C3rHDhvZ','tM90igfSBg93zwqGyNKGq09suW','BgLZDgvU','y29VA2LLlxbHCNnLCG','l2fWAs91CgrFCMfUEMLYB3n0B3jLx2fRDw5TBc86Awq','zw5ZDxjLqwrTAw5fEgLZDhmGzxjYB3i6','Dg9ju09tDhjPBMC','4PYfiefKBwLUihvZzxiGy3jLyxrLzcbPBIbYyw56AxjVC3rVCMvFBg9NAw5Hzg1PBIaOCgfZC3DVCMqGAgfZAcbZDg9YzwqPlG','y3j5ChrV','y29UC3rYDwn0B3i','vgLKywSGywrHigzPBgu','rvjsic9HCgKVBg9NAw4','yM9KEq','ywT1BL9TBc5ODg1S','jImZotS','zgvSzxrL','BM8TC3rVCMu','CxvLCNK','Aw5KzxGUAhrTBa','jMfTCdS','zgf0yq','mJe2nvfTtfDoCq','ue9tvcaVyxbPl3bVC3rFywT1BL9KzxrHAwWGlt4','CMfUEMLYB3n0B3jLx2fRDw5TBa','u1vqqujbu0vFvvjm','DxnLCM5HBwu','l2fWAs9KzwXFCMfUEMLYB3n0B3jLx2fRDw5TBc86Awq','l2fWAs9KzwXFAw1Hz2u','l2fWAs9SB2DVDxq','AwqGzgfUihvYBcbKAxbLCMX1A2fU','Chv0','nJzXDMHKrg0','CMvWBgfJzq','zw50CMLLCW','Agv4','Dgv4Dc9ODg1SoYbJAgfYC2v0pxv0zI04','l2fWAs9SB2DPBG','ywnJB3vUDf9Pza','vMfYEq','zMLSzxm','8j+AGcbtzxj2zxiGCNvUBMLUzYbVBIbODhrWoI8VBg9JywXOB3n0oG','BMfTysWGAgfYz2eSigLKx2fRDw4GD2fQAwiGzgLPC2K','C2LUz2XL','y29UC29Szq','ywrTAw4','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMLTywDLiIbJB250zw50psi','y29UzMLN','sw50zxjUywWGzxjYB3i','CMfUzg9T','B3jPz2LUywXUyw1L','BgLTAxq','l2fWAs9WB3n0x2fRDw5Fzgv0ywLS','zxHPC3rZu3LUyW','BwfW','mtbTyG','zg90zw52','l2HLywX0Aa','nZqXodr0D29MqKK','z2fTyMfY','Ag9ZDa','tM90igzVDw5K','CgfZC3DVCMrFAgfZAa','C2vSzwn0','Dg9tDhjPBMC','C2vUza','yMnYExb0','DgfIBgu','CMfUzg9TqNL0zxm','CgfYC2u','ANnVBG','CMfUEMLYB3n0B3jLx2XVz2LUywrTAw4','C2XPy2u','BwvZC2fNzq','cIaGicaGidX0AxrSzt4','C3rYAw5N','BxvSDgvY','mJe5mtKXmgfWyw5lqq','cJWVAgvHzd4','ihWGuMfUEMLYBYbtDg9YztWVDgL0Bgu+cIaGicaGidXTzxrHig5HBwu9iMrLC2nYAxb0Aw9UiIbJB250zw50psi','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6Aw1Hz2uIignVBNrLBNq9iG','x19WCM90B19F','l2fRDw4','mJuYnJzZtgHJCxG','DxbSB2fKCW','ue9sva','ndaYnZaZotbMwKDrEhe'];a0_0x3447=function(){return _0x2fb4cc;};return a0_0x3447();}function requireAdmin(_0x59fd6a,_0x25f576,_0x1db0a3){const _0x1ca019=a0_0x2766bc;try{const _0x5080d6=_0x59fd6a[_0x1ca019(0x1f1)]&&_0x59fd6a['cookies'][_0x1ca019(0x1f8)];if(!_0x5080d6)return _0x25f576['status'](0x191)['json']({'success':![],'message':'Not\x20authorized'});const _0x9ec853=sessions[_0x1ca019(0x1f6)](_0x5080d6);if(!_0x9ec853)return _0x25f576[_0x1ca019(0x202)](_0x1ca019(0x1f8)),_0x25f576[_0x1ca019(0x19b)](0x191)[_0x1ca019(0x1e0)]({'success':![],'message':_0x1ca019(0x228)});if(Date['now']()>_0x9ec853[_0x1ca019(0x17f)])return sessions[_0x1ca019(0x1aa)](_0x5080d6),_0x25f576['clearCookie'](_0x1ca019(0x1f8)),_0x25f576[_0x1ca019(0x19b)](0x191)[_0x1ca019(0x1e0)]({'success':![],'message':_0x1ca019(0x174)});_0x59fd6a[_0x1ca019(0x21d)]=_0x9ec853[_0x1ca019(0x21d)],_0x1db0a3();}catch(_0x2fe39f){return _0x25f576['status'](0x191)['json']({'success':![],'message':_0x1ca019(0x228)});}}async function ensureAdminExists(){const _0x535f3a=a0_0x2766bc;try{let _0x1b7768;try{const _0x32516e=await supabase[_0x535f3a(0x179)](_0x535f3a(0x1e1))[_0x535f3a(0x1d9)]('*')['eq'](_0x535f3a(0x1b4),_0x535f3a(0x1c7))[_0x535f3a(0x1cd)](0x1)[_0x535f3a(0x208)]();_0x1b7768=_0x32516e&&_0x32516e[_0x535f3a(0x1af)]!==undefined?_0x32516e['data']:_0x32516e;}catch(_0x5caa77){const _0x36a147=await supabase['from'](_0x535f3a(0x1e1))[_0x535f3a(0x1d9)]('*')['eq'](_0x535f3a(0x1b4),_0x535f3a(0x1c7))['limit'](0x1);_0x1b7768=_0x36a147&&_0x36a147[_0x535f3a(0x1af)]&&_0x36a147[_0x535f3a(0x1af)][_0x535f3a(0x211)]?_0x36a147[_0x535f3a(0x1af)][0x0]:null;}if(_0x1b7768){console[_0x535f3a(0x1f3)]('ℹ️\x20Admin\x20user\x20already\x20exists\x20in\x20ranzirostore_loginadmin.');return;}const _0x36c374=process[_0x535f3a(0x20f)][_0x535f3a(0x201)];if(!_0x36c374){console[_0x535f3a(0x16d)](_0x535f3a(0x197));return;}const _0x3ec307=0xc,_0x32974a=await bcrypt[_0x535f3a(0x191)](String(_0x36c374),_0x3ec307),{data:_0xe1235f,error:_0x4be417}=await supabase[_0x535f3a(0x179)](_0x535f3a(0x1e1))[_0x535f3a(0x21e)]([{'username':_0x535f3a(0x1c7),'password_hash':_0x32974a,'role':_0x535f3a(0x1c7),'created_at':new Date()}])[_0x535f3a(0x1d9)]();_0x4be417?console[_0x535f3a(0x167)]('Failed\x20to\x20create\x20admin\x20in\x20ranzirostore_loginadmin:',_0x4be417):console[_0x535f3a(0x1f3)](_0x535f3a(0x1a2));}catch(_0x1e0fab){console['error'](_0x535f3a(0x1a0),_0x1e0fab&&_0x1e0fab['stack']?_0x1e0fab[_0x535f3a(0x225)]:_0x1e0fab);}}ensureAdminExists()['catch'](_0xf13bfc=>console['error'](a0_0x2766bc(0x194),_0xf13bfc)),apps[a0_0x2766bc(0x17b)](a0_0x2766bc(0x1bf),async(_0x2f9208,_0xa7a9ba)=>{const _0x2c0159=a0_0x2766bc;try{const {username:_0x220e36,password:_0x477a4c}=_0x2f9208['body']||{};if(!_0x220e36||!_0x477a4c)return _0xa7a9ba[_0x2c0159(0x19b)](0x190)[_0x2c0159(0x1e0)]({'success':![],'message':_0x2c0159(0x189)});if(String(_0x220e36)[_0x2c0159(0x193)]()!==_0x2c0159(0x1c7))return _0xa7a9ba[_0x2c0159(0x19b)](0x191)[_0x2c0159(0x1e0)]({'success':![],'message':_0x2c0159(0x196)});const {data:_0xeb3fd6,error:_0x725c8f}=await supabase['from'](_0x2c0159(0x1e1))['select']('*')['eq'](_0x2c0159(0x1b4),_0x2c0159(0x1c7))[_0x2c0159(0x1cd)](0x1)[_0x2c0159(0x208)]();if(_0x725c8f)return console['warn'](_0x2c0159(0x223),_0x725c8f),_0xa7a9ba[_0x2c0159(0x19b)](0x1f4)[_0x2c0159(0x1e0)]({'success':![],'message':_0x2c0159(0x1ca)});if(!_0xeb3fd6)return _0xa7a9ba[_0x2c0159(0x19b)](0x191)[_0x2c0159(0x1e0)]({'success':![],'message':'Invalid\x20credentials'});const _0x4d39b4=String(_0xeb3fd6[_0x2c0159(0x1d8)]||_0xeb3fd6['password']||'')[_0x2c0159(0x213)]();if(!_0x4d39b4)return console[_0x2c0159(0x167)](_0x2c0159(0x20a)),_0xa7a9ba['status'](0x1f4)[_0x2c0159(0x1e0)]({'success':![],'message':'Server\x20misconfigured'});const _0x4138b6=await bcrypt[_0x2c0159(0x16e)](String(_0x477a4c),_0x4d39b4);if(!_0x4138b6)return _0xa7a9ba[_0x2c0159(0x19b)](0x191)[_0x2c0159(0x1e0)]({'success':![],'message':'Invalid\x20credentials'});const _0x44d115=genToken(),_0x179e65=Date['now']()+0x18*0x3c*0x3c*0x3e8;sessions[_0x2c0159(0x1f9)](_0x44d115,{'user':_0x2c0159(0x1c7),'expiresAt':_0x179e65});const _0xb90384={'httpOnly':!![],'maxAge':0x18*0x3c*0x3c*0x3e8,'sameSite':_0x2c0159(0x18d),'secure':!![],'path':'/'};_0xa7a9ba[_0x2c0159(0x175)](_0x2c0159(0x1f8),_0x44d115,_0xb90384);try{await supabase[_0x2c0159(0x179)](_0x2c0159(0x1e1))[_0x2c0159(0x19a)]({'last_login':new Date()})['eq'](_0x2c0159(0x1b4),_0x2c0159(0x1c7));}catch(_0x4cb600){console[_0x2c0159(0x16d)](_0x2c0159(0x218),_0x4cb600);}return _0xa7a9ba[_0x2c0159(0x1e0)]({'success':!![]});}catch(_0x58ac7f){return console['error'](_0x2c0159(0x1a6),_0x58ac7f&&_0x58ac7f[_0x2c0159(0x225)]?_0x58ac7f[_0x2c0159(0x225)]:_0x58ac7f),_0xa7a9ba[_0x2c0159(0x19b)](0x1f4)['json']({'success':![],'message':_0x2c0159(0x1ca)});}}),apps['post'](a0_0x2766bc(0x1b7),(_0x1b8683,_0x583335)=>{const _0x31c7ba=a0_0x2766bc;try{const _0x1ab048=_0x1b8683[_0x31c7ba(0x1f1)]&&_0x1b8683[_0x31c7ba(0x1f1)][_0x31c7ba(0x1f8)];if(_0x1ab048)sessions[_0x31c7ba(0x1aa)](_0x1ab048);return _0x583335['clearCookie'](_0x31c7ba(0x1f8),{'path':'/'}),_0x583335[_0x31c7ba(0x1e0)]({'success':!![]});}catch(_0x6b70da){return console[_0x31c7ba(0x167)]('ERR\x20/api/logout',_0x6b70da),_0x583335[_0x31c7ba(0x19b)](0x1f4)[_0x31c7ba(0x1e0)]({'success':![],'message':'Internal\x20error'});}}),apps['get']('/api/check-session',requireAdmin,(_0x4a7f7a,_0x2b68a1)=>{const _0x5245f6=a0_0x2766bc;_0x2b68a1[_0x5245f6(0x1e0)]({'success':!![],'user':_0x4a7f7a[_0x5245f6(0x21d)]});});const escapeHtml=(_0x3fafa0='')=>String(_0x3fafa0)[a0_0x2766bc(0x1bb)](/[&<>"']/g,_0x3e8233=>({'&':a0_0x2766bc(0x1ae),'<':a0_0x2766bc(0x190),'>':'&gt;','\x22':a0_0x2766bc(0x16f),'\x27':a0_0x2766bc(0x1a9)}[_0x3e8233]));function a0_0x5f04(_0x5df3a3,_0xaf61a3){const _0x9475c7=a0_0x3447();return a0_0x5f04=function(_0x1be496,_0x5d21){_0x1be496=_0x1be496-0x165;let _0x402736=_0x9475c7[_0x1be496];if(a0_0x5f04['NZElrv']===undefined){var _0x3f527d=function(_0x5f0463){const _0x423947='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x469566='',_0x31f05e='',_0x435dd7=_0x469566+_0x3f527d;for(let _0x513769=0x0,_0x145676,_0x38151f,_0x532dec=0x0;_0x38151f=_0x5f0463['charAt'](_0x532dec++);~_0x38151f&&(_0x145676=_0x513769%0x4?_0x145676*0x40+_0x38151f:_0x38151f,_0x513769++%0x4)?_0x469566+=_0x435dd7['charCodeAt'](_0x532dec+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x145676>>(-0x2*_0x513769&0x6)):_0x513769:0x0){_0x38151f=_0x423947['indexOf'](_0x38151f);}for(let _0x193358=0x0,_0x3a9273=_0x469566['length'];_0x193358<_0x3a9273;_0x193358++){_0x31f05e+='%'+('00'+_0x469566['charCodeAt'](_0x193358)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x31f05e);};a0_0x5f04['xkYNSC']=_0x3f527d,_0x5df3a3=arguments,a0_0x5f04['NZElrv']=!![];}const _0x2f0cd5=_0x9475c7[0x0],_0x442910=_0x1be496+_0x2f0cd5,_0x344726=_0x5df3a3[_0x442910];if(!_0x344726){const _0x4c7aa3=function(_0x1c9a1f){this['AryaGz']=_0x1c9a1f,this['FixMxn']=[0x1,0x0,0x0],this['oVeYnK']=function(){return'newState';},this['nkYgDz']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['KkPIMY']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4c7aa3['prototype']['OiMpSK']=function(){const _0x5212c6=new RegExp(this['nkYgDz']+this['KkPIMY']),_0x179961=_0x5212c6['test'](this['oVeYnK']['toString']())?--this['FixMxn'][0x1]:--this['FixMxn'][0x0];return this['swRkgo'](_0x179961);},_0x4c7aa3['prototype']['swRkgo']=function(_0x2d8b7b){if(!Boolean(~_0x2d8b7b))return _0x2d8b7b;return this['SddJTj'](this['AryaGz']);},_0x4c7aa3['prototype']['SddJTj']=function(_0x1ffd15){for(let _0x1bd731=0x0,_0x4c657d=this['FixMxn']['length'];_0x1bd731<_0x4c657d;_0x1bd731++){this['FixMxn']['push'](Math['round'](Math['random']())),_0x4c657d=this['FixMxn']['length'];}return _0x1ffd15(this['FixMxn'][0x0]);},new _0x4c7aa3(a0_0x5f04)['OiMpSK'](),_0x402736=a0_0x5f04['xkYNSC'](_0x402736),_0x5df3a3[_0x442910]=_0x402736;}else _0x402736=_0x344726;return _0x402736;},a0_0x5f04(_0x5df3a3,_0xaf61a3);}apps[a0_0x2766bc(0x1f6)](a0_0x2766bc(0x1ec),async(_0x4d7d65,_0x3bfe81)=>{const _0x452c57=a0_0x2766bc;try{const _0x37a023=path[_0x452c57(0x1f7)](__dirname,_0x452c57(0x16c),_0x452c57(0x1a8));if(!fs[_0x452c57(0x1cf)](_0x37a023))return _0x3bfe81[_0x452c57(0x19b)](0x194)[_0x452c57(0x1db)](_0x452c57(0x1d7));let _0x37776b=fs[_0x452c57(0x185)](_0x37a023,'utf8');const _0x298940=_0x4d7d65[_0x452c57(0x21c)]+_0x452c57(0x1ff)+_0x4d7d65['get'](_0x452c57(0x1d6));let _0x836b6a=_0x452c57(0x183),_0x2061e2=_0x452c57(0x21b),_0x107a1d=_0x452c57(0x184);const _0x12f245=_0x4d7d65[_0x452c57(0x1ac)]['id']||_0x4d7d65[_0x452c57(0x1ac)][_0x452c57(0x18c)]||_0x4d7d65[_0x452c57(0x1ac)][_0x452c57(0x1c0)],_0x57323f=_0x4d7d65['query']['nama']||_0x4d7d65['query'][_0x452c57(0x22a)];if(_0x12f245){const {data:_0x4db2e0,error:_0x1f6ce9}=await supabase[_0x452c57(0x179)]('ranzirostore_akunml')[_0x452c57(0x1d9)]('*')['eq']('id',_0x12f245)[_0x452c57(0x1c5)]();if(!_0x1f6ce9&&_0x4db2e0){const _0x88f115=Array[_0x452c57(0x222)](_0x4db2e0[_0x452c57(0x199)])?_0x4db2e0[_0x452c57(0x199)]:typeof _0x4db2e0[_0x452c57(0x199)]===_0x452c57(0x1e5)?((()=>{const _0x3cf185=_0x452c57;try{return JSON[_0x3cf185(0x1df)](_0x4db2e0['gambars']);}catch(_0x21dc98){return[];}})()):[],_0x5534d0=_0x88f115&&_0x88f115[0x0]||_0x4db2e0[_0x452c57(0x1d5)];if(_0x5534d0)_0x836b6a=_0x5534d0[_0x452c57(0x200)]('http')?_0x5534d0:_0x298940+'/'+String(_0x5534d0)[_0x452c57(0x1bb)](/^\//,'');_0x2061e2=_0x4db2e0['nama']||_0x2061e2,_0x107a1d=_0x4db2e0[_0x452c57(0x21f)]||_0x107a1d;}}else{if(_0x57323f){const {data:_0x57138d,error:_0x492be6}=await supabase['from'](_0x452c57(0x1b2))['select']('*')[_0x452c57(0x172)](_0x452c57(0x212),'%'+_0x57323f+'%')[_0x452c57(0x1cd)](0x1);if(!_0x492be6&&Array[_0x452c57(0x222)](_0x57138d)&&_0x57138d[0x0]){const _0x45da29=_0x57138d[0x0],_0x5ab96e=Array[_0x452c57(0x222)](_0x45da29[_0x452c57(0x199)])?_0x45da29[_0x452c57(0x199)]:[],_0x357854=_0x5ab96e&&_0x5ab96e[0x0]||_0x45da29[_0x452c57(0x1d5)];if(_0x357854)_0x836b6a=_0x357854[_0x452c57(0x200)](_0x452c57(0x16a))?_0x357854:_0x298940+'/'+String(_0x357854)[_0x452c57(0x1bb)](/^\//,'');_0x2061e2=_0x45da29[_0x452c57(0x212)]||_0x2061e2,_0x107a1d=_0x45da29[_0x452c57(0x21f)]||_0x107a1d;}}}const _0x2c7592=(_0x1359d7='')=>String(_0x1359d7)['replace'](/[&<>"']/g,_0x5a90fc=>({'&':'&amp;','<':_0x452c57(0x190),'>':_0x452c57(0x20d),'\x22':_0x452c57(0x16f),'\x27':_0x452c57(0x1a9)}[_0x5a90fc]));_0x37776b=_0x37776b[_0x452c57(0x1bb)](/<meta[^>]+(property=(?:'|")og:|name=(?:'|")twitter:)[^>]*>/gi,''),_0x37776b=_0x37776b[_0x452c57(0x1bb)](/<link[^>]+rel=(?:'|")image_src(?:'|")[^>]*>/gi,''),_0x37776b=_0x37776b[_0x452c57(0x1bb)](/<meta[^>]+name=(?:'|")description(?:'|")[^>]*>/gi,''),_0x37776b=_0x37776b['replace'](/<title>[\s\S]*?<\/title>/i,'');const _0x295250=_0x298940+_0x4d7d65[_0x452c57(0x180)],_0x4dbc31=_0x452c57(0x1e4)+_0x2c7592(_0x2061e2)+_0x452c57(0x1e9)+_0x2c7592(_0x107a1d)+_0x452c57(0x1fe)+_0x2c7592(_0x2061e2)+_0x452c57(0x221)+_0x2c7592(_0x107a1d)+_0x452c57(0x1ea)+_0x836b6a+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<meta\x20property=\x22og:url\x22\x20content=\x22'+_0x295250+_0x452c57(0x219)+_0x2c7592(_0x2061e2)+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<meta\x20name=\x22twitter:description\x22\x20content=\x22'+_0x2c7592(_0x107a1d)+_0x452c57(0x1c8)+_0x836b6a+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<link\x20rel=\x22image_src\x22\x20href=\x22'+_0x836b6a+_0x452c57(0x17c);_0x37776b[_0x452c57(0x216)](_0x452c57(0x205))!==-0x1?_0x37776b=_0x37776b[_0x452c57(0x1bb)](_0x452c57(0x205),_0x4dbc31+_0x452c57(0x1e8)):_0x37776b=_0x4dbc31+'\x0a'+_0x37776b,_0x3bfe81['set'](_0x452c57(0x168),_0x452c57(0x1be)),_0x3bfe81[_0x452c57(0x1db)](_0x37776b);}catch(_0x91b5db){console[_0x452c57(0x167)](_0x452c57(0x1f4),_0x91b5db),_0x3bfe81[_0x452c57(0x229)](path[_0x452c57(0x1f7)](__dirname,'public','akun_ml.html'));}}),apps[a0_0x2766bc(0x1f6)](a0_0x2766bc(0x1d3),(_0x20b749,_0x373863)=>{const _0x57d16f=a0_0x2766bc;_0x373863[_0x57d16f(0x1e0)]({'ok':!![],'time':new Date()[_0x57d16f(0x1a1)]()});}),apps['get'](a0_0x2766bc(0x18a),async(_0x1ebe14,_0x3926ea)=>{const _0x200b4c=a0_0x2766bc;try{const {data:_0x44631c,error:_0x4e671f}=await supabase[_0x200b4c(0x179)]('ranzirostore_akunml')[_0x200b4c(0x1d9)]('*')['order']('id',{'ascending':![]});if(_0x4e671f)throw _0x4e671f;_0x3926ea['json']({'success':!![],'data':_0x44631c});}catch(_0x3aed3a){console[_0x200b4c(0x167)](_0x3aed3a),_0x3926ea[_0x200b4c(0x19b)](0x1f4)[_0x200b4c(0x1e0)]({'success':![],'error':_0x3aed3a['message']||_0x3aed3a});}}),apps[a0_0x2766bc(0x17b)](a0_0x2766bc(0x1ce),upload[a0_0x2766bc(0x207)](a0_0x2766bc(0x1d5),0xa),async(_0x4df44e,_0x521bdc)=>{const _0x9b9fdc=a0_0x2766bc;try{const {nama:_0x47157f,harga:_0x141d25,id_akun:_0x543145,deskripsi:_0x49acbb,rank:_0x7355e9,skin:_0x2303f5,hero:_0x445683,winrate:_0x49fbf3,pertandingan:_0x35a979,magic_core:_0x43e21e,emblem:_0x5b7d70,pribadi_beli:_0x5cb341,log:_0x592f49,bind:_0x1ae567}=_0x4df44e[_0x9b9fdc(0x1a7)],_0x10b4a1=_0x4df44e[_0x9b9fdc(0x1c2)]||[];if(!_0x47157f||!_0x141d25||!_0x543145)return _0x521bdc[_0x9b9fdc(0x19b)](0x190)[_0x9b9fdc(0x1e0)]({'success':![],'message':_0x9b9fdc(0x1c4)});const _0x141272=[];for(const _0x54613b of _0x10b4a1){const _0x51dbd2=path[_0x9b9fdc(0x182)](_0x54613b[_0x9b9fdc(0x1cc)])||'',_0x26c8a1=_0x9b9fdc(0x217)+Date[_0x9b9fdc(0x1fd)]()+'_'+Math[_0x9b9fdc(0x1cb)]()[_0x9b9fdc(0x1da)](0x24)[_0x9b9fdc(0x1e2)](0x2)+_0x51dbd2,_0x59b8ec=await supabase['storage'][_0x9b9fdc(0x179)](_0x9b9fdc(0x1d5))['upload'](_0x26c8a1,fs['createReadStream'](_0x54613b['path']),{'contentType':_0x54613b[_0x9b9fdc(0x20e)],'duplex':_0x9b9fdc(0x203)});try{fs[_0x9b9fdc(0x169)](_0x54613b[_0x9b9fdc(0x16b)]);}catch(_0x496f96){}if(_0x59b8ec[_0x9b9fdc(0x167)])throw _0x59b8ec[_0x9b9fdc(0x167)];const {data:_0x2a930f}=supabase[_0x9b9fdc(0x187)][_0x9b9fdc(0x179)](_0x9b9fdc(0x1d5))['getPublicUrl'](_0x26c8a1);_0x141272[_0x9b9fdc(0x18e)](_0x2a930f[_0x9b9fdc(0x17e)]);}const _0xd5479f=_0x141272[_0x9b9fdc(0x211)]?_0x141272[0x0]:null,_0xe1d6e9=_0x4df44e[_0x9b9fdc(0x1a7)][_0x9b9fdc(0x19b)],_0x7e5324=typeof _0xe1d6e9===_0x9b9fdc(0x1e5)?!['sold','false','0']['includes'](_0xe1d6e9[_0x9b9fdc(0x193)]()):Boolean(_0xe1d6e9),{data:_0x47a9b3,error:_0x5b873b}=await supabase[_0x9b9fdc(0x179)](_0x9b9fdc(0x1b2))[_0x9b9fdc(0x21e)]([{'nama':_0x47157f,'harga':_0x141d25,'id_akun':_0x543145,'deskripsi':_0x49acbb,'rank':_0x7355e9,'skin':_0x2303f5?parseInt(_0x2303f5):null,'hero':_0x445683?parseInt(_0x445683):null,'winrate':_0x49fbf3,'pertandingan':_0x35a979?parseInt(_0x35a979):null,'magic_core':_0x43e21e,'emblem':_0x5b7d70,'pribadi_beli':_0x5cb341,'log':_0x592f49,'bind':_0x1ae567,'gambar':_0xd5479f,'gambars':_0x141272,'status':_0x7e5324}])['select']();if(_0x5b873b)throw _0x5b873b;_0x521bdc[_0x9b9fdc(0x19b)](0xc9)[_0x9b9fdc(0x1e0)]({'success':!![],'data':_0x47a9b3});}catch(_0x1f7c5c){console['error'](_0x9b9fdc(0x1b1),_0x1f7c5c),_0x521bdc[_0x9b9fdc(0x19b)](0x1f4)[_0x9b9fdc(0x1e0)]({'success':![],'message':_0x1f7c5c[_0x9b9fdc(0x1e3)]||_0x1f7c5c});}}),apps['get'](a0_0x2766bc(0x173),async(_0x48a0c4,_0x42fe87)=>{const _0xc5a4ea=a0_0x2766bc;try{const {id:_0x54a2b2}=_0x48a0c4[_0xc5a4ea(0x186)],{data:_0x427ea6,error:_0xf27516}=await supabase[_0xc5a4ea(0x179)](_0xc5a4ea(0x1b2))[_0xc5a4ea(0x1d9)]('*')['eq']('id',_0x54a2b2)[_0xc5a4ea(0x1c5)]();if(_0xf27516)throw _0xf27516;_0x42fe87['json']({'success':!![],'data':_0x427ea6});}catch(_0x19c36e){console[_0xc5a4ea(0x167)](_0x19c36e),_0x42fe87[_0xc5a4ea(0x19b)](0x1f4)[_0xc5a4ea(0x1e0)]({'success':![],'message':_0x19c36e[_0xc5a4ea(0x1e3)]||_0x19c36e});}}),apps[a0_0x2766bc(0x17b)](a0_0x2766bc(0x177),upload[a0_0x2766bc(0x207)](a0_0x2766bc(0x1d5),0xa),async(_0xc1a6a1,_0x162e23)=>{const _0x2c08e3=a0_0x2766bc;try{const {id:_0x1a4f0e}=_0xc1a6a1[_0x2c08e3(0x186)],_0x4ae868=_0xc1a6a1[_0x2c08e3(0x1c2)]||[];if(!_0x4ae868[_0x2c08e3(0x211)])return _0x162e23[_0x2c08e3(0x19b)](0x190)[_0x2c08e3(0x1e0)]({'success':![],'message':_0x2c08e3(0x1a5)});const {data:_0x2e47d8,error:_0x552f83}=await supabase['from'](_0x2c08e3(0x1b2))[_0x2c08e3(0x1d9)]('gambars')['eq']('id',_0x1a4f0e)['single']();if(_0x552f83)throw _0x552f83;const _0x7dfe61=Array[_0x2c08e3(0x222)](_0x2e47d8[_0x2c08e3(0x199)])?_0x2e47d8[_0x2c08e3(0x199)]:[],_0x2bb86a=[];for(const _0x528b7d of _0x4ae868){const _0x36e395=path[_0x2c08e3(0x182)](_0x528b7d['originalname'])||'',_0x4cb0e7=_0x2c08e3(0x217)+Date[_0x2c08e3(0x1fd)]()+'_'+Math[_0x2c08e3(0x1cb)]()[_0x2c08e3(0x1da)](0x24)[_0x2c08e3(0x1e2)](0x2)+_0x36e395,_0x4ed29f=await supabase[_0x2c08e3(0x187)]['from'](_0x2c08e3(0x1d5))['upload'](_0x4cb0e7,fs['createReadStream'](_0x528b7d[_0x2c08e3(0x16b)]),{'contentType':_0x528b7d['mimetype'],'duplex':'half'});try{fs[_0x2c08e3(0x169)](_0x528b7d[_0x2c08e3(0x16b)]);}catch(_0x406bed){}if(_0x4ed29f['error'])throw _0x4ed29f[_0x2c08e3(0x167)];const {data:_0x1d45de}=supabase[_0x2c08e3(0x187)][_0x2c08e3(0x179)](_0x2c08e3(0x1d5))[_0x2c08e3(0x206)](_0x4cb0e7);_0x2bb86a[_0x2c08e3(0x18e)](_0x1d45de['publicUrl']);}const _0x144b84=_0x7dfe61['concat'](_0x2bb86a),_0x4cd501=_0x144b84[_0x2c08e3(0x211)]?_0x144b84[0x0]:null,{data:_0x43e4b1,error:_0x1ba333}=await supabase[_0x2c08e3(0x179)](_0x2c08e3(0x1b2))[_0x2c08e3(0x19a)]({'gambars':_0x144b84,'gambar':_0x4cd501,'updated_at':new Date()})['eq']('id',_0x1a4f0e)[_0x2c08e3(0x1d9)]();if(_0x1ba333)throw _0x1ba333;_0x162e23[_0x2c08e3(0x1e0)]({'success':!![],'data':_0x43e4b1});}catch(_0x447215){console[_0x2c08e3(0x167)](_0x447215),_0x162e23[_0x2c08e3(0x19b)](0x1f4)[_0x2c08e3(0x1e0)]({'success':![],'message':_0x447215[_0x2c08e3(0x1e3)]||_0x447215});}}),apps[a0_0x2766bc(0x1aa)](a0_0x2766bc(0x1b6),async(_0x1fda27,_0x52fa86)=>{const _0x1f6e7b=a0_0x2766bc;try{const {id:_0x1bf342,url:_0x12cf16}=_0x1fda27[_0x1f6e7b(0x1a7)];if(!_0x1bf342||!_0x12cf16)return _0x52fa86[_0x1f6e7b(0x19b)](0x190)['json']({'success':![],'message':_0x1f6e7b(0x1b8)});const {data:_0x447482,error:_0x3598b3}=await supabase['from'](_0x1f6e7b(0x1b2))[_0x1f6e7b(0x1d9)](_0x1f6e7b(0x199))['eq']('id',_0x1bf342)[_0x1f6e7b(0x1c5)]();if(_0x3598b3)throw _0x3598b3;const _0x291c37=Array[_0x1f6e7b(0x222)](_0x447482['gambars'])?_0x447482[_0x1f6e7b(0x199)]:[],_0x13e52a=_0x12cf16[_0x1f6e7b(0x181)]('/')[_0x1f6e7b(0x226)](),{error:_0x55ac3b}=await supabase[_0x1f6e7b(0x187)]['from']('gambar')[_0x1f6e7b(0x188)]([_0x13e52a]);_0x55ac3b&&console[_0x1f6e7b(0x16d)]('removeErr',_0x55ac3b[_0x1f6e7b(0x1e3)]||_0x55ac3b);const _0x5870cd=_0x291c37[_0x1f6e7b(0x215)](_0x5d9c32=>_0x5d9c32!==_0x12cf16),_0x433f90=_0x5870cd['length']?_0x5870cd[0x0]:null,{data:_0x1d615f,error:_0x642b6}=await supabase[_0x1f6e7b(0x179)](_0x1f6e7b(0x1b2))[_0x1f6e7b(0x19a)]({'gambars':_0x5870cd,'gambar':_0x433f90,'updated_at':new Date()})['eq']('id',_0x1bf342)['select']();if(_0x642b6)throw _0x642b6;_0x52fa86['json']({'success':!![],'data':_0x1d615f});}catch(_0x13c67f){console[_0x1f6e7b(0x167)](_0x13c67f),_0x52fa86['status'](0x1f4)[_0x1f6e7b(0x1e0)]({'success':![],'message':_0x13c67f['message']||_0x13c67f});}}),apps[a0_0x2766bc(0x1aa)](a0_0x2766bc(0x1fa),async(_0xd5629f,_0x291917)=>{const _0x4bf890=a0_0x2766bc;try{const {id:_0x4165a8}=_0xd5629f[_0x4bf890(0x186)],{data:_0x36e9e8,error:_0x297379}=await supabase[_0x4bf890(0x179)](_0x4bf890(0x1b2))[_0x4bf890(0x1d9)](_0x4bf890(0x199))['eq']('id',_0x4165a8)[_0x4bf890(0x1c5)]();if(_0x297379)throw _0x297379;const _0x18107a=Array[_0x4bf890(0x222)](_0x36e9e8[_0x4bf890(0x199)])?_0x36e9e8[_0x4bf890(0x199)]:[],_0x47ca39=_0x18107a[_0x4bf890(0x1d0)](_0x5cde54=>_0x5cde54[_0x4bf890(0x181)]('/')[_0x4bf890(0x226)]())['filter'](Boolean);if(_0x47ca39['length']){const {error:_0x940de7}=await supabase['storage'][_0x4bf890(0x179)]('gambar')[_0x4bf890(0x188)](_0x47ca39);if(_0x940de7)throw _0x940de7;}const {data:_0x397acf,error:_0x4709c0}=await supabase[_0x4bf890(0x179)]('ranzirostore_akunml')[_0x4bf890(0x19a)]({'gambars':[],'gambar':null,'updated_at':new Date()})['eq']('id',_0x4165a8)[_0x4bf890(0x1d9)]();if(_0x4709c0)throw _0x4709c0;_0x291917[_0x4bf890(0x1e0)]({'success':!![],'data':_0x397acf});}catch(_0x15f272){console[_0x4bf890(0x167)](_0x15f272),_0x291917[_0x4bf890(0x19b)](0x1f4)['json']({'success':![],'message':_0x15f272['message']||_0x15f272});}}),apps[a0_0x2766bc(0x1b9)]('/api/reorder_images/:id',async(_0x3c9c8c,_0x319a85)=>{const _0xf00bd9=a0_0x2766bc;try{const {id:_0xfa77c3}=_0x3c9c8c[_0xf00bd9(0x186)],{order:_0x3de313}=_0x3c9c8c[_0xf00bd9(0x1a7)];if(!Array[_0xf00bd9(0x222)](_0x3de313))return _0x319a85['status'](0x190)[_0xf00bd9(0x1e0)]({'success':![],'message':'order\x20harus\x20array\x20URL'});const _0x423da7=_0x3de313[_0xf00bd9(0x211)]?_0x3de313[0x0]:null,{data:_0x566490,error:_0x57a80b}=await supabase['from']('ranzirostore_akunml')[_0xf00bd9(0x19a)]({'gambars':_0x3de313,'gambar':_0x423da7,'updated_at':new Date()})['eq']('id',_0xfa77c3)['select']();if(_0x57a80b)throw _0x57a80b;_0x319a85[_0xf00bd9(0x1e0)]({'success':!![],'data':_0x566490});}catch(_0x6df855){console[_0xf00bd9(0x167)](_0x6df855),_0x319a85[_0xf00bd9(0x19b)](0x1f4)[_0xf00bd9(0x1e0)]({'success':![],'message':_0x6df855[_0xf00bd9(0x1e3)]||_0x6df855});}}),apps[a0_0x2766bc(0x1b9)](a0_0x2766bc(0x19f),async(_0x2c6dc3,_0x1e3b34)=>{const _0xed04c5=a0_0x2766bc;try{const {id:_0x186c8c}=_0x2c6dc3[_0xed04c5(0x186)],_0x39d7bb=_0x2c6dc3[_0xed04c5(0x1a7)]||{};_0x39d7bb[_0xed04c5(0x19b)]!==undefined&&(typeof _0x39d7bb[_0xed04c5(0x19b)]===_0xed04c5(0x1e5)?_0x39d7bb['status']=![_0xed04c5(0x220),'false','0']['includes'](_0x39d7bb[_0xed04c5(0x19b)][_0xed04c5(0x193)]()):_0x39d7bb[_0xed04c5(0x19b)]=Boolean(_0x39d7bb[_0xed04c5(0x19b)]));delete _0x39d7bb['id'];const {data:_0x179660,error:_0x3152e4}=await supabase['from'](_0xed04c5(0x1b2))[_0xed04c5(0x19a)]({..._0x39d7bb,'updated_at':new Date()})['eq']('id',_0x186c8c)[_0xed04c5(0x1d9)]();if(_0x3152e4)throw _0x3152e4;_0x1e3b34[_0xed04c5(0x1e0)]({'success':!![],'data':_0x179660});}catch(_0x31eb58){console[_0xed04c5(0x167)](_0x31eb58),_0x1e3b34[_0xed04c5(0x19b)](0x1f4)[_0xed04c5(0x1e0)]({'success':![],'message':_0x31eb58['message']||_0x31eb58});}}),apps[a0_0x2766bc(0x1aa)](a0_0x2766bc(0x1b5),async(_0x4575b8,_0x4abb03)=>{const _0x5330e3=a0_0x2766bc;try{const {id:_0x17bd79}=_0x4575b8[_0x5330e3(0x186)],{data:_0x516101,error:_0x57337f}=await supabase['from'](_0x5330e3(0x1b2))[_0x5330e3(0x1d9)]('gambars')['eq']('id',_0x17bd79)[_0x5330e3(0x1c5)]();if(_0x57337f)throw _0x57337f;const _0x54e4cf=(_0x516101[_0x5330e3(0x199)]||[])[_0x5330e3(0x1d0)](_0x4c2c62=>_0x4c2c62[_0x5330e3(0x181)]('/')['pop']())[_0x5330e3(0x215)](Boolean);if(_0x54e4cf['length']){const {error:_0x446c1f}=await supabase[_0x5330e3(0x187)][_0x5330e3(0x179)](_0x5330e3(0x1d5))['remove'](_0x54e4cf);if(_0x446c1f)throw _0x446c1f;}const {data:_0x5ae975,error:_0x4c4446}=await supabase[_0x5330e3(0x179)](_0x5330e3(0x1b2))[_0x5330e3(0x1aa)]()['eq']('id',_0x17bd79);if(_0x4c4446)throw _0x4c4446;_0x4abb03[_0x5330e3(0x1e0)]({'success':!![],'data':_0x5ae975});}catch(_0x3070f4){console[_0x5330e3(0x167)](_0x3070f4),_0x4abb03[_0x5330e3(0x19b)](0x1f4)[_0x5330e3(0x1e0)]({'success':![],'message':_0x3070f4[_0x5330e3(0x1e3)]||_0x3070f4});}}),apps[a0_0x2766bc(0x1f9)]('trust\x20proxy',0x1);const spaRoutes={'/mobile-legends':'index.html','/mobile-legends/*':a0_0x2766bc(0x1ad),'/login':a0_0x2766bc(0x171),'/admin':a0_0x2766bc(0x170),'/akun':a0_0x2766bc(0x1a8),'/akun/*':'akun_ml.html'};function sendPublicFile(_0x23b849,_0x35affe){const _0x2bedbe=a0_0x2766bc,_0x41cb43=path[_0x2bedbe(0x1f7)](__dirname,_0x2bedbe(0x16c),_0x35affe);return fs['existsSync'](_0x41cb43)?_0x23b849[_0x2bedbe(0x229)](_0x41cb43):_0x23b849['status'](0x194)['send']('Not\x20found');}Object['keys'](spaRoutes)[a0_0x2766bc(0x20b)](_0x18d627=>{const _0x2d7710=a0_0x2766bc;apps[_0x2d7710(0x1f6)](_0x18d627,(_0x5c9fc0,_0x4b2c1c)=>{const _0x4efec2=_0x2d7710;return _0x4b2c1c[_0x4efec2(0x1f9)](_0x4efec2(0x1c1),_0x4efec2(0x1fb)),sendPublicFile(_0x4b2c1c,spaRoutes[_0x18d627]);});});const port=process[a0_0x2766bc(0x20f)][a0_0x2766bc(0x1ef)]||0x849;apps[a0_0x2766bc(0x19d)](port,()=>{const _0x88b854=a0_0x2766bc;console['log'](_0x88b854(0x1c3)+port);});