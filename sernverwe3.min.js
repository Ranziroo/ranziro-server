const a0_0x24840a=a0_0x5cda;function a0_0x5cda(_0x1bac79,_0x3a330d){const _0x44c8dc=a0_0x3533();return a0_0x5cda=function(_0x53207d,_0x3203c8){_0x53207d=_0x53207d-0xbb;let _0x1bb8cd=_0x44c8dc[_0x53207d];if(a0_0x5cda['wpmyXh']===undefined){var _0x1a9454=function(_0x5cda7f){const _0x36b146='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x51abcd='',_0x41d0dc='',_0x1221a5=_0x51abcd+_0x1a9454;for(let _0x5f41d9=0x0,_0xdab3fb,_0x4f0d1f,_0xa0f443=0x0;_0x4f0d1f=_0x5cda7f['charAt'](_0xa0f443++);~_0x4f0d1f&&(_0xdab3fb=_0x5f41d9%0x4?_0xdab3fb*0x40+_0x4f0d1f:_0x4f0d1f,_0x5f41d9++%0x4)?_0x51abcd+=_0x1221a5['charCodeAt'](_0xa0f443+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0xdab3fb>>(-0x2*_0x5f41d9&0x6)):_0x5f41d9:0x0){_0x4f0d1f=_0x36b146['indexOf'](_0x4f0d1f);}for(let _0x7b47ff=0x0,_0xcad103=_0x51abcd['length'];_0x7b47ff<_0xcad103;_0x7b47ff++){_0x41d0dc+='%'+('00'+_0x51abcd['charCodeAt'](_0x7b47ff)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x41d0dc);};a0_0x5cda['ZrVpCP']=_0x1a9454,_0x1bac79=arguments,a0_0x5cda['wpmyXh']=!![];}const _0x21534f=_0x44c8dc[0x0],_0x314b3a=_0x53207d+_0x21534f,_0x353372=_0x1bac79[_0x314b3a];if(!_0x353372){const _0x4e27ea=function(_0x3762f7){this['IptluI']=_0x3762f7,this['rCoveY']=[0x1,0x0,0x0],this['jqTzoG']=function(){return'newState';},this['WenCUX']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['lznCzH']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4e27ea['prototype']['fRPRZu']=function(){const _0xe3ef36=new RegExp(this['WenCUX']+this['lznCzH']),_0x421e71=_0xe3ef36['test'](this['jqTzoG']['toString']())?--this['rCoveY'][0x1]:--this['rCoveY'][0x0];return this['OBCmqn'](_0x421e71);},_0x4e27ea['prototype']['OBCmqn']=function(_0x18db67){if(!Boolean(~_0x18db67))return _0x18db67;return this['AOeFCz'](this['IptluI']);},_0x4e27ea['prototype']['AOeFCz']=function(_0x32b8b1){for(let _0x6481a2=0x0,_0x3fb085=this['rCoveY']['length'];_0x6481a2<_0x3fb085;_0x6481a2++){this['rCoveY']['push'](Math['round'](Math['random']())),_0x3fb085=this['rCoveY']['length'];}return _0x32b8b1(this['rCoveY'][0x0]);},new _0x4e27ea(a0_0x5cda)['fRPRZu'](),_0x1bb8cd=a0_0x5cda['ZrVpCP'](_0x1bb8cd),_0x1bac79[_0x314b3a]=_0x1bb8cd;}else _0x1bb8cd=_0x353372;return _0x1bb8cd;},a0_0x5cda(_0x1bac79,_0x3a330d);}(function(_0x1d6a0b,_0x3a1f73){const _0x48e996=a0_0x5cda,_0x52f3d9=_0x1d6a0b();while(!![]){try{const _0x517fd0=-parseInt(_0x48e996(0xd7))/0x1+parseInt(_0x48e996(0xe4))/0x2+-parseInt(_0x48e996(0x116))/0x3+parseInt(_0x48e996(0xf5))/0x4*(-parseInt(_0x48e996(0x141))/0x5)+parseInt(_0x48e996(0xf4))/0x6*(parseInt(_0x48e996(0xe0))/0x7)+parseInt(_0x48e996(0x166))/0x8+-parseInt(_0x48e996(0x183))/0x9*(-parseInt(_0x48e996(0x149))/0xa);if(_0x517fd0===_0x3a1f73)break;else _0x52f3d9['push'](_0x52f3d9['shift']());}catch(_0x1ca28b){_0x52f3d9['push'](_0x52f3d9['shift']());}}}(a0_0x3533,0xb9096));const a0_0x314b3a=(function(){let _0x4f0d1f=!![];return function(_0xa0f443,_0x7b47ff){const _0xcad103=_0x4f0d1f?function(){const _0x682eb8=a0_0x5cda;if(_0x7b47ff){const _0x4e27ea=_0x7b47ff[_0x682eb8(0x106)](_0xa0f443,arguments);return _0x7b47ff=null,_0x4e27ea;}}:function(){};return _0x4f0d1f=![],_0xcad103;};}()),a0_0x21534f=a0_0x314b3a(this,function(){const _0x3a5515=a0_0x5cda;return a0_0x21534f[_0x3a5515(0xc7)]()[_0x3a5515(0x142)]('(((.+)+)+)+$')['toString']()['constructor'](a0_0x21534f)[_0x3a5515(0x142)](_0x3a5515(0x195));});a0_0x21534f();const a0_0x3203c8=(function(){let _0x3762f7=!![];return function(_0xe3ef36,_0x421e71){const _0x18db67=_0x3762f7?function(){const _0x50668a=a0_0x5cda;if(_0x421e71){const _0x32b8b1=_0x421e71[_0x50668a(0x106)](_0xe3ef36,arguments);return _0x421e71=null,_0x32b8b1;}}:function(){};return _0x3762f7=![],_0x18db67;};}()),a0_0x53207d=a0_0x3203c8(this,function(){const _0x22fef9=a0_0x5cda;let _0x6481a2;try{const _0x4f4702=Function(_0x22fef9(0x13c)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x6481a2=_0x4f4702();}catch(_0x26ed2c){_0x6481a2=window;}const _0x3fb085=_0x6481a2['console']=_0x6481a2[_0x22fef9(0x100)]||{},_0x6448a3=[_0x22fef9(0xe8),_0x22fef9(0x138),'info',_0x22fef9(0xfa),'exception','table','trace'];for(let _0x35e2eb=0x0;_0x35e2eb<_0x6448a3[_0x22fef9(0x134)];_0x35e2eb++){const _0x1aa0d1=a0_0x3203c8[_0x22fef9(0x181)][_0x22fef9(0xf7)]['bind'](a0_0x3203c8),_0x490232=_0x6448a3[_0x35e2eb],_0x49a654=_0x3fb085[_0x490232]||_0x1aa0d1;_0x1aa0d1[_0x22fef9(0x18d)]=a0_0x3203c8[_0x22fef9(0x125)](a0_0x3203c8),_0x1aa0d1[_0x22fef9(0xc7)]=_0x49a654['toString']['bind'](_0x49a654),_0x3fb085[_0x490232]=_0x1aa0d1;}});a0_0x53207d(),require(a0_0x24840a(0x157))[a0_0x24840a(0xdd)]();const express=require('express'),apps=express(),{createClient}=require(a0_0x24840a(0x16d)),crypto=require(a0_0x24840a(0x124)),cors=require(a0_0x24840a(0x144)),path=require(a0_0x24840a(0x152)),bodyParser=require(a0_0x24840a(0x12e)),multer=require('multer'),fs=require('fs'),cookieParser=require(a0_0x24840a(0xbd)),bcrypt=require(a0_0x24840a(0x135)),uploadsDir=path[a0_0x24840a(0x13b)](__dirname,a0_0x24840a(0x178));function a0_0x3533(){const _0x5a0232=['yMLUza','jMD0oW','ChvZAa','Aw5JBhvKzxm','ktS8l3nJCMLWDd4kpc9OzwfKpGO8yM9KEt5szwrPCMvJDgLUz+kaPJWVyM9KEt4kpc9ODg1SpG','C3rHy2S','qurnsu5FufC','C2vSzwn0','iJ4kpg1LDgeGChjVCgvYDhK9iM9NoNvYBciGy29UDgvUDd0I','yM9KEs1WyxjZzxi','4PYfiefKBwLUihvZzxiGy3jLyxrLzcbPBIbYyw56AxjVC3rVCMvFBg9NAw5Hzg1PBIaOCgfZC3DVCMqGAgfZAcbZDg9YzwqPlG','AwrFywT1BG','8j+AGcbtzxj2zxiGCNvUBMLUzYbVBIbODhrWoI8VBg9JywXOB3n0oG','sw50zxjUywWGzxjYB3i','C2vUzezPBgu','BgvUz3rO','yMnYExb0','BM8TC3rVCMu','l2fWAs9SB2DPBG','D2fYBG','ihWGuMfUEMLYBYbtDg9YztWVDgL0Bgu+cJXTzxrHig5HBwu9iMrLC2nYAxb0Aw9UiIbJB250zw50psi','C2v0','AM9PBG','CMv0DxjUicHMDw5JDgLVBIGPia','BMfTyq','l2HLywX0Aa','pcfKB2n0ExbLigH0BwW+cJXODg1SigXHBMC9iMLKiJ4kpgHLywq+cJXTzxrHignOyxjZzxq9iNv0zI04iJ4kpg1LDgeGBMfTzt0IDMLLD3bVCNqIignVBNrLBNq9iNDPzhrOpwrLDMLJzs13Awr0AcXPBML0AwfSlxnJywXLpteIpGO8DgL0Bgu+','ue9sva','mZy1uuziyuLH','C2vHCMnO','iIaVpGOGicaGica8BgLUAYbYzwW9iMLTywDLx3nYyYiGAhjLzJ0I','y29YCW','DhjPBq','CMfUzg9T','rgv0ywLSigfRDw4Gtw9IAwXLieXLz2vUzhmGzgKGuMfUEMLYBYbtDg9Yzq','BwfW','mtaYmZy2nZb5reHowNK','zgf0yq','p25HBwe9','CgfYC2u','cIaGicaGidX0AxrSzt4','CMfUEMLYB3n0B3jLx2XVz2LUywrTAw4','ChvIBgLJlcbTyxGTywDLptyW','jNf1B3q7','A2v5CW','Cgf0Aa','l2fWAs9Yzw9YzgvYx2LTywDLCY86Awq','vMfYEq','Ahr0CdOVl2XVy2fSAg9ZDdOYmtiX','DxbSB2fK','zg90zw52','CMfUEMLYB3n0B3jLx2fRDw5TBa','l2fWAs9KzwXFAw1Hz2vZlZPPza','C3rYAw5NAwz5','BgLZDgvU','iJ4kpg1LDgeGChjVCgvYDhK9iM9NoNr5CguIignVBNrLBNq9iNDLyNnPDguIpGO8Bwv0ysbWCM9Wzxj0Et0IB2C6DgL0BguIignVBNrLBNq9iG','zxHWAxjLC0f0','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6Aw1Hz2uIignVBNrLBNq9iG','l2fWAs9KzwXFAw1Hz2u','ywT1BL9TBc5ODg1S','BM93','yM9KEq','z2fTyMfYCW','CgfZC3DVCMrFAgfZAa','zMLSDgvY','mte0nJeXmNzuugXUDq','u1vqqujbu0vFs0vz','DxbKyxrL','zMLSzxm','B3jPz2LUywXUyw1L','ue9tvcaVyxbPl3bVC3rFywT1BL9KzxrHAwWGlt4','BMfTzq','qhn1CgfIyxnLl3n1CgfIyxnLlwPZ','y2XLyxjdB29RAwu','Dg9ju09tDhjPBMC','zgvSzxrL','z2v0','vgLKywSGywrHigzPBgu','B3jPz2LUywXvCMW','BwLTzxr5Cgu','yxjYyxK','rvjsic9HA3vUig1LDgeGAw5Qzwn0','u1vqqujbu0vFvvjm','DxbSB2fKCW','iJ4kpg1LDgeGChjVCgvYDhK9iM9NoMrLC2nYAxb0Aw9UiIbJB250zw50psi','Chv0','CMvTB3zLrxjY','l2fWAs91CgrFCMfUEMLYB3n0B3jLx2fRDw5TBc86Awq','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6zgvZy3jPChrPB24IignVBNrLBNq9iG','y2f0y2G','q29UDgvUDc1uExbL','Ahr0Ca','y29UC3rYDwn0B3i','ihWGuMfUEMLYBYbtDg9YztWVDgL0Bgu+cIaGicaGidXTzxrHig5HBwu9iMrLC2nYAxb0Aw9UiIbJB250zw50psi','owXdy0Pquq','BM9Uzq','zgvZA3jPChnP','C3rYAw5N','u3vWywjHC2uGzxjYB3iGB24GBg9NAw4GzMv0y2G6','mtbTyG','CxvLCNK','z2fTyMfY','C2XPy2u','y29VA2LLCW','x19WCM90B19F','ChvIBgLJvxjS','l3nOyxjLihn1CgfIyxnLigzLDgnOigzHAwXLza','C3rVCMfNzq','ywrTAw5FC2vZC2LVBG','u2vYDMvYigvYCM9Y','tM90igf1DgHVCML6zwq','C3rHDhvZ','kcGOlISPkYKRksSK','DxjSzw5JB2rLza','l3nOyxjL','BwvZC2fNzq','iJ4kpg1LDgeGBMfTzt0IDhDPDhrLCJPKzxnJCMLWDgLVBIiGy29UDgvUDd0I','l2fWAs9KzwXFCMfUEMLYB3n0B3jLx2fRDw5TBc86Awq','ywrTAw4','y29VA2LLlxbHCNnLCG','C2vUza','Dgv4Dc9ODg1SoYbJAgfYC2v0pxv0zI04','C3bSAxq','Agv4','DxnLCG','AxnbCNjHEq','rMfPBgvKihrVignYzwf0zsbHzg1PBIbPBIbYyw56AxjVC3rVCMvFBg9NAw5Hzg1PBJO','BgLTAxq','CMvHzezPBgvtEw5J','Dg9tDhjPBMC','CgfZC3DVCMq','oI8V','iJ4kphnJCMLWDd53Aw5KB3CUBg9JyxrPB24UCMvWBgfJzsG','C3rHDgLJ','4PQG77Ipifnvuefcqvnfx1vstcbHDgf1ifnvuefcqvnfx0Tfwsb0AwrHAYbKAxrLBxvRyw4GzgKGlMvUDI4GugfZDgLRyw4GDMfYAwfIzwWGzw52igrPC2v0igPPA2eGBwvUz2D1BMfRyw4Gu3vWywjHC2uU','ANnVBG','zxHPC3rZu3LUyW','AgfSzG','Bwf5yMvtAw5NBgu','tM90igzVDw5K','jMX0oW','ywrTAw4UAhrTBa','l2fWAs9SB2DVDxq','Cg9W','cJWVAgvHzd4','ndCXndK2AK9RtMDw','zw52','C29Sza','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMrLC2nYAxb0Aw9UiIbJB250zw50psi','z2v0uhvIBgLJvxjS','y3jLyxrLuMvHzfn0CMvHBq','y29UzMLN','AwXPA2u','zxH0BMfTzq','mta3mdq1nhLutuTXva','ywnJB3vUDf9Pza','C2LUz2XL','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6DxjSiIbJB250zw50psi','mJa5odq0nLnjDgv0va','Ag9ZDa','CMvWBgfJzq','DxnLCM5HBwuGjIbWyxnZD29YzcbYzxf1AxjLza','Bg9N','C3rHCNrZv2L0Aa','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMLTywDLiIbJB250zw50psi','rvjsic9HCgKVBg9NAw4','rvjsic9ZAgfYzq','ywT1BL8','l2fWAs9JAgvJAY1ZzxnZAw9U','q291BgqGBM90ihDYAxrLigXHC3rFBg9NAw46','Ahr0Chm6lY9SENLJCML3CxjJCwjPAwP0AwLWys5ZDxbHyMfZzs5JBY9ZDg9YywDLl3yXl29IAMvJDc9WDwjSAwmVz2fTyMfYl2XVz28VBwv0yv9Yyw56AxjVlNDLyNa','AwqGzgfUihvYBcbKAxbLCMX1A2fU','tM8GCgfZC3DVCMrFAgfZAcbMB3vUzcbMB3iGywrTAw4GCM93lG','zNjVBq','ntrfwKLyEw0','ndC5nJHlBKLlAvO','l2fWAs9Yyw56AxjVC3rVCMvFywT1BM1S','ChjVDg90ExbL','Aw5Zzxj0','CgfYyw1Z','zxjYB3i','ChvIBgLJ','l2fWAs9HA3vUx2rLDgfPBc86Awq','Ahr0Chm6lY9Yyw56AxjVlxnLCNzLCI1WCM9KDwn0Aw9UlNvWlNjHAwX3yxKUyxbW','CMvTB3zL','iJ4kpgXPBMSGCMvSpsjPBwfNzv9ZCMmIigHYzwy9iG','y29UC29Szq','y29TCgfYzq','pc9OzwfKpG','zw50CMLLCW','zw5ZDxjLqwrTAw5fEgLZDhmGzxjYB3i6','iIaVpGOGicaG','yxbWBhK','Bg9NAw4UAhrTBa','Aw5KzxHpzG','BwTKAxjtEw5J','zMfSC2u','BMfTysWGAgfYz2eSigLKx2fRDw4GD2fQAwiGzgLPC2K','u2vZC2LVBIbLEhbPCMvK','jImZotS','Dw5SAw5Ru3LUyW','y29Uy2f0','iJ4kpg1LDgeGBMfTzt0IDhDPDhrLCJPJyxjKiIbJB250zw50psjZDw1Tyxj5x2XHCMDLx2LTywDLiJ4kpg1LDgeGBMfTzt0IDhDPDhrLCJP0AxrSzsiGy29UDgvUDd0I','DxnL','jMfTCdS','Cg9ZDa','DxnLCM5HBwu','Aw5KzxGUAhrTBa','ndq2mJG5mhLeu0feyq','sw52ywXPzcbJCMvKzw50AwfSCW','4PQG77IpiefetuLox1bxig5VDcbZzxqGAw4Gzw52lIbtA2LWCgLUzYbJCMvHDgLUzYbHzg1PBIb1C2vYlIbtzxqGqurnsu5FufCGDg8Gyxv0BY1JCMvHDguGywrTAw4GyxqGC3rHCNr1Cc4','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6DhLWzsiGy29UDgvUDd0ID2vIC2L0zsiGlZ4kicaGicaGpg1LDgeGChjVCgvYDhK9iM9NoNrPDgXLiIbJB250zw50psi','l2fRDw4','Dg9mB3DLCKnHC2u','uMfUEMLYBYbtDg9YzsaTierLDgfPBcbbA3vU','tM90igfSBg93zwqGyNKGq09suW','ChjVDg9JB2W','q2fJAguTq29UDhjVBa','t3jPz2LU','B3jKzxi','iJ4kpg1LDgeGChjVCgvYDhK9iM9NoMLTywDLiIbJB250zw50psi','zw5ZDxjLqwrTAw5fEgLZDhmGzMfPBgvKoG','y3j5ChrV'];a0_0x3533=function(){return _0x5a0232;};return a0_0x3533();}!fs[a0_0x24840a(0xce)](uploadsDir)&&fs[a0_0x24840a(0x109)](uploadsDir,{'recursive':!![]});const upload=multer({'dest':uploadsDir}),allowedOrigins=[a0_0x24840a(0xfd),'https://ranzirostore.vercel.app',a0_0x24840a(0x155)];apps[a0_0x24840a(0x111)](cors({'origin':function(_0x24897f,_0x1c759){const _0x4a1326=a0_0x24840a;if(!_0x24897f)return _0x1c759(null,!![]);if(allowedOrigins[_0x4a1326(0x128)](_0x24897f))return _0x1c759(null,!![]);return _0x1c759(new Error(_0x4a1326(0x11d)));},'credentials':!![]})),apps[a0_0x24840a(0x111)]((_0x1c47b8,_0x172afb,_0x56a9ab)=>{const _0x5b8bc6=a0_0x24840a;_0x172afb[_0x5b8bc6(0x13a)](_0x5b8bc6(0x11f),_0x5b8bc6(0x136)),_0x56a9ab();}),apps[a0_0x24840a(0x111)](bodyParser[a0_0x24840a(0xcd)]({'limit':a0_0x24840a(0x188)})),apps['use'](bodyParser[a0_0x24840a(0x196)]({'extended':!![],'limit':a0_0x24840a(0x188)})),apps[a0_0x24840a(0x111)](cookieParser());(!process[a0_0x24840a(0xd8)][a0_0x24840a(0x177)]||!process['env'][a0_0x24840a(0x167)])&&console[a0_0x24840a(0x138)](a0_0x24840a(0xcc));const supabase=createClient(process[a0_0x24840a(0xd8)][a0_0x24840a(0x177)]||'',process['env'][a0_0x24840a(0x167)]||'');apps[a0_0x24840a(0x111)](express[a0_0x24840a(0xcb)](path[a0_0x24840a(0x13b)](__dirname,a0_0x24840a(0xfb))));const sessions=new Map();function genToken(){const _0x4ad418=a0_0x24840a;return crypto['randomBytes'](0x20)[_0x4ad418(0xc7)](_0x4ad418(0xc1));}setInterval(()=>{const _0x2fa0c4=a0_0x24840a;try{const _0x2b296b=Date[_0x2fa0c4(0x161)]();for(const [_0x34867d,_0x3a3108]of sessions[_0x2fa0c4(0x103)]()){if(!_0x3a3108||_0x3a3108[_0x2fa0c4(0x15d)]<=_0x2b296b)sessions['delete'](_0x34867d);}}catch(_0x5b6974){console[_0x2fa0c4(0x138)]('Session\x20cleanup\x20error',_0x5b6974);}},0x1e*0x3c*0x3e8);function requireAdmin(_0x4ccc95,_0x29eb27,_0x50fc57){const _0x49b3d5=a0_0x24840a;try{const _0x279b42=_0x4ccc95[_0x49b3d5(0x18c)]&&_0x4ccc95['cookies'][_0x49b3d5(0x191)];if(!_0x279b42)return _0x29eb27[_0x49b3d5(0x194)](0x191)[_0x49b3d5(0xcd)]({'success':![],'message':_0x49b3d5(0x193)});const _0x46d0d9=sessions['get'](_0x279b42);if(!_0x46d0d9)return _0x29eb27[_0x49b3d5(0x16e)](_0x49b3d5(0x191)),_0x29eb27[_0x49b3d5(0x194)](0x191)['json']({'success':![],'message':_0x49b3d5(0x193)});if(Date[_0x49b3d5(0x161)]()>_0x46d0d9[_0x49b3d5(0x15d)])return sessions[_0x49b3d5(0x170)](_0x279b42),_0x29eb27['clearCookie'](_0x49b3d5(0x191)),_0x29eb27['status'](0x191)[_0x49b3d5(0xcd)]({'success':![],'message':_0x49b3d5(0x10c)});_0x4ccc95[_0x49b3d5(0xc2)]=_0x46d0d9[_0x49b3d5(0xc2)],_0x50fc57();}catch(_0x3ee591){return _0x29eb27[_0x49b3d5(0x194)](0x191)['json']({'success':![],'message':'Not\x20authorized'});}}async function ensureAdminExists(){const _0x5e0ca2=a0_0x24840a;try{let _0x30209b;try{const _0x490b9d=await supabase[_0x5e0ca2(0xf3)](_0x5e0ca2(0x14e))['select']('*')['eq'](_0x5e0ca2(0x114),_0x5e0ca2(0xbc))['limit'](0x1)['maybeSingle']();_0x30209b=_0x490b9d&&_0x490b9d['data']!==undefined?_0x490b9d[_0x5e0ca2(0x14a)]:_0x490b9d;}catch(_0x1d3edc){const _0x519bb7=await supabase['from'](_0x5e0ca2(0x14e))[_0x5e0ca2(0x12c)]('*')['eq'](_0x5e0ca2(0x114),'admin')[_0x5e0ca2(0xc5)](0x1);_0x30209b=_0x519bb7&&_0x519bb7[_0x5e0ca2(0x14a)]&&_0x519bb7[_0x5e0ca2(0x14a)][_0x5e0ca2(0x134)]?_0x519bb7['data'][0x0]:null;}if(_0x30209b){console[_0x5e0ca2(0xe8)]('ℹ️\x20Admin\x20user\x20already\x20exists\x20in\x20ranzirostore_loginadmin.');return;}const _0x4d07c6=process['env'][_0x5e0ca2(0x12b)];if(!_0x4d07c6){console[_0x5e0ca2(0x138)](_0x5e0ca2(0x118));return;}const _0x4f1f82=0xc,_0x10d437=await bcrypt['hash'](String(_0x4d07c6),_0x4f1f82),{data:_0x5be1a7,error:_0x48f2e4}=await supabase[_0x5e0ca2(0xf3)]('ranzirostore_loginadmin')[_0x5e0ca2(0xf8)]([{'username':'admin','password_hash':_0x10d437,'role':'admin','created_at':new Date()}])['select']();_0x48f2e4?console[_0x5e0ca2(0xfa)](_0x5e0ca2(0xc4),_0x48f2e4):console['log'](_0x5e0ca2(0x12f));}catch(_0x596c5a){console['error'](_0x5e0ca2(0x104),_0x596c5a&&_0x596c5a['stack']?_0x596c5a[_0x5e0ca2(0x12a)]:_0x596c5a);}}ensureAdminExists()[a0_0x24840a(0x17e)](_0x5b1e75=>console['error'](a0_0x24840a(0x123),_0x5b1e75)),apps[a0_0x24840a(0x113)](a0_0x24840a(0x137),async(_0x3fe86e,_0x49b5d4)=>{const _0x431adc=a0_0x24840a;try{const {username:_0x1118e4,password:_0x2412bf}=_0x3fe86e['body']||{};if(!_0x1118e4||!_0x2412bf)return _0x49b5d4[_0x431adc(0x194)](0x190)[_0x431adc(0xcd)]({'success':![],'message':_0x431adc(0xe7)});if(String(_0x1118e4)[_0x431adc(0x11b)]()!==_0x431adc(0xbc))return _0x49b5d4[_0x431adc(0x194)](0x191)[_0x431adc(0xcd)]({'success':![],'message':'Invalid\x20credentials'});const {data:_0x349f18,error:_0x4a070f}=await supabase[_0x431adc(0xf3)](_0x431adc(0x14e))['select']('*')['eq'](_0x431adc(0x114),_0x431adc(0xbc))[_0x431adc(0xc5)](0x1)[_0x431adc(0xd0)]();if(_0x4a070f)return console[_0x431adc(0x138)](_0x431adc(0x187),_0x4a070f),_0x49b5d4[_0x431adc(0x194)](0x1f4)['json']({'success':![],'message':_0x431adc(0x132)});if(!_0x349f18)return _0x49b5d4['status'](0x191)[_0x431adc(0xcd)]({'success':![],'message':_0x431adc(0x117)});const _0x4bb4a8=String(_0x349f18[_0x431adc(0x164)]||_0x349f18[_0x431adc(0xc8)]||'')[_0x431adc(0x145)]();if(!_0x4bb4a8)return console['error'](_0x431adc(0xf2)),_0x49b5d4[_0x431adc(0x194)](0x1f4)[_0x431adc(0xcd)]({'success':![],'message':'Server\x20misconfigured'});const _0x99c3fc=await bcrypt[_0x431adc(0x101)](String(_0x2412bf),_0x4bb4a8);if(!_0x99c3fc)return _0x49b5d4[_0x431adc(0x194)](0x191)[_0x431adc(0xcd)]({'success':![],'message':_0x431adc(0x117)});const _0x5b29c3=genToken(),_0x207479=Date[_0x431adc(0x161)]()+0x18*0x3c*0x3c*0x3e8;sessions[_0x431adc(0x13a)](_0x5b29c3,{'user':_0x431adc(0xbc),'expiresAt':_0x207479});const _0x117bbc={'httpOnly':!![],'maxAge':0x18*0x3c*0x3c*0x3e8,'sameSite':_0x431adc(0x184),'secure':!![],'path':'/'};_0x49b5d4['cookie'](_0x431adc(0x191),_0x5b29c3,_0x117bbc);try{await supabase[_0x431adc(0xf3)](_0x431adc(0x14e))['update']({'last_login':new Date()})['eq'](_0x431adc(0x114),_0x431adc(0xbc));}catch(_0x3f0d2d){console[_0x431adc(0x138)](_0x431adc(0xef),_0x3f0d2d);}return _0x49b5d4['json']({'success':!![]});}catch(_0x4e58f0){return console[_0x431adc(0xfa)](_0x431adc(0xeb),_0x4e58f0&&_0x4e58f0['stack']?_0x4e58f0['stack']:_0x4e58f0),_0x49b5d4[_0x431adc(0x194)](0x1f4)[_0x431adc(0xcd)]({'success':![],'message':_0x431adc(0x132)});}}),apps['post'](a0_0x24840a(0xd4),(_0x32bdb4,_0x3d0a5f)=>{const _0x175b18=a0_0x24840a;try{const _0x52eda1=_0x32bdb4['cookies']&&_0x32bdb4[_0x175b18(0x18c)]['admin_session'];if(_0x52eda1)sessions['delete'](_0x52eda1);return _0x3d0a5f['clearCookie'](_0x175b18(0x191),{'path':'/'}),_0x3d0a5f['json']({'success':!![]});}catch(_0x413c1f){return console[_0x175b18(0xfa)]('ERR\x20/api/logout',_0x413c1f),_0x3d0a5f[_0x175b18(0x194)](0x1f4)[_0x175b18(0xcd)]({'success':![],'message':_0x175b18(0x132)});}}),apps[a0_0x24840a(0x171)](a0_0x24840a(0xee),requireAdmin,(_0xa037f2,_0x436b56)=>{const _0x906ea=a0_0x24840a;_0x436b56[_0x906ea(0xcd)]({'success':!![],'user':_0xa037f2['user']});});const escapeHtml=(_0xdb3370='')=>String(_0xdb3370)[a0_0x24840a(0xe6)](/[&<>"']/g,_0xf6efde=>({'&':a0_0x24840a(0x112),'<':a0_0x24840a(0xd2),'>':a0_0x24840a(0x126),'\x22':a0_0x24840a(0x150),'\x27':a0_0x24840a(0x10d)}[_0xf6efde]));apps['get']('/akun',async(_0x306f43,_0xd30b06)=>{const _0x2be35d=a0_0x24840a;try{const _0x433c67=path[_0x2be35d(0x13b)](__dirname,_0x2be35d(0xfb),'akun_ml.html');if(!fs[_0x2be35d(0xce)](_0x433c67))return _0xd30b06['status'](0x194)[_0x2be35d(0xbe)](_0x2be35d(0xd1));let _0x1cf4c9=fs[_0x2be35d(0xc6)](_0x433c67,'utf8');const _0x49ed31=_0x306f43[_0x2be35d(0x11e)]+_0x2be35d(0xc9)+_0x306f43[_0x2be35d(0x171)](_0x2be35d(0xe5));let _0x54a5ce=_0x2be35d(0xf0),_0x11aca0=_0x2be35d(0x11c),_0x38def3=_0x2be35d(0x147);const _0x531074=_0x306f43['query']['id']||_0x306f43[_0x2be35d(0x189)][_0x2be35d(0x130)]||_0x306f43['query'][_0x2be35d(0xe1)],_0x5364f1=_0x306f43[_0x2be35d(0x189)][_0x2be35d(0x13d)]||_0x306f43['query'][_0x2be35d(0x16c)];if(_0x531074){const {data:_0x2dfc37,error:_0x364585}=await supabase[_0x2be35d(0xf3)](_0x2be35d(0x158))[_0x2be35d(0x12c)]('*')['eq']('id',_0x531074)['single']();if(!_0x364585&&_0x2dfc37){const _0x57e03b=Array[_0x2be35d(0xc3)](_0x2dfc37[_0x2be35d(0x163)])?_0x2dfc37['gambars']:typeof _0x2dfc37[_0x2be35d(0x163)]===_0x2be35d(0x186)?((()=>{const _0x2e1e8d=_0x2be35d;try{return JSON[_0x2e1e8d(0x14c)](_0x2dfc37['gambars']);}catch(_0x41fc3b){return[];}})()):[],_0x9279cf=_0x57e03b&&_0x57e03b[0x0]||_0x2dfc37[_0x2be35d(0x18a)];if(_0x9279cf)_0x54a5ce=_0x9279cf[_0x2be35d(0xe9)](_0x2be35d(0x180))?_0x9279cf:_0x49ed31+'/'+String(_0x9279cf)['replace'](/^\//,'');_0x11aca0=_0x2dfc37[_0x2be35d(0x13d)]||_0x11aca0,_0x38def3=_0x2dfc37['deskripsi']||_0x38def3;}}else{if(_0x5364f1){const {data:_0x554212,error:_0x2a6f4f}=await supabase[_0x2be35d(0xf3)]('ranzirostore_akunml')[_0x2be35d(0x12c)]('*')['ilike'](_0x2be35d(0x13d),'%'+_0x5364f1+'%')[_0x2be35d(0xc5)](0x1);if(!_0x2a6f4f&&Array[_0x2be35d(0xc3)](_0x554212)&&_0x554212[0x0]){const _0x236143=_0x554212[0x0],_0x2bd89d=Array['isArray'](_0x236143[_0x2be35d(0x163)])?_0x236143[_0x2be35d(0x163)]:[],_0x3e2a0a=_0x2bd89d&&_0x2bd89d[0x0]||_0x236143[_0x2be35d(0x18a)];if(_0x3e2a0a)_0x54a5ce=_0x3e2a0a[_0x2be35d(0xe9)](_0x2be35d(0x180))?_0x3e2a0a:_0x49ed31+'/'+String(_0x3e2a0a)['replace'](/^\//,'');_0x11aca0=_0x236143[_0x2be35d(0x13d)]||_0x11aca0,_0x38def3=_0x236143[_0x2be35d(0x185)]||_0x38def3;}}}_0x1cf4c9=_0x1cf4c9['replace'](/<meta[^>]+(property=(?:'|")og:|name=(?:'|")twitter:)[^>]*>/gi,''),_0x1cf4c9=_0x1cf4c9[_0x2be35d(0xe6)](/<link[^>]+rel=(?:'|")image_src(?:'|")[^>]*>/gi,''),_0x1cf4c9=_0x1cf4c9[_0x2be35d(0xe6)](/<meta[^>]+name=(?:'|")description(?:'|")[^>]*>/gi,''),_0x1cf4c9=_0x1cf4c9[_0x2be35d(0xe6)](/<title>[\s\S]*?<\/title>/i,'');const _0x1ac298=_0x49ed31+_0x306f43[_0x2be35d(0x173)],_0x4018d6=_0x2be35d(0x14d)+escapeHtml(_0x11aca0)+_0x2be35d(0x182)+escapeHtml(_0x38def3)+_0x2be35d(0x119)+escapeHtml(_0x11aca0)+_0x2be35d(0x17d)+escapeHtml(_0x38def3)+_0x2be35d(0x15e)+_0x54a5ce+_0x2be35d(0xe3)+_0x1ac298+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<meta\x20name=\x22twitter:card\x22\x20content=\x22summary_large_image\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<meta\x20name=\x22twitter:title\x22\x20content=\x22'+escapeHtml(_0x11aca0)+_0x2be35d(0xda)+escapeHtml(_0x38def3)+_0x2be35d(0xea)+_0x54a5ce+_0x2be35d(0x143)+_0x54a5ce+_0x2be35d(0x105);_0x1cf4c9[_0x2be35d(0x108)](_0x2be35d(0x102))!==-0x1?_0x1cf4c9=_0x1cf4c9[_0x2be35d(0xe6)](_0x2be35d(0x102),_0x4018d6+_0x2be35d(0xd6)):_0x1cf4c9=_0x4018d6+'\x0a'+_0x1cf4c9,_0xd30b06['set']('Cache-Control',_0x2be35d(0x14f)),_0xd30b06[_0x2be35d(0x13a)]('Content-Type','text/html;\x20charset=utf-8'),_0xd30b06[_0x2be35d(0xbe)](_0x1cf4c9);}catch(_0x444c8f){console[_0x2be35d(0xfa)](_0x2be35d(0x176),_0x444c8f),_0xd30b06[_0x2be35d(0x133)](path[_0x2be35d(0x13b)](__dirname,_0x2be35d(0xfb),_0x2be35d(0x160)));}}),apps['get'](a0_0x24840a(0x197),async(_0x5529d8,_0x4a17f7)=>{const _0x3ecbef=a0_0x24840a;try{const _0x3f03bb=_0x5529d8[_0x3ecbef(0x189)]['id'],_0x5da567=_0x5529d8['query']['nama'],_0x3043aa=_0x5529d8[_0x3ecbef(0x11e)]+_0x3ecbef(0xc9)+_0x5529d8[_0x3ecbef(0x171)](_0x3ecbef(0xe5));let _0x31334a=_0x3ecbef(0x11c),_0x7c145f=_0x3ecbef(0x147),_0x1f161d=_0x3043aa+'/logo/meta_ranziro.webp';if(_0x3f03bb||_0x5da567)try{let _0x474d0b=supabase[_0x3ecbef(0xf3)](_0x3ecbef(0x158))['select']('*')['limit'](0x1),_0x3c60d;if(_0x3f03bb)_0x3c60d=await _0x474d0b['eq']('id',_0x3f03bb);else _0x3c60d=await _0x474d0b[_0x3ecbef(0xde)](_0x3ecbef(0x13d),'%'+_0x5da567+'%');const _0x437d93=Array['isArray'](_0x3c60d[_0x3ecbef(0x14a)])&&_0x3c60d[_0x3ecbef(0x14a)][0x0]?_0x3c60d[_0x3ecbef(0x14a)][0x0]:_0x3c60d[_0x3ecbef(0x14a)]||null;if(_0x437d93){_0x31334a=_0x437d93[_0x3ecbef(0x13d)]||_0x31334a,_0x7c145f=_0x437d93[_0x3ecbef(0x185)]||_0x7c145f;const _0x1394f4=Array['isArray'](_0x437d93[_0x3ecbef(0x163)])?_0x437d93['gambars']:typeof _0x437d93[_0x3ecbef(0x163)]===_0x3ecbef(0x186)?((()=>{const _0x12e092=_0x3ecbef;try{return JSON[_0x12e092(0x14c)](_0x437d93['gambars']);}catch(_0x2bf266){return[];}})()):[],_0x497458=_0x1394f4&&_0x1394f4[0x0]||_0x437d93[_0x3ecbef(0x18a)]||null;if(_0x497458)_0x1f161d=_0x497458['startsWith'](_0x3ecbef(0x180))?_0x497458:_0x3043aa+'/'+String(_0x497458)[_0x3ecbef(0xe6)](/^\//,'');}}catch(_0x4dc119){console['warn'](_0x3ecbef(0x18f),_0x4dc119);}const _0x4e2398=_0x3043aa+_0x3ecbef(0x11a)+(_0x3f03bb?'?id='+encodeURIComponent(_0x3f03bb):_0x5da567?_0x3ecbef(0x14b)+encodeURIComponent(_0x5da567):''),_0x15ebc7=_0xddb5c6=>String(_0xddb5c6||'')[_0x3ecbef(0xe6)](/[&<>"']/g,_0xf86efa=>({'&':'&amp;','<':_0x3ecbef(0xd2),'>':'&gt;','\x22':'&quot;','\x27':_0x3ecbef(0x10d)}[_0xf86efa])),_0x520275=_0x3ecbef(0x13f)+_0x15ebc7(_0x31334a)+_0x3ecbef(0x139)+_0x15ebc7(_0x7c145f)+_0x3ecbef(0x15c)+_0x15ebc7(_0x31334a)+_0x3ecbef(0x179)+_0x15ebc7(_0x7c145f)+_0x3ecbef(0x122)+_0x15ebc7(_0x1f161d)+_0x3ecbef(0x12d)+_0x15ebc7(_0x4e2398)+_0x3ecbef(0x110)+_0x15ebc7(_0x31334a)+_0x3ecbef(0x199)+_0x15ebc7(_0x7c145f)+'\x22>\x0a<meta\x20name=\x22twitter:image\x22\x20content=\x22'+_0x15ebc7(_0x1f161d)+_0x3ecbef(0xff)+_0x15ebc7(_0x1f161d)+'\x22>\x0a<meta\x20http-equiv=\x22refresh\x22\x20content=\x220;\x20url='+_0x15ebc7(_0x4e2398)+_0x3ecbef(0xca)+JSON[_0x3ecbef(0x15a)](_0x4e2398)+_0x3ecbef(0x129);return _0x4a17f7['set'](_0x3ecbef(0x11f),'public,\x20max-age=60'),_0x4a17f7['set'](_0x3ecbef(0x17f),_0x3ecbef(0xbf)),_0x4a17f7[_0x3ecbef(0xbe)](_0x520275);}catch(_0x18db68){return console[_0x3ecbef(0xfa)](_0x3ecbef(0xec),_0x18db68),_0x4a17f7[_0x3ecbef(0x194)](0x1f4)[_0x3ecbef(0xbe)](_0x3ecbef(0x192));}}),apps[a0_0x24840a(0x171)](a0_0x24840a(0x13e),(_0x201cad,_0x5145c7)=>{const _0x1da421=a0_0x24840a;_0x5145c7[_0x1da421(0xcd)]({'ok':!![],'time':new Date()[_0x1da421(0x16f)]()});}),apps[a0_0x24840a(0x171)](a0_0x24840a(0xf6),async(_0x426df0,_0x5a96af)=>{const _0xf55d00=a0_0x24840a;try{const {data:_0x3cfba2,error:_0x20ab28}=await supabase[_0xf55d00(0xf3)](_0xf55d00(0x158))[_0xf55d00(0x12c)]('*')[_0xf55d00(0x121)]('id',{'ascending':![]});if(_0x20ab28)throw _0x20ab28;_0x5a96af[_0xf55d00(0xcd)]({'success':!![],'data':_0x3cfba2});}catch(_0x40255e){console[_0xf55d00(0xfa)](_0x40255e),_0x5a96af[_0xf55d00(0x194)](0x1f4)['json']({'success':![],'error':_0x40255e['message']||_0x40255e});}}),apps[a0_0x24840a(0x113)]('/api/post_akun_detail',upload[a0_0x24840a(0x175)](a0_0x24840a(0x18a),0xa),async(_0x48b4e4,_0x59bfab)=>{const _0x5897cc=a0_0x24840a;try{const {nama:_0x37152d,harga:_0x1a9e04,id_akun:_0x27a519,deskripsi:_0x1b82d3,rank:_0x43da7f,skin:_0x3933e9,hero:_0x544806,winrate:_0x1e1ac3,pertandingan:_0x289417,magic_core:_0x3b3dac,emblem:_0x4ea2f8,pribadi_beli:_0x5640c3,log:_0x5d1e2b,bind:_0x54f034}=_0x48b4e4[_0x5897cc(0x162)],_0xc99106=_0x48b4e4[_0x5897cc(0x169)]||[];if(!_0x37152d||!_0x1a9e04||!_0x27a519)return _0x59bfab[_0x5897cc(0x194)](0x190)[_0x5897cc(0xcd)]({'success':![],'message':_0x5897cc(0x10b)});const _0xa2261d=[];for(const _0x15a86e of _0xc99106){const _0x2eda8a=path[_0x5897cc(0xdf)](_0x15a86e[_0x5897cc(0x16a)])||'',_0xea87fc=_0x5897cc(0xed)+Date[_0x5897cc(0x161)]()+'_'+Math[_0x5897cc(0x146)]()[_0x5897cc(0xc7)](0x24)[_0x5897cc(0x18b)](0x2)+_0x2eda8a,_0x543919=await supabase[_0x5897cc(0x190)][_0x5897cc(0xf3)](_0x5897cc(0x18a))[_0x5897cc(0x156)](_0xea87fc,fs['createReadStream'](_0x15a86e[_0x5897cc(0x152)]),{'contentType':_0x15a86e[_0x5897cc(0x174)],'duplex':_0x5897cc(0xcf)});try{fs[_0x5897cc(0x10e)](_0x15a86e[_0x5897cc(0x152)]);}catch(_0x104dba){}if(_0x543919[_0x5897cc(0xfa)])throw _0x543919[_0x5897cc(0xfa)];const {data:_0x2d0b7e}=supabase[_0x5897cc(0x190)][_0x5897cc(0xf3)](_0x5897cc(0x18a))[_0x5897cc(0xdb)](_0xea87fc);_0xa2261d[_0x5897cc(0x127)](_0x2d0b7e['publicUrl']);}const _0x46682e=_0xa2261d[_0x5897cc(0x134)]?_0xa2261d[0x0]:null,_0x15c810=_0x48b4e4[_0x5897cc(0x162)][_0x5897cc(0x194)],_0x4e084a=typeof _0x15c810===_0x5897cc(0x186)?![_0x5897cc(0xd9),_0x5897cc(0x10a),'0'][_0x5897cc(0x128)](_0x15c810['toLowerCase']()):Boolean(_0x15c810),{data:_0x4f3590,error:_0x4a11e3}=await supabase[_0x5897cc(0xf3)](_0x5897cc(0x158))['insert']([{'nama':_0x37152d,'harga':_0x1a9e04,'id_akun':_0x27a519,'deskripsi':_0x1b82d3,'rank':_0x43da7f,'skin':_0x3933e9?parseInt(_0x3933e9):null,'hero':_0x544806?parseInt(_0x544806):null,'winrate':_0x1e1ac3,'pertandingan':_0x289417?parseInt(_0x289417):null,'magic_core':_0x3b3dac,'emblem':_0x4ea2f8,'pribadi_beli':_0x5640c3,'log':_0x5d1e2b,'bind':_0x54f034,'gambar':_0x46682e,'gambars':_0xa2261d,'status':_0x4e084a}])[_0x5897cc(0x12c)]();if(_0x4a11e3)throw _0x4a11e3;_0x59bfab[_0x5897cc(0x194)](0xc9)[_0x5897cc(0xcd)]({'success':!![],'data':_0x4f3590});}catch(_0x40a03c){console[_0x5897cc(0xfa)](_0x5897cc(0x16b),_0x40a03c),_0x59bfab[_0x5897cc(0x194)](0x1f4)[_0x5897cc(0xcd)]({'success':![],'message':_0x40a03c[_0x5897cc(0x198)]||_0x40a03c});}}),apps[a0_0x24840a(0x171)](a0_0x24840a(0xfc),async(_0x5128ec,_0x4c1bf2)=>{const _0x2118f9=a0_0x24840a;try{const {id:_0x2e294e}=_0x5128ec[_0x2118f9(0xf9)],{data:_0x1a30c8,error:_0x32107c}=await supabase[_0x2118f9(0xf3)](_0x2118f9(0x158))[_0x2118f9(0x12c)]('*')['eq']('id',_0x2e294e)[_0x2118f9(0xe2)]();if(_0x32107c)throw _0x32107c;_0x4c1bf2[_0x2118f9(0xcd)]({'success':!![],'data':_0x1a30c8});}catch(_0x46fd03){console[_0x2118f9(0xfa)](_0x46fd03),_0x4c1bf2[_0x2118f9(0x194)](0x1f4)[_0x2118f9(0xcd)]({'success':![],'message':_0x46fd03[_0x2118f9(0x198)]||_0x46fd03});}}),apps['post']('/api/upload_images/:id',upload[a0_0x24840a(0x175)](a0_0x24840a(0x18a),0xa),async(_0xc48282,_0x57bed4)=>{const _0x25f0e9=a0_0x24840a;try{const {id:_0x579d2c}=_0xc48282[_0x25f0e9(0xf9)],_0x1d216d=_0xc48282[_0x25f0e9(0x169)]||[];if(!_0x1d216d[_0x25f0e9(0x134)])return _0x57bed4['status'](0x190)['json']({'success':![],'message':_0x25f0e9(0x172)});const {data:_0x226de3,error:_0x2cbeed}=await supabase['from'](_0x25f0e9(0x158))[_0x25f0e9(0x12c)](_0x25f0e9(0x163))['eq']('id',_0x579d2c)[_0x25f0e9(0xe2)]();if(_0x2cbeed)throw _0x2cbeed;const _0x110d28=Array[_0x25f0e9(0xc3)](_0x226de3[_0x25f0e9(0x163)])?_0x226de3[_0x25f0e9(0x163)]:[],_0x5a8a1e=[];for(const _0x3fa815 of _0x1d216d){const _0x1616be=path[_0x25f0e9(0xdf)](_0x3fa815[_0x25f0e9(0x16a)])||'',_0x575d4d=_0x25f0e9(0xed)+Date[_0x25f0e9(0x161)]()+'_'+Math['random']()[_0x25f0e9(0xc7)](0x24)[_0x25f0e9(0x18b)](0x2)+_0x1616be,_0x47eb41=await supabase[_0x25f0e9(0x190)][_0x25f0e9(0xf3)]('gambar')[_0x25f0e9(0x156)](_0x575d4d,fs[_0x25f0e9(0xdc)](_0x3fa815[_0x25f0e9(0x152)]),{'contentType':_0x3fa815[_0x25f0e9(0x174)],'duplex':'half'});try{fs[_0x25f0e9(0x10e)](_0x3fa815[_0x25f0e9(0x152)]);}catch(_0x52943d){}if(_0x47eb41[_0x25f0e9(0xfa)])throw _0x47eb41['error'];const {data:_0x2155a7}=supabase[_0x25f0e9(0x190)][_0x25f0e9(0xf3)](_0x25f0e9(0x18a))[_0x25f0e9(0xdb)](_0x575d4d);_0x5a8a1e[_0x25f0e9(0x127)](_0x2155a7[_0x25f0e9(0x18e)]);}const _0x225dd4=_0x110d28[_0x25f0e9(0x10f)](_0x5a8a1e),_0x4cba5b=_0x225dd4[_0x25f0e9(0x134)]?_0x225dd4[0x0]:null,{data:_0x530376,error:_0x5d2eef}=await supabase[_0x25f0e9(0xf3)](_0x25f0e9(0x158))['update']({'gambars':_0x225dd4,'gambar':_0x4cba5b,'updated_at':new Date()})['eq']('id',_0x579d2c)['select']();if(_0x5d2eef)throw _0x5d2eef;_0x57bed4[_0x25f0e9(0xcd)]({'success':!![],'data':_0x530376});}catch(_0x49022d){console[_0x25f0e9(0xfa)](_0x49022d),_0x57bed4[_0x25f0e9(0x194)](0x1f4)[_0x25f0e9(0xcd)]({'success':![],'message':_0x49022d[_0x25f0e9(0x198)]||_0x49022d});}}),apps[a0_0x24840a(0x170)](a0_0x24840a(0x15f),async(_0x202634,_0x1353c6)=>{const _0x185088=a0_0x24840a;try{const {id:_0x413c70,url:_0x2b2b88}=_0x202634[_0x185088(0x162)];if(!_0x413c70||!_0x2b2b88)return _0x1353c6['status'](0x190)['json']({'success':![],'message':_0x185088(0xf1)});const {data:_0x41a7ee,error:_0x5d77a0}=await supabase[_0x185088(0xf3)](_0x185088(0x158))[_0x185088(0x12c)](_0x185088(0x163))['eq']('id',_0x413c70)[_0x185088(0xe2)]();if(_0x5d77a0)throw _0x5d77a0;const _0x1e320d=Array[_0x185088(0xc3)](_0x41a7ee[_0x185088(0x163)])?_0x41a7ee[_0x185088(0x163)]:[],_0x2af902=_0x2b2b88[_0x185088(0xc0)]('/')[_0x185088(0xd5)](),{error:_0x26b61b}=await supabase[_0x185088(0x190)]['from'](_0x185088(0x18a))[_0x185088(0xfe)]([_0x2af902]);_0x26b61b&&console['warn'](_0x185088(0x17b),_0x26b61b[_0x185088(0x198)]||_0x26b61b);const _0x3ca221=_0x1e320d['filter'](_0xbd1252=>_0xbd1252!==_0x2b2b88),_0x3a09f9=_0x3ca221['length']?_0x3ca221[0x0]:null,{data:_0x40abcd,error:_0x17e734}=await supabase['from'](_0x185088(0x158))[_0x185088(0x168)]({'gambars':_0x3ca221,'gambar':_0x3a09f9,'updated_at':new Date()})['eq']('id',_0x413c70)[_0x185088(0x12c)]();if(_0x17e734)throw _0x17e734;_0x1353c6[_0x185088(0xcd)]({'success':!![],'data':_0x40abcd});}catch(_0x46eabb){console[_0x185088(0xfa)](_0x46eabb),_0x1353c6[_0x185088(0x194)](0x1f4)[_0x185088(0xcd)]({'success':![],'message':_0x46eabb[_0x185088(0x198)]||_0x46eabb});}}),apps['delete'](a0_0x24840a(0x159),async(_0x2824b2,_0x32f2a2)=>{const _0x5854c7=a0_0x24840a;try{const {id:_0xf980ed}=_0x2824b2[_0x5854c7(0xf9)],{data:_0x438f37,error:_0x15a006}=await supabase[_0x5854c7(0xf3)](_0x5854c7(0x158))[_0x5854c7(0x12c)](_0x5854c7(0x163))['eq']('id',_0xf980ed)[_0x5854c7(0xe2)]();if(_0x15a006)throw _0x15a006;const _0x2f270a=Array[_0x5854c7(0xc3)](_0x438f37[_0x5854c7(0x163)])?_0x438f37[_0x5854c7(0x163)]:[],_0x4f3a73=_0x2f270a[_0x5854c7(0x148)](_0x3a6e19=>_0x3a6e19[_0x5854c7(0xc0)]('/')['pop']())[_0x5854c7(0x165)](Boolean);if(_0x4f3a73[_0x5854c7(0x134)]){const {error:_0x100095}=await supabase[_0x5854c7(0x190)]['from'](_0x5854c7(0x18a))[_0x5854c7(0xfe)](_0x4f3a73);if(_0x100095)throw _0x100095;}const {data:_0x34dbcf,error:_0xd2257e}=await supabase[_0x5854c7(0xf3)](_0x5854c7(0x158))[_0x5854c7(0x168)]({'gambars':[],'gambar':null,'updated_at':new Date()})['eq']('id',_0xf980ed)['select']();if(_0xd2257e)throw _0xd2257e;_0x32f2a2[_0x5854c7(0xcd)]({'success':!![],'data':_0x34dbcf});}catch(_0x2697d5){console[_0x5854c7(0xfa)](_0x2697d5),_0x32f2a2[_0x5854c7(0x194)](0x1f4)[_0x5854c7(0xcd)]({'success':![],'message':_0x2697d5[_0x5854c7(0x198)]||_0x2697d5});}}),apps['put'](a0_0x24840a(0x153),async(_0x56818d,_0x5e0410)=>{const _0x5b4f1d=a0_0x24840a;try{const {id:_0x4b9a46}=_0x56818d[_0x5b4f1d(0xf9)],{order:_0xa8a7e4}=_0x56818d[_0x5b4f1d(0x162)];if(!Array['isArray'](_0xa8a7e4))return _0x5e0410[_0x5b4f1d(0x194)](0x190)[_0x5b4f1d(0xcd)]({'success':![],'message':'order\x20harus\x20array\x20URL'});const _0x354b6b=_0xa8a7e4[_0x5b4f1d(0x134)]?_0xa8a7e4[0x0]:null,{data:_0x24c793,error:_0x1e9f43}=await supabase['from'](_0x5b4f1d(0x158))[_0x5b4f1d(0x168)]({'gambars':_0xa8a7e4,'gambar':_0x354b6b,'updated_at':new Date()})['eq']('id',_0x4b9a46)[_0x5b4f1d(0x12c)]();if(_0x1e9f43)throw _0x1e9f43;_0x5e0410[_0x5b4f1d(0xcd)]({'success':!![],'data':_0x24c793});}catch(_0x460d6d){console[_0x5b4f1d(0xfa)](_0x460d6d),_0x5e0410[_0x5b4f1d(0x194)](0x1f4)['json']({'success':![],'message':_0x460d6d[_0x5b4f1d(0x198)]||_0x460d6d});}}),apps[a0_0x24840a(0x17a)](a0_0x24840a(0x17c),async(_0x578ab3,_0x39c6ac)=>{const _0x246a19=a0_0x24840a;try{const {id:_0x60b822}=_0x578ab3[_0x246a19(0xf9)],_0x38b11f=_0x578ab3[_0x246a19(0x162)]||{};_0x38b11f[_0x246a19(0x194)]!==undefined&&(typeof _0x38b11f[_0x246a19(0x194)]===_0x246a19(0x186)?_0x38b11f[_0x246a19(0x194)]=!['sold',_0x246a19(0x10a),'0']['includes'](_0x38b11f[_0x246a19(0x194)]['toLowerCase']()):_0x38b11f['status']=Boolean(_0x38b11f[_0x246a19(0x194)]));delete _0x38b11f['id'];const {data:_0x4394ab,error:_0x152562}=await supabase[_0x246a19(0xf3)](_0x246a19(0x158))[_0x246a19(0x168)]({..._0x38b11f,'updated_at':new Date()})['eq']('id',_0x60b822)[_0x246a19(0x12c)]();if(_0x152562)throw _0x152562;_0x39c6ac['json']({'success':!![],'data':_0x4394ab});}catch(_0x354ed9){console[_0x246a19(0xfa)](_0x354ed9),_0x39c6ac[_0x246a19(0x194)](0x1f4)[_0x246a19(0xcd)]({'success':![],'message':_0x354ed9[_0x246a19(0x198)]||_0x354ed9});}}),apps[a0_0x24840a(0x170)](a0_0x24840a(0xbb),async(_0x41734b,_0x4b48e4)=>{const _0x1d2427=a0_0x24840a;try{const {id:_0x500271}=_0x41734b['params'],{data:_0xe6dcd3,error:_0x303440}=await supabase['from'](_0x1d2427(0x158))[_0x1d2427(0x12c)](_0x1d2427(0x163))['eq']('id',_0x500271)[_0x1d2427(0xe2)]();if(_0x303440)throw _0x303440;const _0x4b9408=(_0xe6dcd3[_0x1d2427(0x163)]||[])[_0x1d2427(0x148)](_0x590cdf=>_0x590cdf[_0x1d2427(0xc0)]('/')[_0x1d2427(0xd5)]())['filter'](Boolean);if(_0x4b9408['length']){const {error:_0x42eb95}=await supabase[_0x1d2427(0x190)][_0x1d2427(0xf3)](_0x1d2427(0x18a))['remove'](_0x4b9408);if(_0x42eb95)throw _0x42eb95;}const {data:_0x49d5c9,error:_0x438296}=await supabase[_0x1d2427(0xf3)](_0x1d2427(0x158))[_0x1d2427(0x170)]()['eq']('id',_0x500271);if(_0x438296)throw _0x438296;_0x4b48e4[_0x1d2427(0xcd)]({'success':!![],'data':_0x49d5c9});}catch(_0x3f328b){console[_0x1d2427(0xfa)](_0x3f328b),_0x4b48e4[_0x1d2427(0x194)](0x1f4)['json']({'success':![],'message':_0x3f328b[_0x1d2427(0x198)]||_0x3f328b});}}),apps[a0_0x24840a(0x13a)]('trust\x20proxy',0x1);const spaRoutes={'/mobile-legends':a0_0x24840a(0x115),'/mobile-legends/*':'index.html','/login':a0_0x24840a(0x107),'/admin':a0_0x24840a(0xd3)};function sendPublicFile(_0x2c0d90,_0x3aa936){const _0x16a057=a0_0x24840a,_0x1a2108=path[_0x16a057(0x13b)](__dirname,'public',_0x3aa936);return fs[_0x16a057(0xce)](_0x1a2108)?_0x2c0d90['sendFile'](_0x1a2108):_0x2c0d90[_0x16a057(0x194)](0x194)[_0x16a057(0xbe)](_0x16a057(0xd1));}Object[a0_0x24840a(0x151)](spaRoutes)['forEach'](_0x43aa8d=>{const _0x5324e7=a0_0x24840a;apps[_0x5324e7(0x171)](_0x43aa8d,(_0x250071,_0xc3839f)=>{const _0x7310eb=_0x5324e7;return _0xc3839f[_0x7310eb(0x13a)](_0x7310eb(0x154),_0x7310eb(0x120)),sendPublicFile(_0xc3839f,spaRoutes[_0x43aa8d]);});});const port=process['env'][a0_0x24840a(0x140)]||0x849;apps[a0_0x24840a(0x15b)](port,()=>{const _0x596265=a0_0x24840a;console[_0x596265(0xe8)](_0x596265(0x131)+port);});