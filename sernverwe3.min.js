const a0_0x335fee=a0_0x4e5f;(function(_0x1c9f52,_0x24ccaf){const _0x26421f=a0_0x4e5f,_0x1b09bc=_0x1c9f52();while(!![]){try{const _0xfc1b72=-parseInt(_0x26421f(0x132))/0x1*(-parseInt(_0x26421f(0x121))/0x2)+-parseInt(_0x26421f(0x1b3))/0x3*(-parseInt(_0x26421f(0x14a))/0x4)+parseInt(_0x26421f(0x1a9))/0x5*(-parseInt(_0x26421f(0x181))/0x6)+-parseInt(_0x26421f(0x169))/0x7+parseInt(_0x26421f(0x134))/0x8*(-parseInt(_0x26421f(0x118))/0x9)+parseInt(_0x26421f(0x13e))/0xa+parseInt(_0x26421f(0x137))/0xb*(parseInt(_0x26421f(0x178))/0xc);if(_0xfc1b72===_0x24ccaf)break;else _0x1b09bc['push'](_0x1b09bc['shift']());}catch(_0x4ccddc){_0x1b09bc['push'](_0x1b09bc['shift']());}}}(a0_0x1025,0x8054a));const a0_0x56b2b8=(function(){let _0x2ac0b6=!![];return function(_0x4064dd,_0x398f0c){const _0x52c49c=_0x2ac0b6?function(){if(_0x398f0c){const _0x14d71f=_0x398f0c['apply'](_0x4064dd,arguments);return _0x398f0c=null,_0x14d71f;}}:function(){};return _0x2ac0b6=![],_0x52c49c;};}()),a0_0x3a591e=a0_0x56b2b8(this,function(){const _0xa9bcc3=a0_0x4e5f;return a0_0x3a591e['toString']()[_0xa9bcc3(0x102)](_0xa9bcc3(0x144))['toString']()[_0xa9bcc3(0xe3)](a0_0x3a591e)[_0xa9bcc3(0x102)]('(((.+)+)+)+$');});a0_0x3a591e();const a0_0x32e271=(function(){let _0x2e7e60=!![];return function(_0x2bc452,_0x20fac7){const _0x295b5a=_0x2e7e60?function(){const _0x269aa1=a0_0x4e5f;if(_0x20fac7){const _0x1f0a27=_0x20fac7[_0x269aa1(0x116)](_0x2bc452,arguments);return _0x20fac7=null,_0x1f0a27;}}:function(){};return _0x2e7e60=![],_0x295b5a;};}()),a0_0x582478=a0_0x32e271(this,function(){const _0x317c86=a0_0x4e5f,_0x524e0f=function(){const _0x1f18dd=a0_0x4e5f;let _0x99e6b5;try{_0x99e6b5=Function(_0x1f18dd(0xf7)+_0x1f18dd(0x1a4)+');')();}catch(_0x4bbcd9){_0x99e6b5=window;}return _0x99e6b5;},_0xa81864=_0x524e0f(),_0x1a8a93=_0xa81864[_0x317c86(0x124)]=_0xa81864[_0x317c86(0x124)]||{},_0x3d38bc=['log','warn',_0x317c86(0x149),'error',_0x317c86(0x19d),'table','trace'];for(let _0x536d34=0x0;_0x536d34<_0x3d38bc[_0x317c86(0x1a2)];_0x536d34++){const _0x187612=a0_0x32e271['constructor']['prototype'][_0x317c86(0x1a3)](a0_0x32e271),_0x27d956=_0x3d38bc[_0x536d34],_0x7b4f22=_0x1a8a93[_0x27d956]||_0x187612;_0x187612[_0x317c86(0x11c)]=a0_0x32e271[_0x317c86(0x1a3)](a0_0x32e271),_0x187612[_0x317c86(0xeb)]=_0x7b4f22[_0x317c86(0xeb)]['bind'](_0x7b4f22),_0x1a8a93[_0x27d956]=_0x187612;}});a0_0x582478(),require(a0_0x335fee(0x195))[a0_0x335fee(0x142)]();const express=require(a0_0x335fee(0x1af)),apps=express(),{createClient}=require(a0_0x335fee(0xf1)),crypto=require(a0_0x335fee(0xf3)),cors=require(a0_0x335fee(0x14e)),path=require(a0_0x335fee(0x16a)),bodyParser=require(a0_0x335fee(0x15f)),multer=require(a0_0x335fee(0x1a6)),fs=require('fs'),cookieParser=require(a0_0x335fee(0x10e)),bcrypt=require(a0_0x335fee(0x1a1)),uploadsDir=path['join'](__dirname,a0_0x335fee(0xf5));!fs[a0_0x335fee(0xe9)](uploadsDir)&&fs['mkdirSync'](uploadsDir,{'recursive':!![]});const upload=multer({'dest':uploadsDir,'limits':{'fileSize':0x5*0x400*0x400},'fileFilter':(_0x4aa3ee,_0x361815,_0x1a5050)=>{const _0xf635b7=a0_0x335fee,_0x32055c=['image/jpeg',_0xf635b7(0x174),_0xf635b7(0x163)];if(!_0x32055c[_0xf635b7(0x140)](_0x361815[_0xf635b7(0x130)]))return _0x1a5050(new Error(_0xf635b7(0x17f)),![]);_0x1a5050(null,!![]);}}),allowedOrigins=[a0_0x335fee(0x15e),a0_0x335fee(0x179),'http://localhost:2121',a0_0x335fee(0x13d)];apps[a0_0x335fee(0xec)](cors({'origin':function(_0x293062,_0x48dfd8){const _0x326f50=a0_0x335fee;if(!_0x293062)return _0x48dfd8(null,!![]);if(allowedOrigins[_0x326f50(0x140)](_0x293062))return _0x48dfd8(null,!![]);return _0x48dfd8(new Error(_0x326f50(0x192)));},'credentials':!![]})),apps[a0_0x335fee(0xec)]((_0x10b0a2,_0x5010cc,_0x737ace)=>{const _0x204e68=a0_0x335fee;_0x5010cc[_0x204e68(0x125)](_0x204e68(0x161),'no-store'),_0x737ace();}),apps[a0_0x335fee(0xec)](bodyParser['json']({'limit':'10mb'})),apps['use'](bodyParser['urlencoded']({'extended':!![],'limit':a0_0x335fee(0xe7)})),apps[a0_0x335fee(0xec)](cookieParser());(!process[a0_0x335fee(0x14b)][a0_0x335fee(0x119)]||!process[a0_0x335fee(0x14b)][a0_0x335fee(0x15b)])&&console[a0_0x335fee(0x151)](a0_0x335fee(0x12a));const supabase=createClient(process[a0_0x335fee(0x14b)][a0_0x335fee(0x119)]||'',process['env'][a0_0x335fee(0x15b)]||'');apps['use'](express[a0_0x335fee(0x154)](path['join'](__dirname,a0_0x335fee(0xf4))));const sessions=new Map();function genToken(){const _0x598eb9=a0_0x335fee;return crypto['randomBytes'](0x20)[_0x598eb9(0xeb)](_0x598eb9(0x139));}function a0_0x1025(){const _0x1e37bc=['y29YCW','tK9erv9ftLy','cJWVAgvHzd4','D2fYBG','C3bSAxq','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMnHCMqIignVBNrLBNq9iNn1Bw1HCNLFBgfYz2vFAw1Hz2uIic8+cIaGicaGidXTzxrHig5HBwu9iNr3Axr0zxi6DgL0BguIignVBNrLBNq9iG','C3rHDgLJ','Aw5KzxGUAhrTBa','C2XPy2u','AwqGCMvXDwLYzwq','yxjYyxK','t3jPz2LU','CMvWBgfJzq','u1vqqujbu0vFs0vz','AgfZAa','z2fTyMfYCW','Ahr0Chm6lY9Yyw56AxjVlxnLCNzLCI1WCM9KDwn0Aw9UlNvWlNjHAwX3yxKUyxbW','yM9KEs1WyxjZzxi','C2vUzezPBgu','q2fJAguTq29UDhjVBa','DxnLCG','Aw1Hz2uVD2vICa','Cg9W','sw50zxjUywWGzxjYB3i','rMfPBgvKihrVignYzwf0zsbHzg1PBIbPBIbYyw56AxjVC3rVCMvFBg9NAw5Hzg1PBJO','C2fTzvnPDgu','4Os577IpiefKBwLUihvZzxiGywXYzwfKEsbLEgLZDhmGAw4GCMfUEMLYB3n0B3jLx2XVz2LUywrTAw4U','nJCYotu3nNnwy1zIsq','Cgf0Aa','l2fWAs9KzwXFAw1Hz2vZlZPPza','zgf0yq','B3jPz2LUywXvCMW','u3vWywjHC2uGzxjYB3iGB24GBg9NAw4GzMv0y2G6','zgvSzxrL','zxHWAxjLC0f0','zMLSzxm','C3rHy2S','zMLSDgvY','Aw1Hz2uVCg5N','BwvZC2fNzq','pc9OzwfKpG','CMvTB3zL','mtjnwwrwsw0','Ahr0Chm6lY9Yyw56AxjVC3rVCMuUDMvYy2vSlMfWCa','CgfYyw1Z','y29VA2LLCW','u2vZC2LVBIbLEhbPCMvK','ywrTAw5FC2vZC2LVBG','z2v0uhvIBgLJvxjS','sw52ywXPzcbMAwXLihr5CguUiefSBg93zwq6igPWzwCSihbUzYWGD2vICa','rgv0ywLSigfRDw4Gtw9IAwXLieXLz2vUzhmGzgKGuMfUEMLYBYbtDg9Yzq','nMHHEwH3DG','jImZotS','C3rVCMfNzq','AM9PBG','AxnbCNjHEq','ufvu','l2fWAs91CgrFCMfUEMLYB3n0B3jLx2fRDw5TBc86Awq','B3jPz2LU','ChjVzhvJDgLVBG','vw5HyMXLihrVihbHCNnLigzPBguGBMfTzq','ywrTAw4','ywT1BL8','tM8GCgfZC3DVCMrFAgfZAcbMB3vUzcbMB3iGywrTAw4GCM93lG','l2fWAs9SB2DPBG','B3jPz2LUywXUyw1L','z2v0','l2fWAs9KzwXFCMfUEMLYB3n0B3jLx2fRDw5TBc86Awq','tM90igfSBg93zwqGyNKGq09suW','y29Uy2f0','C3rHCNrZv2L0Aa','zg90zw52','uefuq0G','q291BgqGBM90ihjLBw92zsbMAwXLigzYB20GC3rVCMfNztO','rvjsic9HCgKVBg9NB3v0','B3jKzxi','x2nZCMzuB2TLBG','BM9Uzq','z2fTyMfY','zxHJzxb0Aw9U','Dg9mB3DLCKnHC2u','y3nYzLrVA2vU','BM93','yMnYExb0','BgvUz3rO','yMLUza','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','jMD0oW','BxvSDgvY','iIaVpGOGicaG','CMfUzg9T','ndK1ote3nuvgDLjgrq','BgLTAxq','AwqGjIb1CMWGCMvXDwLYzwq','l2fWAs9SB2DVDxq','CgfYC2u','y3jLyxrLuMvHzfn0CMvHBq','zxHWCMvZCW','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6zgvZy3jPChrPB24IignVBNrLBNq9iG','ChvZAa','Ahr0Ca','mZm3ndfWA0Xot1G','DxnLCM5HBwu','C2vUza','l2fWAs9Yzw9YzgvYx2LTywDLCY86Awq','AwqGyw5Kig9YzgvYigfYCMf5ihjLCxvPCMvK','zw50CMLLCW','ChjVDg9JB2W','AwXPA2u','l2fWAs9WB3n0x2fRDw5Fzgv0ywLS','4PYfiefKBwLUihvZzxiGy3jLyxrLzcbPBIbYyw56AxjVC3rVCMvFBg9NAw5Hzg1PBIaOCgfZC3DVCMqGAgfZAcbZDg9YzwqPlG','y29UC3rYDwn0B3i','zw5ZDxjLqwrTAw5fEgLZDhmGzxjYB3i6','Aw5KzxHpzG','l2fWAs91CgXVywrFAw1Hz2vZlZPPza','mtbTyG','rvjsic9HCgKVBg9NAw4','zxHPC3rZu3LUyW','l2fWAs9Yyw56AxjVC3rVCMvFywT1BM1S','Dg9tDhjPBMC','DxnL','zNjVBq','zxjYB3i','ChvIBgLJvxjS','jMX0oW','qhn1CgfIyxnLl3n1CgfIyxnLlwPZ','yMfZzw5HBwu','y3j5ChrV','ChvIBgLJ','DxbSB2fKCW','zgvZA3jPChnP','CMv0DxjUicHMDw5JDgLVBIGPia','jNf1B3q7','DxbSB2fK','zxH0BMfTzq','Aw5Zzxj0','CgfZC3DVCMq','DxbKyxrL','cIaGicaGidXTzxrHihbYB3bLCNr5psjVzZP0ExbLiIbJB250zw50psj3zwjZAxrLiIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6DgL0BguIignVBNrLBNq9iG','C3rYAw5N','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMrLC2nYAxb0Aw9UiIbJB250zw50psi','vMfYEq','C2vHCMnO','ANnVBG','BM8GzMLSzxm','8j+AGcbtzxj2zxiGCNvUBMLUzYbVBIbODhrWoI8VBg9JywXOB3n0oG','CxvLCNK','y2XLyxjdB29RAwu','CMfUEMLYB3n0B3jLx2fRDw5TBa','iIaVpGOGicaGica8Bwv0ysbUyw1Lpsj0D2L0DgvYoMLTywDLiIbJB250zw50psi','y29VA2LL','zw5ZDxjLqwrTAw5fEgLZDhmGzMfPBgvKoG','CgfZC3DVCMrFAgfZAa','oI8V','y29VA2LLlxbHCNnLCG','BwfW','y29TCgfYzq','Bwf5yMvtAw5NBgu','Dg9vChbLCKnHC2u','y2f0y2G','tM90igf1DgHVCML6zwq','C2vJDxjL','yxbWBhK','C2vSzwn0','odm2mZi1ovr3CxLTsW','u1vqqujbu0vFvvjm','yM9KEq','C2LUz2XL','x19WCM90B19F','BMfTyq','BMfTysWGAgfYz2eSigLKx2fRDw4GD2fQAwiGzgLPC2K','A2v5CW','tM90igzVDw5K','mtHRuMDqq0u','Ag9ZDa','Bg9N','y29UC29Szq','C2v0','sw52ywXPzcbJCMvKzw50AwfSCW','Cg9ZDa','l2fRDw4','CMfUEMLYB3n0B3jLx2XVz2LUywrTAw4','4PQG77Ipifnvuefcqvnfx1vstcbHDgf1ifnvuefcqvnfx0Tfwsb0AwrHAYbKAxrLBxvRyw4GzgKGlMvUDI4GugfZDgLRyw4GDMfYAwfIzwWGzw52igrPC2v0igPPA2eGBwvUz2D1BMfRyw4Gu3vWywjHC2uU','Cgf0Ag5HBwu','ywT1BL9TBc5ODg1S','iIaVpGOGicaGica8Bwv0ysbWCM9Wzxj0Et0IB2C6DxjSiIbJB250zw50psi','C3rHDhvZ','CMvHzezPBgvtEw5J','BwLTzxr5Cgu','C29Sza','ntu0mdLRqNDyC1O','l2fWAs9JAgvJAY1ZzxnZAw9U','ognNs25ytG','AgfSzG','u2vYDMvYig1PC2nVBMzPz3vYzwq','mJuYmdaYnJnqs0nzwgm','qurnsu5FufC','Agv4','jMfTCdS','Dhj1C3qGChjVEhK','Chv0','Ahr0CdOVl2XVy2fSAg9ZDdOZmdaW','nde2mdm2me95uM9TsG','ue9tva','Aw5JBhvKzxm','Bg9NAw4UAhrTBa','y29UzMLN','DhjPBq','kcGOlISPkYKRksSK','revmrvrf','y3nYzL90B2TLBG','ywrTAw4UAhrTBa','sw52ywXPzcbdu1jgihrVA2vUig9Yig9YAwDPBG','Aw5MBW','nZj2D05tAg0','zw52','uMfUEMLYBYbtDg9YzsaTierLDgfPBcbbA3vU','Dgv4Dc9ODg1SoYbJAgfYC2v0pxv0zI04'];a0_0x1025=function(){return _0x1e37bc;};return a0_0x1025();}setInterval(()=>{const _0x38ed1c=a0_0x335fee;try{const _0x37a338=Date['now']();for(const [_0x2964af,_0x3b1bba]of sessions[_0x38ed1c(0xde)]()){if(!_0x3b1bba||_0x3b1bba[_0x38ed1c(0x170)]<=_0x37a338)sessions[_0x38ed1c(0x16f)](_0x2964af);}}catch(_0x3cbab7){console[_0x38ed1c(0x151)]('Session\x20cleanup\x20error',_0x3cbab7);}},0x1e*0x3c*0x3e8);function requireAdmin(_0x5a83af,_0x4764f6,_0x480dcf){const _0x5b43e4=a0_0x335fee;try{const _0x3f99de=_0x5a83af[_0x5b43e4(0x17b)]&&_0x5a83af['cookies'][_0x5b43e4(0x17d)];if(!_0x3f99de)return _0x4764f6[_0x5b43e4(0x12e)](0x191)['json']({'success':![],'message':_0x5b43e4(0x114)});const _0x5968c2=sessions[_0x5b43e4(0x190)](_0x3f99de);if(!_0x5968c2)return _0x4764f6[_0x5b43e4(0x107)](_0x5b43e4(0x17d)),_0x4764f6[_0x5b43e4(0x12e)](0x191)[_0x5b43e4(0x103)]({'success':![],'message':'Not\x20authorized'});if(Date[_0x5b43e4(0x1a0)]()>_0x5968c2[_0x5b43e4(0x170)])return sessions['delete'](_0x3f99de),_0x4764f6[_0x5b43e4(0x107)]('admin_session'),_0x4764f6[_0x5b43e4(0x12e)](0x191)[_0x5b43e4(0x103)]({'success':![],'message':_0x5b43e4(0x17c)});_0x5a83af[_0x5b43e4(0x162)]=_0x5968c2[_0x5b43e4(0x162)],_0x5a83af[_0x5b43e4(0x19a)]=_0x5968c2[_0x5b43e4(0x19f)],_0x480dcf();}catch(_0x1892ea){return _0x4764f6[_0x5b43e4(0x12e)](0x191)['json']({'success':![],'message':_0x5b43e4(0x114)});}}function checkCsrf(_0x4c5ca6,_0x4d0629,_0xa265ad){const _0x1a2529=a0_0x335fee;if(![_0x1a2529(0x13f),_0x1a2529(0x186),_0x1a2529(0x145),_0x1a2529(0x196)][_0x1a2529(0x140)](String(_0x4c5ca6['method'])[_0x1a2529(0x112)]()))return _0xa265ad();const _0x270452=_0x4c5ca6['cookies']&&_0x4c5ca6['cookies'][_0x1a2529(0x146)],_0xbcff31=_0x4c5ca6['get']('x-csrf-token');if(_0x270452&&_0xbcff31&&_0x270452===_0xbcff31)return _0xa265ad();const _0x5ee3a4=_0x4c5ca6[_0x1a2529(0x190)]('origin')||_0x4c5ca6['get']('referer')||'';if(_0x5ee3a4)try{const _0x42b967=new URL(_0x5ee3a4);if(allowedOrigins[_0x1a2529(0x140)](_0x42b967[_0x1a2529(0x188)]))return _0xa265ad();}catch(_0x279bf4){}return _0x4d0629['status'](0x193)[_0x1a2529(0x103)]({'success':![],'message':_0x1a2529(0x148)});}async function ensureAdminExists(){const _0xb44d5c=a0_0x335fee;try{let _0x23dac1;try{const _0x5caa14=await supabase[_0xb44d5c(0xed)](_0xb44d5c(0x129))[_0xb44d5c(0x117)]('*')['eq'](_0xb44d5c(0x1b4),_0xb44d5c(0x18b))[_0xb44d5c(0x1aa)](0x1)[_0xb44d5c(0x111)]();_0x23dac1=_0x5caa14&&_0x5caa14[_0xb44d5c(0x16c)]!==undefined?_0x5caa14[_0xb44d5c(0x16c)]:_0x5caa14;}catch(_0x3aa891){const _0x42a2ab=await supabase['from'](_0xb44d5c(0x129))['select']('*')['eq']('username',_0xb44d5c(0x18b))[_0xb44d5c(0x1aa)](0x1);_0x23dac1=_0x42a2ab&&_0x42a2ab[_0xb44d5c(0x16c)]&&_0x42a2ab[_0xb44d5c(0x16c)]['length']?_0x42a2ab[_0xb44d5c(0x16c)][0x0]:null;}if(_0x23dac1){console[_0xb44d5c(0x123)](_0xb44d5c(0x168));return;}const _0x24b202=process[_0xb44d5c(0x14b)][_0xb44d5c(0x138)];if(!_0x24b202){console[_0xb44d5c(0x151)]('⚠️\x20ADMIN_PW\x20not\x20set\x20in\x20env.\x20Skipping\x20creating\x20admin\x20user.\x20Set\x20ADMIN_PW\x20to\x20auto-create\x20admin\x20at\x20startup.');return;}const _0x78a82d=0xc,_0x1807ff=await bcrypt[_0xb44d5c(0x15c)](String(_0x24b202),_0x78a82d),{data:_0x4684d8,error:_0x17393d}=await supabase[_0xb44d5c(0xed)](_0xb44d5c(0x129))[_0xb44d5c(0xfb)]([{'username':_0xb44d5c(0x18b),'password_hash':_0x1807ff,'role':_0xb44d5c(0x18b),'created_at':new Date()}])['select']();_0x17393d?console[_0xb44d5c(0xee)](_0xb44d5c(0x166),_0x17393d):console['log'](_0xb44d5c(0xe2));}catch(_0x1418ba){console[_0xb44d5c(0xee)](_0xb44d5c(0xe4),_0x1418ba&&_0x1418ba[_0xb44d5c(0x172)]?_0x1418ba[_0xb44d5c(0x172)]:_0x1418ba);}}function a0_0x4e5f(_0x2a3cbf,_0x315e37){const _0x4d27ae=a0_0x1025();return a0_0x4e5f=function(_0x582478,_0x32e271){_0x582478=_0x582478-0xdc;let _0x5581e5=_0x4d27ae[_0x582478];if(a0_0x4e5f['XwvYPJ']===undefined){var _0xb97fd2=function(_0x4e5f1e){const _0x2edb7b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3cb9dd='',_0x566776='',_0x4041fc=_0x3cb9dd+_0xb97fd2;for(let _0x20b098=0x0,_0x3e3030,_0x2ac0b6,_0x4064dd=0x0;_0x2ac0b6=_0x4e5f1e['charAt'](_0x4064dd++);~_0x2ac0b6&&(_0x3e3030=_0x20b098%0x4?_0x3e3030*0x40+_0x2ac0b6:_0x2ac0b6,_0x20b098++%0x4)?_0x3cb9dd+=_0x4041fc['charCodeAt'](_0x4064dd+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x3e3030>>(-0x2*_0x20b098&0x6)):_0x20b098:0x0){_0x2ac0b6=_0x2edb7b['indexOf'](_0x2ac0b6);}for(let _0x398f0c=0x0,_0x52c49c=_0x3cb9dd['length'];_0x398f0c<_0x52c49c;_0x398f0c++){_0x566776+='%'+('00'+_0x3cb9dd['charCodeAt'](_0x398f0c)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x566776);};a0_0x4e5f['kvQNfY']=_0xb97fd2,_0x2a3cbf=arguments,a0_0x4e5f['XwvYPJ']=!![];}const _0x3a591e=_0x4d27ae[0x0],_0x56b2b8=_0x582478+_0x3a591e,_0x102563=_0x2a3cbf[_0x56b2b8];if(!_0x102563){const _0x14d71f=function(_0x2e7e60){this['QouqtO']=_0x2e7e60,this['qOgmOd']=[0x1,0x0,0x0],this['AlLUgb']=function(){return'newState';},this['piPKjZ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['eMIvHC']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x14d71f['prototype']['owntNU']=function(){const _0x2bc452=new RegExp(this['piPKjZ']+this['eMIvHC']),_0x20fac7=_0x2bc452['test'](this['AlLUgb']['toString']())?--this['qOgmOd'][0x1]:--this['qOgmOd'][0x0];return this['Skqjho'](_0x20fac7);},_0x14d71f['prototype']['Skqjho']=function(_0x295b5a){if(!Boolean(~_0x295b5a))return _0x295b5a;return this['JfperG'](this['QouqtO']);},_0x14d71f['prototype']['JfperG']=function(_0x1f0a27){for(let _0x524e0f=0x0,_0xa81864=this['qOgmOd']['length'];_0x524e0f<_0xa81864;_0x524e0f++){this['qOgmOd']['push'](Math['round'](Math['random']())),_0xa81864=this['qOgmOd']['length'];}return _0x1f0a27(this['qOgmOd'][0x0]);},new _0x14d71f(a0_0x4e5f)['owntNU'](),_0x5581e5=a0_0x4e5f['kvQNfY'](_0x5581e5),_0x2a3cbf[_0x56b2b8]=_0x5581e5;}else _0x5581e5=_0x102563;return _0x5581e5;},a0_0x4e5f(_0x2a3cbf,_0x315e37);}ensureAdminExists()[a0_0x335fee(0x113)](_0xfa63e5=>console['error'](a0_0x335fee(0x10b),_0xfa63e5)),apps[a0_0x335fee(0x127)](a0_0x335fee(0x18e),async(_0x465d86,_0x5863ad)=>{const _0x53af98=a0_0x335fee;try{const {username:_0x52252d,password:_0x1dc6d8}=_0x465d86[_0x53af98(0x11a)]||{};if(!_0x52252d||!_0x1dc6d8)return _0x5863ad['status'](0x190)[_0x53af98(0x103)]({'success':![],'message':'username\x20&\x20password\x20required'});if(String(_0x52252d)[_0x53af98(0x19e)]()!==_0x53af98(0x18b))return _0x5863ad[_0x53af98(0x12e)](0x191)['json']({'success':![],'message':_0x53af98(0x126)});const {data:_0x2d4847,error:_0x3da06c}=await supabase[_0x53af98(0xed)](_0x53af98(0x129))[_0x53af98(0x117)]('*')['eq']('username',_0x53af98(0x18b))[_0x53af98(0x1aa)](0x1)[_0x53af98(0x111)]();if(_0x3da06c)return console[_0x53af98(0x151)](_0x53af98(0x16e),_0x3da06c),_0x5863ad[_0x53af98(0x12e)](0x1f4)['json']({'success':![],'message':_0x53af98(0x165)});if(!_0x2d4847)return _0x5863ad[_0x53af98(0x12e)](0x191)[_0x53af98(0x103)]({'success':![],'message':_0x53af98(0x126)});const _0x44b22c=String(_0x2d4847[_0x53af98(0x10c)]||_0x2d4847[_0x53af98(0xfc)]||'')[_0x53af98(0x143)]();if(!_0x44b22c)return console[_0x53af98(0xee)](_0x53af98(0x18d)),_0x5863ad[_0x53af98(0x12e)](0x1f4)['json']({'success':![],'message':_0x53af98(0x136)});const _0x2c19a0=await bcrypt[_0x53af98(0x110)](String(_0x1dc6d8),_0x44b22c);if(!_0x2c19a0)return _0x5863ad[_0x53af98(0x12e)](0x191)[_0x53af98(0x103)]({'success':![],'message':_0x53af98(0x126)});const _0x27ebfb=genToken(),_0x48cf98=Date[_0x53af98(0x1a0)]()+0x18*0x3c*0x3c*0x3e8,_0xd6e028=genToken();sessions[_0x53af98(0x125)](_0x27ebfb,{'user':_0x53af98(0x18b),'expiresAt':_0x48cf98,'csrfToken':_0xd6e028});const _0x43a9c3={'httpOnly':!![],'maxAge':0x18*0x3c*0x3c*0x3e8,'sameSite':_0x53af98(0x19b),'secure':!![],'path':'/'};process[_0x53af98(0x14b)][_0x53af98(0x14f)]!==_0x53af98(0x189)&&(_0x43a9c3[_0x53af98(0x115)]=![]);_0x5863ad[_0x53af98(0x10a)](_0x53af98(0x17d),_0x27ebfb,_0x43a9c3),_0x5863ad[_0x53af98(0x10a)]('csrf_token',_0xd6e028,{'httpOnly':![],'maxAge':0x18*0x3c*0x3c*0x3e8,'sameSite':_0x43a9c3[_0x53af98(0x167)],'secure':_0x43a9c3[_0x53af98(0x115)],'path':'/'});try{await supabase['from'](_0x53af98(0x129))[_0x53af98(0xfd)]({'last_login':new Date()})['eq']('username',_0x53af98(0x18b));}catch(_0x1f405b){console[_0x53af98(0x151)]('Could\x20not\x20write\x20last_login:',_0x1f405b);}return _0x5863ad[_0x53af98(0x103)]({'success':!![]});}catch(_0x5eecfe){return console[_0x53af98(0xee)](_0x53af98(0xe8),_0x5eecfe&&_0x5eecfe[_0x53af98(0x172)]?_0x5eecfe[_0x53af98(0x172)]:_0x5eecfe),_0x5863ad[_0x53af98(0x12e)](0x1f4)['json']({'success':![],'message':_0x53af98(0x165)});}}),apps[a0_0x335fee(0x127)](a0_0x335fee(0x1ac),(_0x5d2945,_0x106319)=>{const _0x1c4051=a0_0x335fee;try{const _0x64ec89=_0x5d2945[_0x1c4051(0x17b)]&&_0x5d2945[_0x1c4051(0x17b)]['admin_session'];if(_0x64ec89)sessions[_0x1c4051(0x16f)](_0x64ec89);return _0x106319['clearCookie'](_0x1c4051(0x17d),{'path':'/'}),_0x106319[_0x1c4051(0x107)]('csrf_token',{'path':'/'}),_0x106319[_0x1c4051(0x103)]({'success':!![]});}catch(_0x4a3406){return console[_0x1c4051(0xee)](_0x1c4051(0x198),_0x4a3406),_0x106319['status'](0x1f4)['json']({'success':![],'message':_0x1c4051(0x165)});}}),apps[a0_0x335fee(0x190)](a0_0x335fee(0x133),requireAdmin,(_0x3a5e7a,_0x4b9b30)=>{const _0x12bd5f=a0_0x335fee;_0x4b9b30[_0x12bd5f(0x103)]({'success':!![],'user':_0x3a5e7a[_0x12bd5f(0x162)]});});const escapeHtml=(_0x4e3e5a='')=>String(_0x4e3e5a)[a0_0x335fee(0x15a)](/[&<>"']/g,_0x350338=>({'&':a0_0x335fee(0x13a),'<':a0_0x335fee(0xf0),'>':a0_0x335fee(0x1a5),'\x22':a0_0x335fee(0xf8),'\x27':a0_0x335fee(0x182)}[_0x350338]));apps[a0_0x335fee(0x190)](a0_0x335fee(0x128),async(_0x2403e9,_0x22e59d)=>{const _0x4512f1=a0_0x335fee;try{const _0x2b39c2=path[_0x4512f1(0x184)](__dirname,'public',_0x4512f1(0x12c));if(!fs[_0x4512f1(0xe9)](_0x2b39c2))return _0x22e59d[_0x4512f1(0x12e)](0x194)[_0x4512f1(0x1b5)](_0x4512f1(0x120));let _0xe44f97=fs[_0x4512f1(0x12f)](_0x2b39c2,'utf8');const _0x4c58d1=_0x2403e9[_0x4512f1(0xdf)]+_0x4512f1(0x10d)+_0x2403e9['get'](_0x4512f1(0x122));let _0x3ec5d7='https://lzycriwqrcqbiijtiipa.supabase.co/storage/v1/object/public/gambar/logo/meta_ranziro.webp',_0x48fcf7=_0x4512f1(0x14c),_0x52eace=_0x4512f1(0x180);const _0x21683e=_0x2403e9[_0x4512f1(0x106)]['id'],_0x548a5b=_0x2403e9[_0x4512f1(0x106)][_0x4512f1(0x11d)];if(_0x21683e){const {data:_0x315c61,error:_0x448cd3}=await supabase['from'](_0x4512f1(0x108))[_0x4512f1(0x117)]('*')['eq']('id',_0x21683e)[_0x4512f1(0x11b)]();if(!_0x448cd3&&_0x315c61){const _0x59b4cb=Array[_0x4512f1(0x185)](_0x315c61[_0x4512f1(0x15d)])?_0x315c61[_0x4512f1(0x15d)]:typeof _0x315c61[_0x4512f1(0x15d)]===_0x4512f1(0xff)?((()=>{const _0x34551e=_0x4512f1;try{return JSON[_0x34551e(0x1ad)](_0x315c61[_0x34551e(0x15d)]);}catch(_0x172623){return[];}})()):[],_0xd49c10=_0x59b4cb&&_0x59b4cb[0x0]||_0x315c61[_0x4512f1(0x19c)];_0xd49c10&&(_0x3ec5d7=_0xd49c10[_0x4512f1(0x194)](_0x4512f1(0x1b2))?_0xd49c10:_0x4c58d1+'/'+_0xd49c10[_0x4512f1(0x15a)](/^\//,'')),_0x48fcf7=_0x315c61[_0x4512f1(0x11d)]||_0x48fcf7,_0x52eace=_0x315c61[_0x4512f1(0xf6)]||_0x52eace;}}else{if(_0x548a5b){const {data:_0x5557a6,error:_0x5a3dc2}=await supabase[_0x4512f1(0xed)](_0x4512f1(0x108))[_0x4512f1(0x117)]('*')[_0x4512f1(0xe0)](_0x4512f1(0x11d),'%'+_0x548a5b+'%')[_0x4512f1(0x1aa)](0x1);if(!_0x5a3dc2&&Array[_0x4512f1(0x185)](_0x5557a6)&&_0x5557a6[0x0]){const _0x479a3b=_0x5557a6[0x0],_0x5ec2fc=Array['isArray'](_0x479a3b['gambars'])?_0x479a3b[_0x4512f1(0x15d)]:[],_0x2b50a5=_0x5ec2fc&&_0x5ec2fc[0x0]||_0x479a3b[_0x4512f1(0x19c)];if(_0x2b50a5)_0x3ec5d7=_0x2b50a5[_0x4512f1(0x194)](_0x4512f1(0x1b2))?_0x2b50a5:_0x4c58d1+'/'+_0x2b50a5[_0x4512f1(0x15a)](/^\//,'');_0x48fcf7=_0x479a3b[_0x4512f1(0x11d)]||_0x48fcf7,_0x52eace=_0x479a3b['deskripsi']||_0x52eace;}}}const _0x2c4107=_0x4512f1(0xfe)+escapeHtml(_0x48fcf7)+_0x4512f1(0x1b0)+escapeHtml(_0x52eace)+'\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20<meta\x20property=\x22og:image\x22\x20content=\x22'+_0x3ec5d7+_0x4512f1(0x12d)+(_0x4c58d1+_0x2403e9[_0x4512f1(0x16d)])+_0x4512f1(0x153)+escapeHtml(_0x48fcf7)+_0x4512f1(0x100)+escapeHtml(_0x52eace)+_0x4512f1(0x109)+_0x3ec5d7+_0x4512f1(0x1a7);_0xe44f97[_0x4512f1(0xe5)](_0x4512f1(0x176))!==-0x1?_0xe44f97=_0xe44f97['replace'](_0x4512f1(0x176),_0x2c4107+_0x4512f1(0x150)):_0xe44f97=_0x2c4107+'\x0a'+_0xe44f97,_0x22e59d[_0x4512f1(0x125)]('Content-Type',_0x4512f1(0x14d)),_0x22e59d[_0x4512f1(0x1b5)](_0xe44f97);}catch(_0xee8c33){console[_0x4512f1(0xee)]('ERR\x20/akun\x20meta\x20inject',_0xee8c33),_0x22e59d['sendFile'](path[_0x4512f1(0x184)](__dirname,_0x4512f1(0xf4),_0x4512f1(0x12c)));}}),apps[a0_0x335fee(0x190)]('/health',(_0x596290,_0x5a7f2c)=>{_0x5a7f2c['json']({'ok':!![],'time':new Date()['toISOString']()});}),apps['get'](a0_0x335fee(0xea),async(_0x8edafd,_0x4193b9)=>{const _0xac0480=a0_0x335fee;try{const {data:_0x3e3986,error:_0x380ff1}=await supabase[_0xac0480(0xed)](_0xac0480(0x108))[_0xac0480(0x117)]('*')[_0xac0480(0x199)]('id',{'ascending':![]});if(_0x380ff1)throw _0x380ff1;_0x4193b9[_0xac0480(0x103)]({'success':!![],'data':_0x3e3986});}catch(_0x320bf5){console['error'](_0x320bf5),_0x4193b9[_0xac0480(0x12e)](0x1f4)[_0xac0480(0x103)]({'success':![],'error':_0x320bf5[_0xac0480(0x175)]||_0x320bf5});}}),apps[a0_0x335fee(0x127)](a0_0x335fee(0xe1),requireAdmin,checkCsrf,upload[a0_0x335fee(0x158)](a0_0x335fee(0x19c),0xa),async(_0x467b12,_0x176450)=>{const _0x57c291=a0_0x335fee;try{const {nama:_0x3928bc,harga:_0x31bc89,id_akun:_0x490ff4,deskripsi:_0x1ebf97,rank:_0x1368cb,skin:_0x4d6a95,hero:_0xf33868,winrate:_0x7eac55,pertandingan:_0x40cacc,magic_core:_0x36c750,emblem:_0xdab0a7,pribadi_beli:_0x4b34af,log:_0x42c064,bind:_0x53e2dc,status:_0x4128f4}=_0x467b12[_0x57c291(0x11a)],_0x407704=_0x467b12[_0x57c291(0x171)]||[];if(!_0x3928bc||!_0x31bc89||!_0x490ff4)return _0x176450[_0x57c291(0x12e)](0x190)[_0x57c291(0x103)]({'success':![],'message':_0x57c291(0x11e)});const _0x236500=[];for(const _0x16c748 of _0x407704){const _0x5f401e=path[_0x57c291(0xfa)](_0x16c748[_0x57c291(0x18f)])||'',_0x1a1f52='akun_'+Date[_0x57c291(0x1a0)]()+'_'+Math[_0x57c291(0x1a8)]()['toString'](0x24)[_0x57c291(0x156)](0x2)+_0x5f401e,_0x3a3791=await supabase[_0x57c291(0x183)][_0x57c291(0xed)](_0x57c291(0x19c))[_0x57c291(0xf9)](_0x1a1f52,fs[_0x57c291(0x1ae)](_0x16c748[_0x57c291(0x16a)]),{'contentType':_0x16c748[_0x57c291(0x130)],'duplex':_0x57c291(0x135)});try{fs['unlinkSync'](_0x16c748['path']);}catch(_0x7a0c4){}if(_0x3a3791[_0x57c291(0xee)])throw _0x3a3791[_0x57c291(0xee)];const {data:_0x3a6a7f}=supabase[_0x57c291(0x183)][_0x57c291(0xed)](_0x57c291(0x19c))['getPublicUrl'](_0x1a1f52);_0x236500['push'](_0x3a6a7f['publicUrl']);}const _0x4f9c5f=_0x236500[_0x57c291(0x1a2)]?_0x236500[0x0]:null,_0x25ab31=typeof _0x4128f4===_0x57c291(0xff)?![_0x57c291(0x131),'false','0']['includes'](_0x4128f4['toLowerCase']()):Boolean(_0x4128f4),{data:_0x1e8dce,error:_0x7e058b}=await supabase[_0x57c291(0xed)](_0x57c291(0x108))['insert']([{'nama':_0x3928bc,'harga':_0x31bc89,'id_akun':_0x490ff4,'deskripsi':_0x1ebf97,'rank':_0x1368cb,'skin':_0x4d6a95,'hero':_0xf33868,'winrate':_0x7eac55,'pertandingan':_0x40cacc,'magic_core':_0x36c750,'emblem':_0xdab0a7,'pribadi_beli':_0x4b34af,'log':_0x42c064,'bind':_0x53e2dc,'gambar':_0x4f9c5f,'gambars':_0x236500[_0x57c291(0x1a2)]?_0x236500:null,'status':_0x25ab31,'created_at':new Date()}])[_0x57c291(0x117)]();if(_0x7e058b)throw _0x7e058b;_0x176450[_0x57c291(0x103)]({'success':!![],'data':_0x1e8dce});}catch(_0x3e27ec){console['error'](_0x3e27ec),_0x176450[_0x57c291(0x12e)](0x1f4)['json']({'success':![],'message':_0x3e27ec[_0x57c291(0x175)]||String(_0x3e27ec)});}}),apps[a0_0x335fee(0x127)](a0_0x335fee(0xe6),requireAdmin,checkCsrf,upload['array'](a0_0x335fee(0x19c),0xa),async(_0xf670d4,_0x1ff27b)=>{const _0x2130b4=a0_0x335fee;try{const {id:_0x4fbed8}=_0xf670d4['params'];if(!_0x4fbed8)return _0x1ff27b[_0x2130b4(0x12e)](0x190)[_0x2130b4(0x103)]({'success':![],'message':_0x2130b4(0x157)});const _0x32299d=_0xf670d4[_0x2130b4(0x171)]||[];if(!_0x32299d[_0x2130b4(0x1a2)])return _0x1ff27b['status'](0x190)[_0x2130b4(0x103)]({'success':![],'message':_0x2130b4(0x104)});const _0x20b387=[];for(const _0x48a190 of _0x32299d){const _0x3c8453=path[_0x2130b4(0xfa)](_0x48a190[_0x2130b4(0x18f)])||'',_0x4c45c7=_0x2130b4(0x18c)+Date[_0x2130b4(0x1a0)]()+'_'+Math[_0x2130b4(0x1a8)]()[_0x2130b4(0xeb)](0x24)[_0x2130b4(0x156)](0x2)+_0x3c8453,_0x1baae9=await supabase[_0x2130b4(0x183)]['from'](_0x2130b4(0x19c))[_0x2130b4(0xf9)](_0x4c45c7,fs[_0x2130b4(0x1ae)](_0x48a190[_0x2130b4(0x16a)]),{'contentType':_0x48a190[_0x2130b4(0x130)],'duplex':_0x2130b4(0x135)});try{fs['unlinkSync'](_0x48a190['path']);}catch(_0x56938b){}if(_0x1baae9[_0x2130b4(0xee)])throw _0x1baae9[_0x2130b4(0xee)];const {data:_0x48b3fc}=supabase['storage']['from']('gambar')[_0x2130b4(0x17e)](_0x4c45c7);_0x20b387[_0x2130b4(0x1b1)](_0x48b3fc[_0x2130b4(0xef)]);}const {data:_0x217ff8,error:_0x354777}=await supabase[_0x2130b4(0xed)](_0x2130b4(0x108))[_0x2130b4(0x117)](_0x2130b4(0x15d))['eq']('id',_0x4fbed8)['single']();if(_0x354777)throw _0x354777;let _0x122dfd=[];const _0x2f1f04=_0x217ff8&&_0x217ff8['gambars']?Array[_0x2130b4(0x185)](_0x217ff8[_0x2130b4(0x15d)])?_0x217ff8[_0x2130b4(0x15d)]:((()=>{const _0x1aed54=_0x2130b4;try{return JSON[_0x1aed54(0x1ad)](_0x217ff8['gambars']);}catch(_0x4412bd){return[];}})()):[];_0x122dfd=_0x2f1f04[_0x2130b4(0x193)](_0x20b387);const {data:_0x38763f,error:_0xb44a41}=await supabase[_0x2130b4(0xed)](_0x2130b4(0x108))[_0x2130b4(0xfd)]({'gambars':_0x122dfd,'updated_at':new Date()})['eq']('id',_0x4fbed8)[_0x2130b4(0x117)]();if(_0xb44a41)throw _0xb44a41;_0x1ff27b[_0x2130b4(0x103)]({'success':!![],'data':_0x38763f});}catch(_0x291927){console[_0x2130b4(0xee)](_0x291927),_0x1ff27b[_0x2130b4(0x12e)](0x1f4)[_0x2130b4(0x103)]({'success':![],'message':_0x291927[_0x2130b4(0x175)]||String(_0x291927)});}}),apps['put'](a0_0x335fee(0xdc),requireAdmin,checkCsrf,async(_0xff27e0,_0x271f63)=>{const _0x47a145=a0_0x335fee;try{const {id:_0x48ec66}=_0xff27e0[_0x47a145(0x17a)],{order:_0x234dd7}=_0xff27e0['body']||{};if(!_0x48ec66||!Array[_0x47a145(0x185)](_0x234dd7))return _0x271f63[_0x47a145(0x12e)](0x190)[_0x47a145(0x103)]({'success':![],'message':_0x47a145(0xdd)});const {data:_0x5efe47,error:_0x1faf28}=await supabase['from'](_0x47a145(0x108))[_0x47a145(0xfd)]({'gambars':_0x234dd7,'updated_at':new Date()})['eq']('id',_0x48ec66)['select']();if(_0x1faf28)throw _0x1faf28;_0x271f63['json']({'success':!![],'data':_0x5efe47});}catch(_0x4576a9){console[_0x47a145(0xee)](_0x4576a9),_0x271f63[_0x47a145(0x12e)](0x1f4)['json']({'success':![],'message':_0x4576a9[_0x47a145(0x175)]||String(_0x4576a9)});}}),apps[a0_0x335fee(0x13c)](a0_0x335fee(0x187),requireAdmin,checkCsrf,async(_0x51abd7,_0x2edf55)=>{const _0x4433d3=a0_0x335fee;try{const {id:_0x236b24}=_0x51abd7[_0x4433d3(0x17a)],_0x4a779d=_0x51abd7[_0x4433d3(0x11a)]||{};_0x4a779d[_0x4433d3(0x12e)]!==undefined&&(typeof _0x4a779d['status']===_0x4433d3(0xff)?_0x4a779d[_0x4433d3(0x12e)]=![_0x4433d3(0x131),'false','0'][_0x4433d3(0x140)](_0x4a779d[_0x4433d3(0x12e)]['toLowerCase']()):_0x4a779d[_0x4433d3(0x12e)]=Boolean(_0x4a779d[_0x4433d3(0x12e)]));delete _0x4a779d['id'];const {data:_0xb3e257,error:_0x5e513b}=await supabase[_0x4433d3(0xed)](_0x4433d3(0x108))[_0x4433d3(0xfd)]({..._0x4a779d,'updated_at':new Date()})['eq']('id',_0x236b24)[_0x4433d3(0x117)]();if(_0x5e513b)throw _0x5e513b;_0x2edf55[_0x4433d3(0x103)]({'success':!![],'data':_0xb3e257});}catch(_0x3d6ab2){console['error'](_0x3d6ab2),_0x2edf55[_0x4433d3(0x12e)](0x1f4)[_0x4433d3(0x103)]({'success':![],'message':_0x3d6ab2[_0x4433d3(0x175)]||_0x3d6ab2});}}),apps[a0_0x335fee(0x16f)](a0_0x335fee(0x191),requireAdmin,checkCsrf,async(_0x152e80,_0x461bd3)=>{const _0x2b3c03=a0_0x335fee;try{const {id:_0x200acd}=_0x152e80[_0x2b3c03(0x17a)],{data:_0x36b1bc,error:_0xec0a70}=await supabase['from']('ranzirostore_akunml')['select'](_0x2b3c03(0x15d))['eq']('id',_0x200acd)[_0x2b3c03(0x11b)]();if(_0xec0a70)throw _0xec0a70;const _0xa2f343=(_0x36b1bc[_0x2b3c03(0x15d)]||[])[_0x2b3c03(0x10f)](_0x3f90e4=>{const _0x45885c=_0x2b3c03;try{const _0x1eed14=new URL(_0x3f90e4)[_0x45885c(0x12b)];return path[_0x45885c(0xf2)](_0x1eed14);}catch(_0x10029d){return String(_0x3f90e4)[_0x45885c(0x152)]('/')[_0x45885c(0x164)]();}})['filter'](Boolean);if(_0xa2f343[_0x2b3c03(0x1a2)]){const {error:_0x57e805}=await supabase[_0x2b3c03(0x183)][_0x2b3c03(0xed)](_0x2b3c03(0x19c))[_0x2b3c03(0x177)](_0xa2f343);if(_0x57e805)throw _0x57e805;}const {data:_0x35d7a5,error:_0x467359}=await supabase[_0x2b3c03(0xed)](_0x2b3c03(0x108))[_0x2b3c03(0x16f)]()['eq']('id',_0x200acd);if(_0x467359)throw _0x467359;_0x461bd3['json']({'success':!![],'data':_0x35d7a5});}catch(_0x14b21b){console[_0x2b3c03(0xee)](_0x14b21b),_0x461bd3['status'](0x1f4)[_0x2b3c03(0x103)]({'success':![],'message':_0x14b21b[_0x2b3c03(0x175)]||_0x14b21b});}}),apps[a0_0x335fee(0x16f)]('/api/del_image',requireAdmin,checkCsrf,async(_0x21ebb7,_0xfa7e12)=>{const _0x38d91c=a0_0x335fee;try{const {id:_0x3e63da,url:_0x35c753}=_0x21ebb7[_0x38d91c(0x11a)]||{};if(!_0x3e63da||!_0x35c753)return _0xfa7e12[_0x38d91c(0x12e)](0x190)[_0x38d91c(0x103)]({'success':![],'message':_0x38d91c(0x1ab)});let _0x1be523=null;try{_0x1be523=path[_0x38d91c(0xf2)](new URL(_0x35c753)[_0x38d91c(0x12b)]);}catch(_0x5bd62e){_0x1be523=String(_0x35c753)[_0x38d91c(0x152)]('/')[_0x38d91c(0x164)]();}if(!_0x1be523)return _0xfa7e12[_0x38d91c(0x12e)](0x190)[_0x38d91c(0x103)]({'success':![],'message':_0x38d91c(0x18a)});const {error:_0x581031}=await supabase[_0x38d91c(0x183)]['from']('gambar')[_0x38d91c(0x177)]([_0x1be523]);_0x581031&&console[_0x38d91c(0x151)](_0x38d91c(0x197),_0x581031);const {data:_0xa6a9d4,error:_0x1e581f}=await supabase[_0x38d91c(0xed)](_0x38d91c(0x108))[_0x38d91c(0x117)]('gambars')['eq']('id',_0x3e63da)[_0x38d91c(0x11b)]();if(_0x1e581f)throw _0x1e581f;const _0x5cc099=_0xa6a9d4&&_0xa6a9d4[_0x38d91c(0x15d)]?Array[_0x38d91c(0x185)](_0xa6a9d4[_0x38d91c(0x15d)])?_0xa6a9d4[_0x38d91c(0x15d)]:((()=>{const _0x4190e6=_0x38d91c;try{return JSON[_0x4190e6(0x1ad)](_0xa6a9d4[_0x4190e6(0x15d)]);}catch(_0x1ddb5f){return[];}})()):[],_0x32b45e=_0x5cc099[_0x38d91c(0x173)](_0x50c83b=>String(_0x50c83b)!==String(_0x35c753)),{data:_0x30614d,error:_0x20a824}=await supabase[_0x38d91c(0xed)](_0x38d91c(0x108))['update']({'gambars':_0x32b45e,'updated_at':new Date()})['eq']('id',_0x3e63da)[_0x38d91c(0x117)]();if(_0x20a824)throw _0x20a824;_0xfa7e12[_0x38d91c(0x103)]({'success':!![],'data':_0x30614d});}catch(_0x5670d9){console[_0x38d91c(0xee)](_0x5670d9),_0xfa7e12[_0x38d91c(0x12e)](0x1f4)[_0x38d91c(0x103)]({'success':![],'message':_0x5670d9[_0x38d91c(0x175)]||String(_0x5670d9)});}}),apps[a0_0x335fee(0x16f)](a0_0x335fee(0x16b),requireAdmin,checkCsrf,async(_0x45e02d,_0x353f04)=>{const _0x2b1c0a=a0_0x335fee;try{const {id:_0x2b63cd}=_0x45e02d[_0x2b1c0a(0x17a)],{data:_0x1faa8d,error:_0x209a52}=await supabase[_0x2b1c0a(0xed)](_0x2b1c0a(0x108))[_0x2b1c0a(0x117)](_0x2b1c0a(0x15d))['eq']('id',_0x2b63cd)[_0x2b1c0a(0x11b)]();if(_0x209a52)throw _0x209a52;const _0x2a3c98=(_0x1faa8d[_0x2b1c0a(0x15d)]||[])[_0x2b1c0a(0x10f)](_0x57179d=>{const _0x756fa8=_0x2b1c0a;try{return path[_0x756fa8(0xf2)](new URL(_0x57179d)['pathname']);}catch(_0x387ab0){return String(_0x57179d)[_0x756fa8(0x152)]('/')[_0x756fa8(0x164)]();}})[_0x2b1c0a(0x173)](Boolean);if(_0x2a3c98[_0x2b1c0a(0x1a2)]){const {error:_0x500b32}=await supabase['storage']['from']('gambar')[_0x2b1c0a(0x177)](_0x2a3c98);if(_0x500b32)throw _0x500b32;}const {data:_0x13f26f,error:_0x4b26a3}=await supabase['from'](_0x2b1c0a(0x108))[_0x2b1c0a(0xfd)]({'gambars':null,'gambar':null,'updated_at':new Date()})['eq']('id',_0x2b63cd)[_0x2b1c0a(0x117)]();if(_0x4b26a3)throw _0x4b26a3;_0x353f04['json']({'success':!![],'data':_0x13f26f});}catch(_0x38ce5f){console['error'](_0x38ce5f),_0x353f04[_0x2b1c0a(0x12e)](0x1f4)[_0x2b1c0a(0x103)]({'success':![],'message':_0x38ce5f[_0x2b1c0a(0x175)]||String(_0x38ce5f)});}}),apps['set'](a0_0x335fee(0x13b),0x1);const spaRoutes={'/mobile-legends':a0_0x335fee(0x155),'/mobile-legends/*':a0_0x335fee(0x155),'/login':a0_0x335fee(0x141),'/admin':a0_0x335fee(0x147),'/akun':a0_0x335fee(0x12c),'/akun/*':a0_0x335fee(0x12c)};function sendPublicFile(_0x568071,_0x33d44f){const _0x526de6=a0_0x335fee,_0x47364e=path[_0x526de6(0x184)](__dirname,_0x526de6(0xf4),_0x33d44f);return fs['existsSync'](_0x47364e)?_0x568071[_0x526de6(0x160)](_0x47364e):_0x568071[_0x526de6(0x12e)](0x194)[_0x526de6(0x1b5)](_0x526de6(0x120));}Object[a0_0x335fee(0x11f)](spaRoutes)['forEach'](_0x452ead=>{const _0x39db68=a0_0x335fee;apps[_0x39db68(0x190)](_0x452ead,(_0x54e81d,_0x56dfec)=>{const _0xe79b16=_0x39db68;return _0x56dfec[_0xe79b16(0x125)](_0xe79b16(0x101),_0xe79b16(0x159)),sendPublicFile(_0x56dfec,spaRoutes[_0x452ead]);});});const port=process['env']['PORT']||0x849;apps['listen'](port,()=>{const _0x5e3314=a0_0x335fee;console['log'](_0x5e3314(0x105)+port);});